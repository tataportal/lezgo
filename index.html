<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LEZGO — Tickets Verificados</title>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* ═══════════════════════════════════════════
   RESET & VARIABLES — Paleta unificada
   ═══════════════════════════════════════════ */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --acid: #E5FF00;
  --acid-dim: rgba(229,255,0,0.15);
  --acid-glow: rgba(229,255,0,0.25);
  --red: #FF4D4D;
  --green: #00FF85;
  --pink: #FF00FF;
  --cyan: #00FFFF;
  --bg: #0A0A0A;
  --bg-raised: #111111;
  --bg-hover: #161616;
  --border: rgba(255,255,255,0.08);
  --text: #f0f0f0;
  --text-mid: #c8c8c8;
  --text-dim: #909090;
}

body {
  font-family: 'Sora', sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
  line-height: 1.5;
  font-size: 16px;
}
a { color: inherit; text-decoration: none; }
button { font-family: inherit; cursor: pointer; }
img { display: block; max-width: 100%; }

/* Acid Smiley inline icon */
.acid-smiley {
  display: inline-block; vertical-align: middle;
  width: 1em; height: 1em; position: relative; top: -0.05em;
}
.acid-smiley svg { width: 100%; height: 100%; }
.acid-smiley-sm { width: 14px; height: 14px; }
.acid-smiley-md { width: 20px; height: 20px; }
.acid-smiley-lg { width: 28px; height: 28px; }

/* noise overlay */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
}
/* scanlines */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(0deg, transparent 0px, transparent 2px, rgba(255,255,255,0.012) 2px, rgba(255,255,255,0.012) 4px);
  pointer-events: none;
  z-index: 9998;
}

/* ═══════════════════════════════════════════
   UTILITY BAR
   ═══════════════════════════════════════════ */
.util-bar {
  background: rgba(5,5,5,0.9);
  border-bottom: 1px solid rgba(255,255,255,0.04);
  font-size: 11px;
  color: var(--text-dim);
  letter-spacing: 0.3px;
}
.util-bar-inner {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 48px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.util-left, .util-right { display: flex; align-items: center; gap: 24px; }
.util-bar a { color: var(--text-dim); transition: color 0.15s; font-size: 11px; }
.util-bar a:hover { color: var(--acid); }
.util-flag { display: flex; align-items: center; gap: 6px; font-weight: 600; color: var(--text-mid); font-size: 11px; }
.util-sep { width: 1px; height: 12px; background: rgba(255,255,255,0.08); }

/* ═══════════════════════════════════════════
   MAIN NAV
   ═══════════════════════════════════════════ */
.main-nav {
  position: sticky;
  top: 0;
  z-index: 500;
  background: rgba(10,10,10,0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
}
.main-nav-inner {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 48px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.nav-logo {
  font-size: 24px;
  font-weight: 800;
  color: var(--acid);
  letter-spacing: -1.5px;
  cursor: pointer;
  flex-shrink: 0;
}
.nav-categories { display: flex; align-items: center; gap: 0; height: 64px; }
.nav-cat {
  display: flex;
  align-items: center;
  height: 64px;
  padding: 0 22px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-mid);
  border-bottom: 2px solid transparent;
  transition: all 0.15s;
  cursor: pointer;
  white-space: nowrap;
}
.nav-cat:hover { color: var(--text); }
.nav-cat.active { color: var(--acid); border-bottom-color: var(--acid); }
.nav-cat .soon-tag {
  font-size: 8px;
  background: var(--text-dim);
  color: var(--bg);
  padding: 1px 5px;
  margin-left: 6px;
  font-weight: 700;
  letter-spacing: 0.5px;
}
.nav-right { display: flex; align-items: center; gap: 16px; }
.nav-user { display: flex; align-items: center; gap: 10px; cursor: pointer; }
.nav-avatar {
  width: 34px; height: 34px;
  background: var(--acid);
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; font-weight: 700; color: var(--bg);
  border-radius: 50%;
}
.nav-username { font-size: 13px; font-weight: 500; color: var(--text-mid); }

/* ═══════════════════════════════════════════
   VIEW SYSTEM
   ═══════════════════════════════════════════ */
.view { display: none; }
.view.active { display: block; }

/* ═══════════════════════════════════════════
   HERO — Evento Destacado
   ═══════════════════════════════════════════ */
.hero {
  position: relative;
  width: 100%;
  height: 75vh;
  min-height: 600px;
  max-height: 800px;
  overflow: hidden;
}
.hero-img {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center 30%;
  filter: brightness(0.45) saturate(1.3) contrast(1.1);
  transform: scale(1.02);
  animation: hero-breathe 8s ease-in-out infinite;
}
.hero-video-wrap {
  position: absolute;
  inset: 0;
  overflow: hidden;
  filter: brightness(0.45) saturate(1.3) contrast(1.1);
  transform: scale(1.02);
  animation: hero-breathe 8s ease-in-out infinite;
}
.hero-video-wrap iframe {
  position: absolute;
  top: 50%; left: 50%;
  width: 180%; height: 180%;
  transform: translate(-50%, -50%);
  border: 0;
  pointer-events: none;
}
.hero-video-wrap video {
  position: absolute;
  inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  object-position: center 30%;
}
.hero-video-wrap .hero-bg-img {
  position: absolute;
  inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  object-position: center 30%;
}
@keyframes hero-breathe {
  0%, 100% { transform: scale(1.02); }
  50% { transform: scale(1.06); }
}
.hero-gradient {
  position: absolute;
  inset: 0;
  background:
    linear-gradient(to top, var(--bg) 0%, rgba(10,10,10,0.4) 40%, transparent 70%),
    linear-gradient(to right, rgba(10,10,10,0.8) 0%, transparent 70%);
}
/* Acid glow accent on hero */
.hero::after {
  content: ''; position: absolute; bottom: 0; left: 10%;
  width: 500px; height: 300px;
  background: radial-gradient(ellipse, rgba(229,255,0,0.06) 0%, transparent 70%);
  pointer-events: none; z-index: 1;
}
.hero-content {
  position: relative;
  z-index: 2;
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 48px;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding-bottom: 80px;
}
.hero-badge {
  display: inline-flex;
  align-items: center; gap: 6px;
  background: var(--acid); color: var(--bg);
  padding: 6px 16px;
  font-size: 11px; font-weight: 700;
  letter-spacing: 2px; text-transform: uppercase;
  width: fit-content;
  margin-bottom: 20px;
  box-shadow: 0 0 20px rgba(229,255,0,0.3);
}
.hero h1 {
  font-size: clamp(48px, 6vw, 72px);
  font-weight: 800;
  line-height: 0.95;
  letter-spacing: -3px;
  margin-bottom: 16px;
  max-width: 750px;
  position: relative;
}
/* Glitch on hero title */
.hero-glitch-layer {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  pointer-events: none;
  opacity: 0;
  transition: none;
}
.hero-glitch-pink { color: rgba(255,0,255,0.5); }
.hero-glitch-cyan { color: rgba(0,255,255,0.5); }
.glitch-active .hero-glitch-pink {
  opacity: 1;
  clip-path: inset(15% 0 55% 0);
  transform: translateX(-5px);
}
.glitch-active .hero-glitch-cyan {
  opacity: 1;
  clip-path: inset(50% 0 15% 0);
  transform: translateX(5px);
}

.hero-sub { font-size: 20px; color: rgba(255,255,255,0.6); margin-bottom: 10px; max-width: 540px; line-height: 1.6; }
.hero-meta { font-size: 16px; color: var(--text-dim); margin-bottom: 28px; }
.hero-actions {
  display: flex; align-items: center; gap: 24px; flex-wrap: wrap;
}
.hero-cta {
  display: inline-flex; align-items: center; gap: 10px;
  background: var(--acid); color: var(--bg); border: none;
  padding: 16px 36px; font-size: 16px; font-weight: 700;
  letter-spacing: -0.3px; transition: all 0.2s; width: fit-content;
}
.hero-cta:hover { background: #fff; box-shadow: 0 0 40px var(--acid-glow); transform: translateY(-2px); }
.hero-sponsor {
  display: flex; align-items: center; gap: 8px;
  font-size: 12px; color: var(--text-dim);
}
.hero-sponsor span { font-weight: 600; color: var(--text-mid); }

/* ═══════════════════════════════════════════
   SEARCH BAR
   ═══════════════════════════════════════════ */
.search-section {
  position: relative; z-index: 50;
  max-width: 1600px;
  margin: -32px auto 0;
  padding: 0 48px;
}
.search-bar {
  background: var(--bg-raised);
  border: 1px solid rgba(255,255,255,0.1);
  display: flex; align-items: stretch;
  height: 64px; overflow: visible;
  box-shadow: 0 8px 40px rgba(0,0,0,0.5);
}
.search-field {
  flex: 1;
  display: flex; flex-direction: column; justify-content: center;
  padding: 0 20px;
  border-right: 1px solid var(--border);
  cursor: pointer; transition: background 0.15s;
}
.search-field:hover { background: var(--bg-hover); }
.search-field-label {
  font-size: 11px; font-weight: 600; color: var(--text-dim);
  letter-spacing: 1px; text-transform: uppercase;
  line-height: 1; margin-bottom: 3px;
}
.search-field-value { font-size: 15px; color: var(--text-mid); }
.search-field-main { flex: 2; }
.search-btn {
  background: var(--acid); color: var(--bg); border: none;
  padding: 0 32px; font-size: 15px; font-weight: 700;
  transition: background 0.15s;
  display: flex; align-items: center; gap: 8px; white-space: nowrap;
}
.search-btn:hover { background: #fff; }

/* Autocomplete dropdown */
.search-ac-dropdown {
  display: none; position: absolute; top: 100%; left: 0; right: 0;
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 0 0 12px 12px; z-index: 999; max-height: 260px;
  overflow-y: auto; box-shadow: 0 12px 32px rgba(0,0,0,0.5);
}
.search-ac-dropdown.open { display: block; }
.search-ac-item {
  padding: 12px 16px; cursor: pointer; display: flex; align-items: center; gap: 12px;
  border-bottom: 1px solid rgba(255,255,255,0.04); transition: background 0.1s;
}
.search-ac-item:last-child { border-bottom: none; }
.search-ac-item:hover, .search-ac-item.focused { background: rgba(229,255,0,0.06); }
.search-ac-item .ac-emoji { font-size: 20px; width: 32px; text-align: center; }
.search-ac-item .ac-info { flex: 1; }
.search-ac-item .ac-name { font-size: 14px; font-weight: 600; color: var(--text); }
.search-ac-item .ac-name mark { background: none; color: var(--acid); font-weight: 800; }
.search-ac-item .ac-meta { font-size: 12px; color: var(--text-dim); margin-top: 2px; }

/* ═══════════════════════════════════════════
   MARQUEE — Rotating ribbon
   ═══════════════════════════════════════════ */
.marquee {
  border-top: 2px solid var(--acid);
  border-bottom: 2px solid var(--acid);
  padding: 10px 0;
  overflow: hidden;
  background: linear-gradient(90deg, var(--acid) 0%, var(--green) 50%, var(--acid) 100%);
  margin-top: 0;
  white-space: nowrap;
}
.marquee-track {
  display: inline-flex;
  animation: marq 30s linear infinite;
}
.marquee-item {
  font-size: 13px;
  font-weight: 800;
  color: var(--bg);
  text-transform: uppercase;
  white-space: nowrap;
  letter-spacing: 1px;
  padding: 0 24px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.marquee-item .acid-smiley { width: 16px; height: 16px; }
@keyframes marq {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* ═══════════════════════════════════════════
   DROPDOWNS & CALENDAR
   ═══════════════════════════════════════════ */
.search-field { position: relative; overflow: visible; }
.dropdown {
  display: none;
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  background: #181818;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
  z-index: 100;
  max-height: 300px;
  overflow-y: auto;
  border-radius: 4px;
}
.dropdown.open { display: block; }
.dropdown-item {
  padding: 12px 20px;
  font-size: 15px;
  color: var(--text-mid);
  cursor: pointer;
  transition: all 0.1s;
  display: flex;
  align-items: center;
  gap: 10px;
}
.dropdown-item:hover { background: var(--bg-hover); color: var(--acid); }
.dropdown-item.selected { color: var(--acid); background: rgba(229,255,0,0.05); }
.dropdown-item .dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--acid);
  opacity: 0;
}
.dropdown-item.selected .dot, .dropdown-item:hover .dot { opacity: 1; }

/* Calendar */
.cal-dropdown {
  display: none;
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  background: #181818;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
  z-index: 100;
  padding: 16px;
  width: 320px;
  border-radius: 4px;
}
.cal-dropdown.open { display: block; }
.cal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.cal-header span {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
}
.cal-nav {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-mid);
  width: 28px; height: 28px;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
  transition: all 0.15s;
}
.cal-nav:hover { border-color: var(--acid); color: var(--acid); }
.cal-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}
.cal-day-label {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-dim);
  text-align: center;
  padding: 4px 0;
  letter-spacing: 0.5px;
}
.cal-day {
  text-align: center;
  padding: 8px 0;
  font-size: 13px;
  color: var(--text-mid);
  cursor: pointer;
  transition: all 0.1s;
  border-radius: 0;
  position: relative;
}
.cal-day:hover { background: var(--bg-hover); color: var(--text); }
.cal-day.empty { cursor: default; }
.cal-day.today { color: var(--acid); font-weight: 700; }
.cal-day.in-range { background: rgba(229,255,0,0.08); color: var(--acid); }
.cal-day.range-start { background: var(--acid); color: var(--bg); font-weight: 800; border-radius: 6px 0 0 6px; }
.cal-day.range-end { background: var(--acid); color: var(--bg); font-weight: 800; border-radius: 0 6px 6px 0; }
.cal-day.range-start.range-end { border-radius: 6px; }
.cal-day.other-month { color: var(--text-dim); opacity: 0.3; }
.cal-range-info {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
  font-size: 12px;
  color: var(--text-dim);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.cal-clear {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-mid);
  padding: 4px 12px;
  font-size: 11px;
  font-weight: 600;
  transition: all 0.15s;
}
.cal-clear:hover { border-color: var(--acid); color: var(--acid); }

/* Search Results Banner */
.search-results-banner {
  display: none;
  max-width: 1600px;
  margin: 0 auto;
  padding: 24px 32px 0;
}
.search-results-banner.visible { display: block; }
.srb-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.srb-title {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.3px;
}
.srb-title span { color: var(--acid); }
.srb-clear {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-mid);
  padding: 6px 16px;
  font-size: 12px;
  font-weight: 600;
  transition: all 0.15s;
}
.srb-clear:hover { border-color: var(--acid); color: var(--acid); }
.srb-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 32px;
}
.srb-card {
  background: var(--bg-raised);
  border: 1px solid rgba(229,255,0,0.15);
  display: flex;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s;
}
.srb-card:hover {
  border-color: var(--acid);
  box-shadow: 0 4px 20px rgba(229,255,0,0.08);
}
.srb-card-img {
  width: 140px;
  min-height: 120px;
  background-size: cover;
  background-position: center;
  flex-shrink: 0;
}
.srb-card-body {
  padding: 16px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 1;
}
.srb-card-date { font-size: 14px; font-weight: 600; color: var(--acid); margin-bottom: 4px; }
.srb-card-name { font-size: 18px; font-weight: 700; margin-bottom: 4px; }
.srb-card-venue { font-size: 15px; color: var(--text-dim); margin-bottom: 8px; }
.srb-card-price { font-size: 16px; font-weight: 700; color: var(--acid); }

/* ═══════════════════════════════════════════
   CONTENT AREA
   ═══════════════════════════════════════════ */
.content {
  max-width: 1600px;
  margin: 0 auto;
  padding: 56px 48px 0;
}

/* ═══════════════════════════════════════════
   PROMO CARDS
   ═══════════════════════════════════════════ */
.promo-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 64px;
}
.promo-card {
  position: relative;
  aspect-ratio: 1 / 1;
  overflow: hidden; cursor: pointer;
  border: 1px solid var(--border);
  transition: border-color 0.2s, transform 0.3s;
}
.promo-card:hover { transform: translateY(-4px); }
.promo-card:hover { border-color: rgba(229,255,0,0.3); }
.promo-card-img {
  position: absolute; inset: 0;
  background-size: cover; background-position: center;
  filter: brightness(0.5) saturate(1.1);
  transition: transform 0.4s;
}
.promo-card:hover .promo-card-img { transform: scale(1.03); }
.promo-card-overlay {
  position: absolute; inset: 0;
  background: linear-gradient(to top, rgba(10,10,10,0.95) 0%, transparent 60%);
}
.promo-card-body {
  position: relative; z-index: 2;
  height: 100%; display: flex; flex-direction: column;
  justify-content: flex-end; padding: 28px;
}
.promo-tag {
  display: inline-flex;
  background: var(--acid); color: var(--bg);
  padding: 3px 10px; font-size: 10px; font-weight: 700;
  letter-spacing: 0.5px; text-transform: uppercase;
  width: fit-content; margin-bottom: 10px;
}
.promo-card-body h3 { font-size: 26px; font-weight: 700; letter-spacing: -0.5px; margin-bottom: 6px; }
.promo-card-body p { font-size: 16px; color: var(--text-mid); }

/* ═══════════════════════════════════════════
   SECTION HEADERS
   ═══════════════════════════════════════════ */
.section-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.section-title { font-size: 26px; font-weight: 700; letter-spacing: -0.5px; }
.section-more { font-size: 15px; font-weight: 500; color: var(--acid); cursor: pointer; }
.section-more:hover { text-decoration: underline; }

/* ═══════════════════════════════════════════
   EVENT CARDS
   ═══════════════════════════════════════════ */
.events-grid {
  display: none;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px; margin-bottom: 64px;
}
.events-grid.active {
  display: grid;
}
.ev-card {
  background: var(--bg-raised);
  border: 1px solid var(--border);
  overflow: hidden; cursor: pointer;
  transition: all 0.2s;
}
.ev-card:hover {
  border-color: rgba(229,255,0,0.25);
  transform: translateY(-3px);
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
}
.ev-card-img { position: relative; height: 200px; overflow: hidden; }
.ev-card-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s; }
.ev-card:hover .ev-card-img img { transform: scale(1.05); }
.ev-card-img::after {
  content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 60px;
  background: linear-gradient(to top, var(--bg-raised), transparent);
}
.ev-card-badge {
  position: absolute; top: 12px; left: 12px;
  padding: 3px 10px; font-size: 10px; font-weight: 700;
  letter-spacing: 0.5px; text-transform: uppercase; z-index: 2;
  background: var(--acid); color: var(--bg);
}
.badge-hot { background: #FF3366; color: #fff; }
.badge-preventa { background: var(--acid); color: var(--bg); }
.badge-nuevo { background: rgba(229,255,0,0.15); color: var(--acid); border: 1px solid var(--acid); }
.ev-card-body { padding: 20px; }
.ev-card-date { font-size: 14px; font-weight: 600; color: var(--acid); margin-bottom: 6px; }
.ev-card-name { font-size: 19px; font-weight: 700; margin-bottom: 4px; line-height: 1.2; letter-spacing: -0.3px; }
.ev-card-venue { font-size: 15px; color: var(--text-dim); margin-bottom: 16px; }
.ev-card-footer { display: flex; justify-content: space-between; align-items: center; }
.ev-card-price { font-size: 16px; font-weight: 700; color: var(--acid); }
.ev-card-verified {
  font-size: 10px; font-weight: 600; padding: 3px 8px;
  border: 1px solid var(--acid-dim); color: var(--acid); letter-spacing: 0.3px;
  display: inline-flex; align-items: center; gap: 4px;
}
.ev-card-verified .acid-smiley { width: 12px; height: 12px; }

/* ═══════════════════════════════════════════
   VIEW TOGGLE (grid / list)
   ═══════════════════════════════════════════ */
.view-toggle {
  display: flex; gap: 4px; align-items: center;
  background: var(--bg-raised);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 3px;
}
.view-toggle-btn {
  padding: 6px 12px;
  font-size: 11px; font-weight: 700;
  letter-spacing: 0.5px;
  background: none; color: var(--text-dim);
  border: none; cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s;
  display: flex; align-items: center; gap: 5px;
}
.view-toggle-btn.active {
  background: var(--acid); color: var(--bg);
}
.view-toggle-btn:hover:not(.active) {
  color: var(--text);
}
.view-toggle-btn svg { width: 14px; height: 14px; }

/* ── Date list view (RA-style) ── */
.events-datelist { display: none; margin-bottom: 64px; }
.events-datelist.active { display: block; }

.dl-date-group { margin-bottom: 8px; }
.dl-date-header {
  font-size: 13px; font-weight: 700;
  color: var(--text-dim);
  padding: 12px 0 8px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 0;
  display: flex; gap: 12px; align-items: baseline;
  text-transform: uppercase;
  letter-spacing: 1px;
}
.dl-date-day {
  font-size: 28px; font-weight: 800;
  color: var(--text);
  letter-spacing: -1px;
  line-height: 1;
  min-width: 40px;
}
.dl-date-meta {
  display: flex; flex-direction: column;
}
.dl-date-weekday { font-size: 13px; font-weight: 700; color: var(--acid); letter-spacing: 1px; }
.dl-date-monthyear { font-size: 11px; font-weight: 600; color: var(--text-dim); letter-spacing: 0.5px; }

.dl-event-row {
  display: flex; align-items: center; gap: 16px;
  padding: 14px 0;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  transition: background 0.15s;
}
.dl-event-row:hover {
  background: rgba(229,255,0,0.02);
}
.dl-event-img {
  width: 56px; height: 56px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
  background-size: cover;
  background-position: center;
  background-color: var(--bg-raised);
}
.dl-event-info { flex: 1; min-width: 0; }
.dl-event-name {
  font-size: 15px; font-weight: 700;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  margin-bottom: 2px;
}
.dl-event-sub {
  font-size: 12px; color: var(--text-dim);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.dl-event-right {
  display: flex; flex-direction: column; align-items: flex-end;
  flex-shrink: 0; gap: 4px;
}
.dl-event-time {
  font-size: 12px; font-weight: 600; color: var(--text-mid);
}
.dl-event-price {
  font-size: 13px; font-weight: 700; color: var(--acid);
}
.dl-event-sold {
  font-size: 10px; font-weight: 700; color: #ff4444;
  letter-spacing: 1px; text-transform: uppercase;
}

/* ═══════════════════════════════════════════
   ID BANNER
   ═══════════════════════════════════════════ */
.id-banner {
  background: var(--bg-raised);
  border-top: 1px solid var(--acid-dim);
  border-bottom: 1px solid var(--acid-dim);
  padding: 24px 48px;
  display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px;
  text-align: center;
  margin: 0 -48px 64px -48px;
}
.id-banner-icon {
  width: 48px; height: 48px;
  display: flex; align-items: center; justify-content: center;
  background: var(--acid-dim); border-radius: 50%; flex-shrink: 0;
  color: var(--acid);
}
.id-banner-icon .acid-smiley { width: 28px; height: 28px; }
.id-banner h4 { font-size: 16px; font-weight: 700; color: var(--acid); margin-bottom: 2px; }
.id-banner p { font-size: 15px; color: var(--text-mid); line-height: 1.5; }

/* ═══════════════════════════════════════════
   FOOTER (shared)
   ═══════════════════════════════════════════ */
/* Standards teaser pill */
.std-teaser {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px; padding: 13px 20px;
  background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 14px; cursor: pointer; transition: all 0.2s;
  max-width: 640px; margin: 0 auto 40px;
}
.std-teaser:hover { background: rgba(229,255,0,0.05); border-color: rgba(229,255,0,0.3); }
.std-teaser-left { display: flex; align-items: center; gap: 12px; }
.std-teaser-icon {
  font-size: 22px; width: 40px; height: 40px; border-radius: 10px;
  background: rgba(229,255,0,0.1); display: flex; align-items: center;
  justify-content: center; flex-shrink: 0;
}
.std-teaser-text { font-size: 14px; font-weight: 600; color: var(--text-mid); line-height: 1.4; }
.std-teaser-text strong { color: #fff; display: block; font-size: 15px; }
.std-teaser-arrow { font-size: 16px; color: var(--acid); flex-shrink: 0; transition: transform 0.2s; }
.std-teaser:hover .std-teaser-arrow { transform: translateX(4px); }

/* Compromisos section */
.cf-compromisos {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;
  margin-top: 40px;
}
.cf-compromiso {
  padding: 24px 24px; background: var(--bg-raised);
  border: 1px solid rgba(255,255,255,0.08); border-radius: 18px;
  transition: border-color 0.2s;
  display: flex; flex-direction: column;
}
.cf-compromiso:hover { border-color: rgba(229,255,0,0.25); }
.cf-compromiso-num {
  font-size: 11px; font-weight: 800; letter-spacing: 2px;
  color: var(--acid); margin-bottom: 12px; opacity: 0.7;
}
.cf-compromiso h4 {
  font-size: 17px; font-weight: 800; margin-bottom: 8px; letter-spacing: -0.2px;
}
.cf-compromiso p { font-size: 14px; color: var(--text-mid); line-height: 1.6; }
.cf-compromiso p { flex: 1; }
.cf-compromiso-badge {
  display: inline-block; margin-top: 16px; padding: 3px 10px;
  background: rgba(229,255,0,0.1); border-radius: 20px;
  font-size: 11px; font-weight: 700; color: var(--acid); letter-spacing: 0.5px;
}
/* Cap highlight — the specific % number */
.cf-compromiso .cap { color: var(--acid); font-weight: 800; }

/* FAQ Accordion */
.faq-section { max-width: 800px; margin: 0 auto; padding: 60px 48px 20px; }
.faq-section-title { font-size: 11px; font-weight: 800; letter-spacing: 0.15em; text-transform: uppercase; color: var(--acid); margin-bottom: 8px; }
.faq-section-heading { font-size: 28px; font-weight: 800; color: var(--text); margin-bottom: 32px; line-height: 1.2; }
.faq-item { border-bottom: 1px solid rgba(255,255,255,0.08); }
.faq-question { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; cursor: pointer; gap: 16px; }
.faq-question:hover { opacity: 0.85; }
.faq-q-text { font-size: 16px; font-weight: 600; color: var(--text); line-height: 1.4; }
.faq-toggle { width: 28px; height: 28px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.15); display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: transform 0.2s, background 0.2s; color: var(--text-mid); font-size: 18px; }
.faq-item.open .faq-toggle { transform: rotate(45deg); background: var(--acid); color: #000; border-color: var(--acid); }
.faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease, padding 0.3s ease; }
.faq-item.open .faq-answer { max-height: 400px; }
.faq-a-text { padding: 0 0 20px; font-size: 14px; color: var(--text-mid); line-height: 1.7; }
@media (max-width: 768px) {
  .faq-section { padding: 40px 24px 10px; }
  .faq-section-heading { font-size: 22px; }
  .faq-q-text { font-size: 15px; }
}

/* Email capture */
.email-capture {
  max-width: 800px; margin: 0 auto; padding: 80px 48px;
  text-align: center;
}
.email-capture h3 {
  font-size: clamp(32px, 5vw, 48px); font-weight: 800; letter-spacing: -1px;
  margin-bottom: 16px; line-height: 1.1;
}
.email-capture p {
  font-size: 18px; color: var(--text-mid); line-height: 1.7;
  margin-bottom: 36px; max-width: none;
}
.email-capture-form {
  display: flex; gap: 12px; max-width: 520px; margin: 0 auto;
  justify-content: center;
}
.email-capture-input {
  flex: 1; padding: 18px 22px;
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 14px; color: #fff; font-size: 16px; font-family: inherit;
  outline: none; transition: border-color 0.2s;
}
.email-capture-input:focus { border-color: var(--acid); }
.email-capture-input::placeholder { color: rgba(255,255,255,0.35); }
.email-capture-btn {
  padding: 18px 36px; background: var(--acid); color: #000;
  font-weight: 700; font-size: 16px; border: none; border-radius: 14px;
  cursor: pointer; font-family: inherit; white-space: nowrap;
  transition: opacity 0.2s;
}
.email-capture-btn:hover { opacity: 0.85; }
.email-capture-legal {
  font-size: 13px; color: var(--text-dim); margin-top: 20px; line-height: 1.5;
  text-align: center;
}
.email-capture-ok {
  display: none; padding: 20px; margin-top: 20px;
  background: rgba(229,255,0,0.06); border: 1px solid rgba(229,255,0,0.15);
  border-radius: 14px; font-size: 16px; font-weight: 600; color: var(--acid);
  text-align: center; max-width: 520px; margin-left: auto; margin-right: auto;
}

/* ═══════════════════════════════════════════
   PROMOTORES — Phase tags, dashboard, resale flow
   ═══════════════════════════════════════════ */
.pp-phase-tag {
  display: inline-block; padding: 4px 14px;
  background: rgba(229,255,0,0.1); border: 1px solid rgba(229,255,0,0.2);
  border-radius: 20px; font-size: 11px; font-weight: 700;
  color: var(--acid); letter-spacing: 1.5px; text-transform: uppercase;
  margin-bottom: 24px;
}

/* Fans & Promotores — slide layout like deck */
#v-fans.active,
#v-promotores.active {
  position: fixed;
  top: 56px; left: 0; right: 0; bottom: 0;
  overflow-y: auto;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  z-index: 5;
  background: var(--bg);
}
#v-fans .cf-hero,
#v-fans .cf-section,
#v-promotores .cf-hero,
#v-promotores .cf-section {
  scroll-snap-align: start;
  min-height: calc(100vh - 56px);
  display: flex; flex-direction: column; justify-content: center;
}
#v-fans .cf-hero,
#v-promotores .cf-hero {
  max-width: none;
}
#v-fans .cf-section,
#v-promotores .cf-section {
  max-width: none;
  border-top: 1px solid var(--border);
  padding: 80px 48px;
  text-align: center;
}
#v-fans .cf-section > *,
#v-promotores .cf-section > * {
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
}
#v-promotores .cf-section > .pp-mechanics-grid,
#v-promotores .cf-section > .pp-dashboard-mock,
#v-promotores .cf-section > .pp-revenue-box,
#v-promotores .cf-section > .cf-features {
  max-width: 1100px;
}
#v-fans .email-capture,
#v-promotores .email-capture {
  scroll-snap-align: start;
  min-height: calc(100vh - 56px);
  display: flex; flex-direction: column; justify-content: center;
  align-items: center;
  text-align: center;
  max-width: none;
  border-top: 1px solid var(--border);
  padding: 80px 48px;
  background: radial-gradient(ellipse at 50% 40%, rgba(229,255,0,0.04) 0%, transparent 70%);
}
#v-fans .faq-section,
#v-promotores .faq-section {
  scroll-snap-align: start;
  min-height: calc(100vh - 56px);
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  max-width: none;
  border-top: 1px solid var(--border);
  padding: 80px 48px;
  text-align: left;
}
#v-fans .faq-section > *,
#v-promotores .faq-section > * {
  max-width: 800px;
  width: 100%;
}
#v-fans .marquee,
#v-promotores .marquee {
  scroll-snap-align: none;
  min-height: auto;
  position: sticky;
  top: 0;
  z-index: 10;
}
#v-fans .site-footer,
#v-promotores .site-footer {
  scroll-snap-align: none;
  min-height: auto;
}

/* Mechanics grid (3x2) */
.pp-mechanics-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;
  margin-top: 48px; max-width: 1100px; margin-left: auto; margin-right: auto;
  text-align: left;
}
.pp-mech-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 36px 28px;
  transition: border-color 0.2s;
}
.pp-mech-card:hover { border-color: rgba(229,255,0,0.3); }
.pp-mech-tag {
  display: inline-block; border: 1px solid var(--acid); color: var(--acid);
  padding: 4px 12px; font-size: 11px; font-weight: 700;
  letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 16px;
  border-radius: 4px;
}
.pp-mech-card h3 {
  font-size: 20px; font-weight: 800; margin-bottom: 10px;
  letter-spacing: -0.3px;
}
.pp-mech-card p {
  font-size: 15px; color: var(--text-mid); line-height: 1.6;
}
@media (max-width: 900px) {
  .pp-mechanics-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 560px) {
  .pp-mechanics-grid { grid-template-columns: 1fr; }
}

/* Dashboard mock */
.pp-dashboard-mock {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 40px;
  margin: 40px auto; max-width: 1100px; text-align: center;
}
.pp-dash-row {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
  margin-bottom: 20px;
}
.pp-dash-row:last-child { margin-bottom: 0; }
.pp-dash-stat {
  background: rgba(255,255,255,0.03); border: 1px solid var(--border);
  border-radius: 12px; padding: 28px 20px; text-align: center;
}
.pp-dash-num {
  font-size: 32px; font-weight: 800; color: var(--acid);
  letter-spacing: -1px; margin-bottom: 4px;
}
.pp-dash-label {
  font-size: 11px; color: var(--text-dim); text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Resale flow diagram */
.pp-resale-flow {
  display: flex; align-items: center; justify-content: center;
  gap: 8px; flex-wrap: wrap;
  padding: 40px 24px; margin: 40px auto; max-width: 800px;
}
.pp-flow-step {
  display: flex; flex-direction: column; align-items: center;
  gap: 8px; min-width: 100px;
}
.pp-flow-icon {
  width: 56px; height: 56px; border-radius: 50%;
  background: var(--bg-raised); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 24px;
}
.pp-flow-text {
  font-size: 12px; color: var(--text-mid); text-align: center;
  max-width: 100px;
}
.pp-flow-arrow {
  font-size: 24px; color: var(--acid); font-weight: 700;
}
.pp-flow-highlight {
  color: var(--acid); font-weight: 700;
}

/* Revenue share box */
.pp-revenue-box {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 32px;
  margin: 40px auto; max-width: 600px; text-align: left;
}
.pp-rev-bars { display: flex; flex-direction: column; gap: 16px; }
.pp-rev-item { display: flex; align-items: center; gap: 16px; }
.pp-rev-label {
  font-size: 13px; color: var(--text-mid); min-width: 140px; text-align: right;
}
.pp-rev-bar {
  flex: 1; height: 32px; background: rgba(255,255,255,0.04);
  border-radius: 8px; position: relative;
  display: flex; align-items: center;
}
.pp-rev-fill {
  height: 100%; border-radius: 8px;
}
.pp-rev-bar span {
  margin-left: 12px; font-size: 13px; font-weight: 700; color: var(--text-mid);
}

/* Responsive: dashboard + resale */
@media (max-width: 768px) {
  .pp-dash-row { grid-template-columns: repeat(2, 1fr); }
  .pp-resale-flow { flex-direction: column; }
  .pp-flow-arrow { transform: rotate(90deg); }
  .pp-rev-item { flex-direction: column; align-items: stretch; gap: 4px; }
  .pp-rev-label { text-align: left; min-width: unset; }
}

.site-footer {
  border-top: 1px solid var(--border);
  padding: 48px 48px;
  max-width: 1600px;
  margin: 0 auto;
  display: flex; justify-content: space-between; align-items: center;
}
.site-footer-logo { font-size: 18px; font-weight: 800; color: var(--acid); letter-spacing: -1px; }
.site-footer-copy { font-size: 12px; color: var(--text-dim); }

/* ═══════════════════════════════════════════
   VIEW 2: CÓMO FUNCIONA
   ═══════════════════════════════════════════ */

/* Hero */
.cf-hero {
  min-height: 85vh;
  display: flex; align-items: center;
  padding: 100px 48px;
  position: relative; overflow: hidden;
}
.cf-glow {
  position: absolute;
  border-radius: 50%;
  filter: blur(60px);
  pointer-events: none;
}
.cf-glow-1 {
  top: 10%; right: 5%;
  width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(229,255,0,0.12) 0%, transparent 70%);
}
.cf-glow-2 {
  bottom: 20%; left: 10%;
  width: 300px; height: 300px;
  background: radial-gradient(circle, rgba(229,255,0,0.06) 0%, transparent 70%);
}
.cf-hero-inner {
  max-width: 1200px; margin: 0 auto; width: 100%;
  display: grid; grid-template-columns: 1.2fr 1fr;
  gap: 64px; align-items: center;
}
.cf-hero-badge {
  display: inline-block;
  background: var(--acid-dim); border: 1px solid var(--acid);
  padding: 8px 16px; margin-bottom: 24px;
  font-size: 12px; font-weight: 700; letter-spacing: 2px; color: var(--acid);
}
.cf-hero h1 {
  font-size: clamp(56px, 8vw, 100px);
  font-weight: 800; line-height: 0.85;
  text-transform: uppercase; letter-spacing: 2px; margin-bottom: 24px;
}
.cf-hero h1 .outline {
  display: block; color: transparent;
  -webkit-text-stroke: 1.5px #fff;
  letter-spacing: 6px;
}
.cf-hero h1 .acid-text {
  display: block; color: var(--acid);
  letter-spacing: 3px; position: relative;
}
.cf-hero h1 .white-text { display: block; letter-spacing: 6px; }
/* RGB Glitch layers for CF */
.cf-glitch-layer {
  position: absolute; top: 0; left: 0;
  pointer-events: none; opacity: 0;
}
.cf-glitch-pink { color: rgba(255,0,255,0.6); clip-path: inset(0 0 100% 0); }
.cf-glitch-cyan { color: rgba(0,255,255,0.6); clip-path: inset(0 0 100% 0); }
.cf-glitch-on .cf-glitch-pink { opacity: 1; clip-path: inset(10% 0 60% 0); transform: translateX(-8px); }
.cf-glitch-on .cf-glitch-cyan { opacity: 1; clip-path: inset(50% 0 20% 0); transform: translateX(8px); }

.cf-hero-text {
  font-size: 18px; color: rgba(255,255,255,0.6);
  max-width: 420px; margin-bottom: 40px; line-height: 1.6;
}
.cf-hero-text strong { color: var(--acid); font-weight: 600; }
.cf-btns { display: flex; gap: 16px; }
.btn-acid {
  background: var(--acid); color: var(--bg); border: none;
  padding: 18px 36px; font-size: 15px; font-weight: 700;
  letter-spacing: 0.5px; transition: all 0.15s;
}
.btn-acid:hover { background: #fff; box-shadow: 0 0 30px var(--acid-glow); }
.btn-border {
  background: transparent; color: #fff;
  border: 2px solid rgba(255,255,255,0.2);
  padding: 16px 36px; font-size: 15px; font-weight: 600;
  transition: all 0.15s;
}
.btn-border:hover { border-color: var(--acid); color: var(--acid); }

/* Fake vs Real Tickets */
.cf-tickets { position: relative; perspective: 1000px; max-width: 480px; }
.cf-ticket {
  padding: 24px; position: relative; overflow: hidden;
  transition: transform 0.1s ease-out;
  transform-style: preserve-3d; border-radius: 16px;
}
.cf-ticket-fake {
  background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
  border: 1px solid rgba(255,77,77,0.3);
  transform: rotate(-3deg); margin-bottom: -60px;
  z-index: 1; position: relative;
}
.cf-ticket-real {
  background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
  border: 2px solid var(--acid);
  transform: rotate(2deg); z-index: 2; position: relative;
  box-shadow: 0 0 40px rgba(229,255,0,0.2), inset 0 0 60px rgba(229,255,0,0.03);
}
/* glitch lines on fake ticket */
.gline {
  position: absolute; left: 0; right: 0;
  pointer-events: none; opacity: 0;
}
.gline-1 { top: 20%; height: 4px; background: linear-gradient(90deg, transparent, var(--pink) 20%, var(--pink) 80%, transparent); }
.gline-2 { top: 45%; height: 6px; background: linear-gradient(90deg, transparent, var(--cyan) 30%, var(--cyan) 70%, transparent); }
.gline-3 { top: 70%; height: 3px; background: var(--pink); }
.cf-glitch-on .gline-1 { opacity: 1; transform: translateX(-15%); }
.cf-glitch-on .gline-2 { opacity: 0.9; transform: translateX(10%); }
.cf-glitch-on .gline-3 { opacity: 0.7; transform: translateX(-8%); }
@keyframes ticketGlitch {
  0%   { transform: rotate(-3deg) translate(0) skew(0); }
  20%  { transform: rotate(-3deg) translate(-4px, 2px) skew(0.4deg); }
  40%  { transform: rotate(-3deg) translate(3px, -1px) skew(-0.3deg); }
  60%  { transform: rotate(-3deg) translate(-2px, 1px) skew(0.2deg); }
  80%  { transform: rotate(-3deg) translate(4px, -2px) skew(0.3deg); }
  100% { transform: rotate(-3deg) translate(0) skew(0); }
}
.cf-glitch-on .cf-ticket-fake {
  animation: ticketGlitch 0.2s ease;
  box-shadow: 0 0 30px rgba(255,0,255,0.3), 0 0 60px rgba(0,255,255,0.2);
}
.cf-ticket-badge {
  position: absolute; top: 16px; right: 16px;
  padding: 6px 16px; font-size: 12px; font-weight: 900; letter-spacing: 1px;
}
.badge-fake { background: var(--red); color: #fff; transform: rotate(3deg); box-shadow: 0 0 20px rgba(255,77,77,0.5); }
.badge-verified { background: var(--acid); color: var(--bg); display: flex; align-items: center; gap: 6px; }
.cf-ticket-event { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
.cf-ticket-fake .cf-ticket-event { color: rgba(255,255,255,0.5); text-decoration: line-through; }
.cf-ticket-venue-sm { font-size: 14px; color: rgba(255,255,255,0.3); margin-bottom: 16px; }
.cf-ticket-real .cf-ticket-venue-sm { color: rgba(255,255,255,0.6); }
.cf-ticket-row { display: flex; justify-content: space-between; align-items: flex-end; }
.cf-ticket-price-label { font-size: 12px; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px; }
.cf-ticket-fake .cf-ticket-price-label { color: rgba(255,255,255,0.3); }
.cf-ticket-real .cf-ticket-price-label { color: var(--acid); }
.cf-ticket-price { font-size: 36px; font-weight: 700; line-height: 1; }
.cf-ticket-fake .cf-ticket-price { color: var(--red); }
.cf-ticket-real .cf-ticket-price { color: var(--green); }
.cf-ticket-qr {
  margin-top: 20px; padding: 12px; border-radius: 8px;
  display: flex; align-items: center; gap: 12px;
  font-size: 12px; font-weight: 700;
}
.cf-ticket-fake .cf-ticket-qr { background: rgba(255,77,77,0.1); color: var(--red); }
.cf-ticket-real .cf-ticket-qr { background: var(--acid-dim); color: var(--green); }
.cf-qr-mini { width: 40px; height: 40px; border-radius: 4px; flex-shrink: 0; }
.cf-ticket-fake .cf-qr-mini {
  background: linear-gradient(45deg, #333 25%, #444 25%, #444 50%, #333 50%, #333 75%, #444 75%);
  background-size: 8px 8px; opacity: 0.5;
}
.cf-ticket-real .cf-qr-mini {
  background: #fff;
  display: flex; align-items: center; justify-content: center;
}
.cf-qr-inner {
  width: 30px; height: 30px;
  background: linear-gradient(45deg, #000 25%, #fff 25%, #fff 50%, #000 50%, #000 75%, #fff 75%);
  background-size: 6px 6px;
}

/* Stats */
.cf-stats {
  max-width: 1600px; margin: 0 auto; padding: 64px 48px;
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 48px; text-align: center;
}
.cf-stat-num { font-size: 48px; font-weight: 700; margin-bottom: 8px; line-height: 1; }
.cf-stat-num .acid-smiley { width: 48px; height: 48px; }
.cf-stat-label { font-size: 11px; color: rgba(255,255,255,0.4); letter-spacing: 1px; text-transform: uppercase; }

/* How It Works Sections */
.cf-section {
  max-width: 1600px; margin: 0 auto; padding: 100px 48px;
}
.cf-section-label {
  font-size: 11px; font-weight: 700;
  letter-spacing: 4px; text-transform: uppercase;
  color: var(--acid); margin-bottom: 16px; opacity: 0.8;
  text-align: center;
}
.cf-section-title {
  font-size: clamp(32px, 5vw, 56px); font-weight: 700;
  line-height: 1.05; letter-spacing: -1px; margin-bottom: 20px;
  text-align: center;
}
.cf-section-text {
  font-size: 18px; color: var(--text-mid); line-height: 1.7; max-width: 600px;
  margin-left: auto; margin-right: auto; text-align: center;
}

/* Steps */
.cf-steps { margin-top: 48px; text-align: left; }
.cf-step {
  display: grid; grid-template-columns: 80px 1fr;
  gap: 32px; padding: 44px 0;
  border-bottom: 1px solid var(--border); align-items: start;
}
.cf-step:hover { border-bottom-color: var(--acid); }
.cf-step-num {
  font-size: 56px; font-weight: 700; color: var(--acid);
  line-height: 1; opacity: 0.2;
}
.cf-step:hover .cf-step-num { opacity: 1; text-shadow: 0 0 20px var(--acid-glow); }
.cf-step h3 { font-size: 24px; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.3px; }
.cf-step p { font-size: 18px; color: var(--text-mid); line-height: 1.7; }
.cf-step-tag {
  display: inline-block; border: 1px solid var(--acid); color: var(--acid);
  padding: 4px 14px; font-size: 10px; font-weight: 700;
  letter-spacing: 2px; text-transform: uppercase; margin-top: 12px;
}

/* Feature Cards */
.cf-features {
  display: grid; grid-template-columns: repeat(2, 1fr);
  gap: 1px; background: var(--acid); margin-top: 56px;
}
.cf-feature {
  background: var(--bg-raised); padding: 48px 40px;
  position: relative; overflow: hidden; transition: background 0.2s;
}
.cf-feature:hover { background: var(--bg-hover); }
.cf-feature::before {
  content: ''; position: absolute; top: 0; left: 0;
  width: 100%; height: 3px; background: var(--acid);
  transform: scaleX(0); transform-origin: left; transition: transform 0.4s;
}
.cf-feature:hover::before { transform: scaleX(1); }
.cf-feature-icon { font-size: 48px; line-height: 1; margin-bottom: 20px; filter: saturate(1.2); }
.cf-feature h3 { font-size: 18px; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.3px; }
.cf-feature p { font-size: 17px; color: var(--text-dim); line-height: 1.6; }

/* Comparison */
.cf-compare {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 1px; background: var(--border); margin-top: 56px;
}
.cf-compare-card { padding: 48px 40px; background: var(--bg-raised); }
.cf-compare-new { border-left: 3px solid var(--acid); }
.cf-compare-card h3 { font-size: 20px; font-weight: 700; margin-bottom: 24px; }
.cf-compare-old h3 { color: var(--red); }
.cf-compare-new h3 { color: var(--acid); }
.cf-compare-list { list-style: none; }
.cf-compare-list li {
  padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.03);
  font-size: 14px; color: var(--text-mid);
  display: flex; align-items: center; gap: 12px;
}
.cf-compare-list li::before { font-weight: 700; font-size: 14px; }
.cf-compare-old .cf-compare-list li::before { content: '//'; color: var(--red); }
.cf-compare-new .cf-compare-list li::before { content: '>>'; color: var(--acid); }

/* CTA */
.cf-cta {
  text-align: center; padding: 120px 48px;
  border-top: 2px solid var(--acid); position: relative;
}
.cf-cta::before {
  content: ''; position: absolute; top: -2px; left: 50%;
  transform: translateX(-50%); width: 400px; height: 400px;
  background: radial-gradient(circle, var(--acid-glow) 0%, transparent 70%);
  pointer-events: none; opacity: 0.25;
}
.cf-cta h2 {
  font-size: clamp(36px, 5vw, 56px); font-weight: 700;
  margin-bottom: 16px; letter-spacing: -1px;
}
.cf-cta h2 span { color: var(--acid); text-shadow: 0 0 30px var(--acid-glow); }
.cf-cta p { font-size: 18px; color: rgba(255,255,255,0.5); margin-bottom: 40px; line-height: 1.6; }

/* Email capture */
.cf-email-wrap { max-width: 520px; margin: 0 auto; }
.cf-email-bar {
  display: flex; align-items: center;
  background: rgba(255,255,255,0.06);
  border: 1.5px solid rgba(229,255,0,0.3);
  border-radius: 16px; overflow: hidden;
  transition: border-color 0.2s;
}
.cf-email-bar:focus-within { border-color: var(--acid); }
.cf-email-input {
  flex: 1; background: none; border: none; outline: none;
  padding: 18px 24px; font-size: 17px; color: #fff;
  font-family: 'Sora', sans-serif;
}
.cf-email-input::placeholder { color: rgba(255,255,255,0.3); }
.cf-email-btn {
  background: var(--acid); color: var(--bg);
  border: none; padding: 18px 28px;
  font-size: 15px; font-weight: 800;
  font-family: 'Sora', sans-serif;
  cursor: pointer; white-space: nowrap;
  transition: opacity 0.2s;
  letter-spacing: -0.3px;
}
.cf-email-btn:hover { opacity: 0.85; }
.cf-email-success {
  display: none;
  background: rgba(229,255,0,0.08);
  border: 1.5px solid rgba(229,255,0,0.3);
  border-radius: 16px; padding: 20px 28px;
  font-size: 17px; color: #fff; text-align: center;
}
.cf-email-note {
  margin-top: 14px; font-size: 13px;
  color: rgba(255,255,255,0.3); text-align: center;
}
@media (max-width: 480px) {
  .cf-email-bar { flex-direction: column; border-radius: 14px; }
  .cf-email-input { width: 100%; padding: 16px 20px; text-align: center; }
  .cf-email-btn { width: 100%; padding: 16px; border-radius: 0 0 12px 12px; }
}

/* ═══════════════════════════════════════════
   PROFILE VIEW
   ═══════════════════════════════════════════ */
.pf { max-width: 1600px; margin: 0 auto; padding: 80px 48px; }

.pf-header {
  display: flex; align-items: center; gap: 40px;
  padding-bottom: 48px; border-bottom: 1px solid var(--border);
  margin-bottom: 56px;
}
.pf-avatar {
  width: 100px; height: 100px;
  background: var(--acid); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 36px; font-weight: 800; color: var(--bg);
  flex-shrink: 0; position: relative;
}
.pf-verified-ring {
  position: absolute; inset: -4px;
  border: 3px solid var(--acid);
  border-radius: 50%;
  box-shadow: 0 0 20px var(--acid-glow);
}
.pf-info h1 { font-size: 32px; font-weight: 800; letter-spacing: -1px; margin-bottom: 4px; }
.pf-info h1 .pf-check {
  display: inline-flex; align-items: center; justify-content: center;
  width: 24px; height: 24px; background: var(--acid);
  border-radius: 50%; font-size: 13px; color: var(--bg);
  margin-left: 8px; vertical-align: middle;
}
.pf-meta { font-size: 15px; color: var(--text-dim); margin-bottom: 8px; }
.pf-meta span { color: var(--acid); font-weight: 600; }
.pf-stats-row { display: flex; gap: 32px; }
.pf-stat { font-size: 15px; color: var(--text-mid); }
.pf-stat strong { color: var(--acid); font-weight: 700; font-size: 18px; margin-right: 4px; }

.pf-edit-btn {
  margin-left: auto;
  background: transparent; border: 1px solid var(--border);
  color: var(--text-mid); padding: 10px 24px;
  font-size: 13px; font-weight: 600; transition: all 0.15s;
}
.pf-edit-btn:hover { border-color: var(--acid); color: var(--acid); }

/* Sections */
.pf-section { margin-bottom: 64px; }
.pf-section-head {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 20px;
}
.pf-section-title {
  font-size: 20px; font-weight: 700; letter-spacing: -0.3px;
}
.pf-section-more {
  font-size: 13px; font-weight: 500; color: var(--acid); cursor: pointer;
}

/* Badges */
.pf-badges {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}
.pf-badge {
  background: var(--bg-raised); border: 1px solid var(--border);
  padding: 24px 20px; text-align: center;
  transition: all 0.2s; cursor: default;
}
.pf-badge:hover {
  border-color: var(--acid);
  box-shadow: 0 0 20px rgba(229,255,0,0.06);
  transform: translateY(-2px);
}
.pf-badge-icon {
  font-size: 44px; line-height: 1; margin: 0 auto 12px;
  text-align: center; filter: saturate(1.2);
}
.pf-badge-name {
  font-size: 13px; font-weight: 700; margin-bottom: 4px;
  letter-spacing: -0.2px;
}
.pf-badge-desc {
  font-size: 11px; color: var(--text-dim); line-height: 1.4;
}
.pf-badge.locked { opacity: 0.35; }
.pf-badge.locked .pf-badge-icon { filter: grayscale(1); opacity: 0.4; }

/* Memberships */
.pf-memberships { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.pf-membership {
  background: var(--bg-raised); border: 1px solid var(--border);
  padding: 24px; position: relative; overflow: hidden;
  transition: all 0.2s;
}
.pf-membership:hover { border-color: rgba(229,255,0,0.3); }
.pf-membership::before {
  content: ''; position: absolute; top: 0; left: 0;
  width: 100%; height: 3px; background: var(--acid);
}
.pf-membership-badge {
  display: inline-flex; padding: 3px 10px;
  font-size: 10px; font-weight: 700; letter-spacing: 0.5px;
  text-transform: uppercase; margin-bottom: 12px;
  background: var(--acid); color: var(--bg);
}
.pf-membership h3 { font-size: 18px; font-weight: 700; margin-bottom: 6px; letter-spacing: -0.3px; }
.pf-membership p { font-size: 15px; color: var(--text-dim); line-height: 1.5; margin-bottom: 12px; }
.pf-membership-perks { list-style: none; }
.pf-membership-perks li {
  font-size: 12px; color: var(--text-mid); padding: 4px 0;
  display: flex; align-items: center; gap: 8px;
}
.pf-membership-perks li::before { content: '>>'; color: var(--acid); font-weight: 700; font-size: 10px; }

/* Ticket History */
.pf-tickets { display: flex; flex-direction: column; gap: 1px; }
.pf-ticket-row {
  background: var(--bg-raised); border: 1px solid var(--border);
  display: grid; grid-template-columns: 70px 1fr auto;
  gap: 20px; padding: 16px 20px; align-items: center;
  transition: all 0.2s;
}
.pf-ticket-row:hover { border-color: rgba(229,255,0,0.2); background: var(--bg-hover); }
.pf-ticket-img {
  width: 70px; height: 70px;
  background-size: cover; background-position: center;
  border-radius: 8px; flex-shrink: 0;
}
.pf-ticket-info { min-width: 0; }
.pf-ticket-name { font-size: 17px; font-weight: 700; margin-bottom: 3px; letter-spacing: -0.2px; }
.pf-ticket-meta { font-size: 12px; color: var(--text-dim); margin-bottom: 6px; }
.pf-ticket-status {
  display: inline-flex; padding: 3px 10px;
  font-size: 10px; font-weight: 700; letter-spacing: 0.5px;
}
.pf-ticket-status.upcoming { background: var(--acid-dim); color: var(--acid); border: 1px solid var(--acid); }
.pf-ticket-status.attended { background: rgba(0,255,133,0.1); color: var(--green); border: 1px solid rgba(0,255,133,0.3); }
.pf-ticket-status.resold { background: rgba(255,255,255,0.05); color: var(--text-dim); border: 1px solid var(--border); }
.pf-ticket-right { text-align: right; }
.pf-ticket-price { font-size: 18px; font-weight: 700; color: var(--acid); }
.pf-ticket-tier { font-size: 11px; color: var(--text-dim); margin-top: 2px; }

/* ═══════════════════════════════════════════
   EVENT DEMO PAGE
   ═══════════════════════════════════════════ */
.ev-page { max-width: 1600px; margin: 0 auto; }

/* Event Hero */
.ev-hero {
  position: relative; min-height: 520px; display: flex; align-items: flex-end;
  overflow: hidden;
}
.ev-hero-img {
  position: absolute; inset: 0;
  background-size: cover; background-position: center;
  overflow: hidden;
}
.ev-hero-img::after {
  content: ''; position: absolute; inset: 0; z-index: 1;
  background: linear-gradient(180deg, rgba(10,10,10,0) 0%, rgba(10,10,10,0.7) 50%, rgba(10,10,10,1) 100%);
}
.ev-hero-content {
  position: relative; z-index: 2;
  padding: 80px 48px 48px; width: 100%;
}
.ev-hero-back {
  display: inline-flex; align-items: center; gap: 8px;
  font-size: 13px; color: var(--text-mid); cursor: pointer;
  margin-bottom: 24px; transition: color 0.2s;
}
.ev-hero-back:hover { color: var(--acid); }
.ev-hero-back svg { width: 16px; height: 16px; }
.ev-hero-tags {
  display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap;
}
.ev-hero-tag {
  font-size: 11px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase;
  padding: 6px 14px; border: 1px solid var(--border); color: var(--text-mid);
}
.ev-hero-tag.tag-acid { background: var(--acid); color: var(--bg); border-color: var(--acid); }
.ev-hero-tag.tag-soldout { background: var(--red); color: #fff; border-color: var(--red); font-weight: 800; }
.ev-hero-title {
  font-size: clamp(36px, 5vw, 64px); font-weight: 800;
  letter-spacing: -2px; line-height: 1.05; margin-bottom: 16px;
}
.ev-hero-title span { color: var(--acid); }
.ev-hero-sub {
  font-size: 19px; color: var(--text-mid); max-width: 600px;
  line-height: 1.6; margin-bottom: 24px;
}
.ev-hero-info {
  display: flex; gap: 32px; flex-wrap: wrap; margin-bottom: 32px;
}
.ev-hero-info-item {
  display: flex; align-items: center; gap: 8px;
  font-size: 16px; color: var(--text);
}
.ev-hero-info-item svg { width: 18px; height: 18px; color: var(--acid); flex-shrink: 0; }
.ev-hero-cta {
  display: inline-flex; align-items: center; gap: 10px;
  background: var(--acid); color: var(--bg); border: none;
  padding: 16px 36px; font-size: 16px; font-weight: 700;
  letter-spacing: -0.3px; cursor: pointer; transition: all 0.2s;
}
.ev-hero-cta:hover { background: #fff; box-shadow: 0 0 30px var(--acid-glow); }

/* Ticket Section */
.ev-tickets-section {
  padding: 80px 48px 100px;
}
.ev-tickets-label {
  font-size: 11px; font-weight: 700; letter-spacing: 4px;
  text-transform: uppercase; color: var(--acid); margin-bottom: 12px; opacity: 0.8;
}
.ev-tickets-heading {
  font-size: clamp(28px, 4vw, 44px); font-weight: 700;
  letter-spacing: -1px; margin-bottom: 8px;
}
.ev-tickets-sub {
  font-size: 17px; color: var(--text-mid); margin-bottom: 48px;
}

/* Ticket Cards Grid */
.tk-grid {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

/* Individual Ticket Card */
.tk-card {
  position: relative; border-radius: 16px; overflow: hidden;
  cursor: pointer; transition: transform 0.35s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.35s;
  display: flex; flex-direction: column;
}
.tk-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}
.tk-card.tk-soldout { cursor: default; opacity: 0.6; }
.tk-card.tk-soldout:hover { transform: none; box-shadow: none; }

/* Card inner — the gradient face */
.tk-card-inner {
  position: relative; aspect-ratio: 3/4; padding: 28px;
  display: flex; flex-direction: column; justify-content: space-between;
  border-radius: 16px; overflow: hidden;
}

/* Gradient variants */
.tk-card-inner.tk-purple {
  background: linear-gradient(160deg, #7B68EE 0%, #9B8FFF 40%, #6B5CE7 100%);
  border: 2px solid rgba(155,143,255,0.4);
}
.tk-card-inner.tk-orange {
  background: linear-gradient(160deg, #FF8C42 0%, #FFB347 40%, #FF6B1A 100%);
  border: 2px solid rgba(255,179,71,0.4);
}
.tk-card-inner.tk-acid {
  background: linear-gradient(160deg, #C8D900 0%, #E5FF00 40%, #A8B800 100%);
  border: 2px solid rgba(229,255,0,0.4);
}
.tk-card-inner.tk-dark {
  background: var(--bg-raised); border: 1px solid var(--border);
}
.tk-card.tk-soldout .tk-card-inner { filter: grayscale(0.3); }

/* Card content */
.tk-card-type {
  font-size: clamp(24px, 3vw, 36px); font-weight: 800;
  line-height: 1.05; letter-spacing: -1px; color: #fff;
}
.tk-card-inner.tk-dark .tk-card-type { color: var(--text-mid); }
.tk-card-phase {
  font-size: 16px; font-weight: 600; color: rgba(255,255,255,0.85);
  margin-top: 4px;
}
.tk-card-inner.tk-dark .tk-card-phase { color: var(--text-dim); }

.tk-card-logo {
  display: flex; justify-content: center; align-items: center;
  flex: 1; font-size: 52px; line-height: 1; filter: saturate(1.2);
}
.tk-card-inner.tk-dark .tk-card-logo { opacity: 0.35; }

.tk-card-bottom {
  display: flex; flex-direction: column; align-items: center;
  gap: 3px; text-align: center; line-height: 1.2;
}
.tk-bottom-price {
  font-size: 22px; font-weight: 900; color: #fff; letter-spacing: -0.5px;
}
.tk-bottom-fee {
  font-size: 11px; font-weight: 500; color: rgba(255,255,255,0.45);
  letter-spacing: 0.2px;
}
.tk-card-inner.tk-dark .tk-card-bottom { color: var(--text-dim); }

/* SOLD OUT label below soldout cards */
.tk-card-price {
  text-align: center; padding: 16px 0 0;
  font-size: 18px; font-weight: 700; color: var(--text);
}
.tk-card-price.tk-price-soldout {
  color: var(--text-dim); font-size: 13px; font-weight: 600;
  letter-spacing: 2px;
}

/* Hover tooltip */
.tk-card-tooltip {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8);
  background: #fff; color: var(--bg); padding: 10px 20px;
  font-size: 13px; font-weight: 700; border-radius: 8px;
  white-space: nowrap; opacity: 0; transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
  pointer-events: none; z-index: 10;
  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
}
.tk-card:hover .tk-card-tooltip {
  opacity: 1; transform: translate(-50%, -50%) scale(1);
}
.tk-card.tk-soldout .tk-card-tooltip {
  background: rgba(255,255,255,0.1); color: var(--text-dim);
  backdrop-filter: blur(10px);
}

/* Checkmark + features below cards — 2×2 grid */
.tk-features {
  display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
  margin-top: 48px; padding-top: 32px; border-top: 1px solid var(--border);
}
.tk-feature {
  display: flex; align-items: center; gap: 12px;
  font-size: 14px; font-weight: 600; color: var(--text-mid);
  background: var(--bg-raised); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 12px; padding: 14px 16px;
}
.tk-feature svg { width: 18px; height: 18px; color: var(--acid); flex-shrink: 0; }
.tk-feature-icon { flex-shrink: 0; font-size: 16px; line-height: 1; }

/* Event info section */
.ev-info-section {
  padding: 0 48px 80px;
  display: grid; grid-template-columns: 1fr 1fr; gap: 48px;
}
.ev-info-block h3 {
  font-size: 20px; font-weight: 700; margin-bottom: 16px;
  letter-spacing: -0.3px;
}
.ev-info-block p {
  font-size: 17px; color: var(--text-mid); line-height: 1.7;
}
.ev-lineup-list {
  display: flex; flex-direction: column; gap: 0;
  border: 1px solid rgba(255,255,255,0.15); border-radius: 14px; overflow: hidden;
}
.ev-lineup-item {
  display: flex; justify-content: space-between; align-items: center;
  padding: 14px 20px; background: var(--bg-raised);
  border-bottom: 1px solid rgba(255,255,255,0.1);
  font-size: 14px; font-weight: 600;
  border-left: 3px solid transparent;
  transition: background 0.15s;
}
.ev-lineup-item:last-child { border-bottom: none; }
.ev-lineup-item.headliner { border-left-color: var(--acid); background: rgba(229,255,0,0.04); }
.ev-lineup-item:hover { background: rgba(255,255,255,0.06); }
.ev-lineup-time { color: var(--acid); font-size: 13px; }

/* Event Landing — Actions */
.ev-hero-actions { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.ev-btn-secondary {
  display: flex; align-items: center; gap: 8px;
  background: rgba(229,255,0,0.08); border: 1.5px solid rgba(229,255,0,0.25);
  color: #fff; border-radius: 14px; padding: 13px 20px;
  font-size: 14px; font-weight: 700; cursor: pointer; font-family: inherit;
  transition: background 0.2s;
}
.ev-btn-secondary:hover { background: rgba(229,255,0,0.15); }

/* Stats Bar */
.ev-stats-bar {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 1px; background: var(--border); border-bottom: 1px solid var(--border);
}
.ev-stat-item {
  background: var(--bg); padding: 24px 28px; text-align: center;
}
.ev-stat-num {
  font-size: 24px; font-weight: 800; color: var(--acid); letter-spacing: -0.5px;
  line-height: 1.2;
}
.ev-stat-label {
  font-size: 11px; font-weight: 600; letter-spacing: 1.5px;
  text-transform: uppercase; color: var(--text-dim); margin-top: 4px;
}

/* Section generic */
.ev-section {
  padding: 60px 48px; border-top: 1px solid var(--border);
}
.ev-section-label {
  font-size: 11px; font-weight: 700; letter-spacing: 4px;
  text-transform: uppercase; color: var(--acid); margin-bottom: 12px; opacity: 0.8;
}
.ev-section-title {
  font-size: clamp(24px, 3.5vw, 36px); font-weight: 700;
  letter-spacing: -0.5px; margin-bottom: 32px;
}

/* Lineup Grid (cards) */
.ev-lineup-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}
.ev-artist-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 14px; padding: 20px; transition: all 0.2s;
  position: relative; overflow: hidden;
}
.ev-artist-card:hover { background: var(--bg-hover); border-color: rgba(229,255,0,0.15); }
.ev-artist-card.ev-headliner {
  border-color: rgba(229,255,0,0.3); background: rgba(229,255,0,0.04);
}
.ev-artist-card.ev-headliner::before {
  content: 'HEADLINER'; position: absolute; top: 8px; right: 8px;
  font-size: 8px; font-weight: 800; letter-spacing: 2px; color: var(--acid);
  background: rgba(229,255,0,0.1); padding: 3px 8px; border-radius: 4px;
}
.ev-artist-name {
  font-size: 15px; font-weight: 700; color: var(--text); margin-bottom: 4px;
}
.ev-artist-role {
  font-size: 12px; color: var(--text-dim); font-weight: 500;
}

/* About section */
.ev-about-content {
  display: grid; grid-template-columns: 2fr 1fr; gap: 48px;
}
.ev-about-text {
  font-size: 17px; color: var(--text-mid); line-height: 1.7;
}
.ev-about-details {
  display: flex; flex-direction: column; gap: 12px;
}
.ev-detail-chip {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 16px; background: var(--bg-raised);
  border: 1px solid var(--border); border-radius: 12px;
}
.ev-detail-chip-icon { font-size: 18px; flex-shrink: 0; }
.ev-detail-chip-text {
  display: flex; flex-direction: column;
}
.ev-detail-chip-label {
  font-size: 10px; font-weight: 700; letter-spacing: 1.5px;
  text-transform: uppercase; color: var(--text-dim);
}
.ev-detail-chip-value {
  font-size: 14px; font-weight: 600; color: var(--text);
}

/* Marketplace CTA for sold-out */
.ev-mp-box {
  background: linear-gradient(135deg, rgba(229,255,0,0.06) 0%, rgba(229,255,0,0.02) 100%);
  border: 1px solid rgba(229,255,0,0.15); border-radius: 20px;
  padding: 48px; text-align: center; margin-top: 32px;
}
.ev-mp-icon { font-size: 48px; margin-bottom: 16px; }
.ev-mp-box h3 {
  font-size: 22px; font-weight: 700; margin-bottom: 12px; letter-spacing: -0.3px;
}
.ev-mp-box p {
  font-size: 15px; color: var(--text-mid); max-width: 500px;
  margin: 0 auto 24px; line-height: 1.6;
}

/* Venue section */
.ev-venue-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 32px; align-items: start;
}
.ev-venue-address {
  font-size: 16px; color: var(--text-mid); margin-bottom: 20px; line-height: 1.6;
}
.ev-venue-chips { display: flex; flex-wrap: wrap; gap: 8px; }
.ev-venue-chip {
  font-size: 12px; font-weight: 600; padding: 6px 14px;
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 8px; color: var(--text-mid);
}
.ev-venue-map {
  min-height: 200px; border-radius: 16px; overflow: hidden;
}

/* Tags cloud */
.ev-tags-cloud {
  display: flex; flex-wrap: wrap; gap: 10px;
}
.ev-tag-pill {
  font-size: 13px; font-weight: 600; padding: 8px 18px;
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 100px; color: var(--text-mid); transition: all 0.15s;
}
.ev-tag-pill:hover { border-color: rgba(229,255,0,0.3); color: var(--text); }

/* Mobile responsive for event landing */
@media (max-width: 768px) {
  .ev-section { padding: 40px 20px; }
  .ev-stats-bar { grid-template-columns: repeat(2, 1fr); }
  .ev-about-content { grid-template-columns: 1fr; }
  .ev-venue-grid { grid-template-columns: 1fr; }
  .ev-lineup-grid { grid-template-columns: repeat(2, 1fr); }
  .ev-hero-content { padding: 60px 20px 32px; }
  .ev-tickets-section { padding: 40px 20px 60px; }
  .ev-mp-box { padding: 32px 20px; }
}
@media (max-width: 480px) {
  .ev-lineup-grid { grid-template-columns: 1fr; }
  .ev-stats-bar { grid-template-columns: 1fr 1fr; }
}

/* ═══════════════════════════════════════════
   P2P MARKETPLACE
   ═══════════════════════════════════════════ */
.mp {
  max-width: 1600px;
  margin: 0 auto;
  padding: 80px 48px 100px;
}
.mp-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 48px;
}
.mp-intro { max-width: 600px; }
.mp-label {
  font-size: 11px; font-weight: 700;
  letter-spacing: 4px; text-transform: uppercase;
  color: var(--acid); margin-bottom: 16px; opacity: 0.8;
}
.mp-title {
  font-size: clamp(32px, 5vw, 48px); font-weight: 700;
  line-height: 1.05; letter-spacing: -1px; margin-bottom: 16px;
}
.mp-text {
  font-size: 16px; color: var(--text-mid); line-height: 1.7;
}
.mp-filters-row {
  display: flex; justify-content: space-between; align-items: center;
  flex-wrap: wrap; gap: 12px;
}
.mp-filters-left, .mp-filters-right {
  display: flex; gap: 10px; flex-wrap: wrap;
}
.mp-filter {
  background: transparent; border: 1px solid var(--border);
  color: var(--text-mid); padding: 10px 20px;
  font-size: 14px; font-weight: 600;
  transition: all 0.15s;
}
.mp-filter:hover { border-color: var(--text-mid); color: var(--text); }
.mp-filter.active { background: var(--acid); color: var(--bg); border-color: var(--acid); }
.mp-sort {
  background: transparent; border: 1px solid var(--border);
  color: var(--text-dim); padding: 10px 20px;
  font-size: 14px; font-weight: 600;
  transition: all 0.15s;
}
.mp-sort:hover { border-color: var(--text-mid); color: var(--text); }
.mp-sort.active { background: rgba(229,255,0,0.1); color: var(--acid); border-color: var(--acid); }
.mp-listing { transition: opacity 0.2s; }

/* Marketplace Search Bar */
.mp-search-bar {
  display: flex; align-items: stretch;
  background: var(--bg-raised); border: 1px solid rgba(255,255,255,0.1);
  height: 64px; overflow: visible; margin-bottom: 0;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
.mp-search-field {
  flex: 1; position: relative;
  display: flex; flex-direction: column; justify-content: center;
  padding: 0 24px; border-right: 1px solid var(--border);
  cursor: pointer; transition: background 0.15s;
}
.mp-search-field:hover { background: var(--bg-hover); }
.mp-search-field-main { flex: 2; }

/* Listings */
.mp-listings { display: flex; flex-direction: column; gap: 8px; margin-top: 28px; }
.mp-listing {
  background: var(--bg-raised);
  border: 1px solid var(--border);
  display: grid;
  grid-template-columns: 56px 90px 1fr auto;
  gap: 24px;
  padding: 24px 28px;
  align-items: center;
  transition: all 0.2s;
  cursor: pointer;
}
.mp-listing-date {
  text-align: center; line-height: 1.1;
}
.mp-listing-date-day {
  font-size: 28px; font-weight: 900; color: #fff; letter-spacing: -1px;
}
.mp-listing-date-month {
  font-size: 11px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 1px; color: var(--acid);
}
.mp-listing:hover {
  border-color: rgba(229,255,0,0.2);
  background: var(--bg-hover);
}
.mp-listing-img {
  width: 90px; height: 90px;
  background-size: cover; background-position: center;
  border-radius: 8px;
  flex-shrink: 0;
}
.mp-listing-info { min-width: 0; }
.mp-listing-event {
  font-size: 19px; font-weight: 700;
  margin-bottom: 6px; letter-spacing: -0.3px;
}
.mp-listing-meta {
  font-size: 15px; color: var(--text-dim);
  margin-bottom: 8px;
}
.mp-listing-seller {
  display: inline-flex; align-items: center; gap: 6px;
  font-size: 14px; color: var(--text-mid);
}
.mp-listing-seller .verified-dot {
  width: 14px; height: 14px;
  background: var(--acid); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 8px; color: var(--bg); font-weight: 900;
}
.mp-listing-reason {
  font-size: 14px; color: var(--text-dim);
  font-style: italic; margin-top: 6px;
  padding-left: 20px;
  border-left: 2px solid var(--border);
}
.mp-listing-right {
  text-align: right;
  display: flex; flex-direction: column;
  align-items: flex-end; gap: 8px;
  flex-shrink: 0;
}
.mp-listing-prices {
  display: flex; align-items: baseline; gap: 10px;
}
.mp-listing-original {
  font-size: 15px; color: var(--text-dim);
  text-decoration: line-through;
}
.mp-listing-price {
  font-size: 22px; font-weight: 700; color: var(--acid);
}
.mp-listing-price.below { color: var(--green); }
.mp-listing-price.above { color: var(--red); }
.mp-listing-btn {
  background: var(--acid); color: var(--bg); border: none;
  padding: 8px 20px; font-size: 12px; font-weight: 700;
  letter-spacing: 0.3px; transition: all 0.15s;
}
.mp-listing-btn:hover { background: #fff; }
.mp-listing-tag {
  font-size: 10px; font-weight: 600;
  padding: 2px 8px; letter-spacing: 0.5px;
  border: 1px solid; border-radius: 2px;
}
.mp-tag-below { color: var(--green); border-color: rgba(0,255,133,0.3); }
.mp-tag-face { color: var(--acid); border-color: var(--acid-dim); }
.mp-tag-above { color: var(--red); border-color: rgba(255,77,77,0.3); }

.mp-note {
  margin-top: 36px;
  padding: 20px 24px;
  background: var(--acid-dim);
  border-left: 3px solid var(--acid);
  font-size: 13px; color: var(--text-mid);
  line-height: 1.6;
}
.mp-note strong { color: var(--acid); }

/* ═══════════════════════════════════════════
   SCANNER — Verificación en Puerta
   ═══════════════════════════════════════════ */
.sc {
  max-width: 1600px; margin: 0 auto;
  padding: 80px 48px 100px;
}
.sc-header {
  text-align: center; margin-bottom: 64px;
}
.sc-badge {
  display: inline-flex; align-items: center; gap: 6px;
  background: var(--acid-dim); border: 1px solid var(--acid);
  padding: 6px 16px; font-size: 11px; font-weight: 700;
  letter-spacing: 2px; text-transform: uppercase; color: var(--acid);
  margin-bottom: 20px;
}
.sc-header h1 {
  font-size: 48px; font-weight: 800; letter-spacing: -2px;
  margin-bottom: 12px;
}
.sc-header h1 span { color: var(--acid); }
.sc-header p {
  font-size: 17px; color: var(--text-mid); max-width: 560px;
  margin: 0 auto; line-height: 1.6;
}

/* Scanner main area */
.sc-main {
  display: grid; grid-template-columns: 1fr 1fr; gap: 64px;
  align-items: start; margin-bottom: 80px;
}

/* Scanner device mockup */
.sc-device {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 20px; padding: 40px; text-align: center;
  position: relative; overflow: hidden;
}
.sc-device::before {
  content: ''; position: absolute; top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: conic-gradient(from 0deg, transparent 0%, var(--acid-dim) 25%, transparent 50%);
  animation: sc-sweep 4s linear infinite;
  opacity: 0.3;
}
@keyframes sc-sweep {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
.sc-device-inner {
  position: relative; z-index: 1;
}
.sc-viewfinder {
  width: 220px; height: 220px; margin: 0 auto 24px;
  border: 3px solid var(--acid); border-radius: 16px;
  position: relative; display: flex; align-items: center;
  justify-content: center;
  box-shadow: 0 0 40px rgba(229,255,0,0.15), inset 0 0 40px rgba(229,255,0,0.05);
}
.sc-viewfinder-corner {
  position: absolute; width: 24px; height: 24px;
  border-color: var(--acid); border-style: solid;
}
.sc-viewfinder-corner:nth-child(1) { top: -2px; left: -2px; border-width: 3px 0 0 3px; border-radius: 4px 0 0 0; }
.sc-viewfinder-corner:nth-child(2) { top: -2px; right: -2px; border-width: 3px 3px 0 0; border-radius: 0 4px 0 0; }
.sc-viewfinder-corner:nth-child(3) { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; border-radius: 0 0 0 4px; }
.sc-viewfinder-corner:nth-child(4) { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; border-radius: 0 0 4px 0; }
.sc-scan-line {
  position: absolute; left: 8px; right: 8px; height: 2px;
  background: var(--acid); box-shadow: 0 0 12px var(--acid);
  animation: sc-scan 2.5s ease-in-out infinite;
}
@keyframes sc-scan {
  0%, 100% { top: 10%; opacity: 0.6; }
  50% { top: 85%; opacity: 1; }
}
.sc-qr-placeholder {
  width: 120px; height: 120px; margin: 0 auto;
  background: linear-gradient(45deg, #222 25%, #333 25%, #333 50%, #222 50%, #222 75%, #333 75%);
  background-size: 12px 12px; border-radius: 8px; opacity: 0.4;
}
.sc-device-label {
  font-size: 13px; color: var(--text-dim); margin-top: 8px;
}
.sc-device-status {
  display: inline-flex; align-items: center; gap: 8px;
  margin-top: 20px; padding: 10px 20px;
  background: rgba(0,255,133,0.1); border: 1px solid rgba(0,255,133,0.3);
  border-radius: 8px; font-size: 13px; font-weight: 600; color: var(--green);
}
.sc-device-status .dot {
  width: 8px; height: 8px; background: var(--green);
  border-radius: 50%; animation: sc-pulse 1.5s ease-in-out infinite;
}
@keyframes sc-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}

/* Scanner steps */
.sc-flow {
  display: flex; flex-direction: column; gap: 28px;
}
.sc-step {
  display: grid; grid-template-columns: 48px 1fr; gap: 20px;
  align-items: start;
}
.sc-step-num {
  width: 48px; height: 48px; background: var(--bg-raised);
  border: 1px solid var(--border); border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; font-weight: 800; color: var(--acid);
}
.sc-step h3 {
  font-size: 17px; font-weight: 700; margin-bottom: 6px;
}
.sc-step p {
  font-size: 14px; color: var(--text-mid); line-height: 1.6;
}

/* Scanner result cards */
.sc-results {
  display: grid; grid-template-columns: 1fr 1fr; gap: 24px;
}
.sc-result {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 28px; position: relative; overflow: hidden;
}
.sc-result-ok { border-color: rgba(0,255,133,0.3); }
.sc-result-ok::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: var(--green);
}
.sc-result-fail { border-color: rgba(255,77,77,0.3); }
.sc-result-fail::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: var(--red);
}
.sc-result-icon {
  width: 48px; height: 48px; border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 16px; font-size: 24px;
}
.sc-result-ok .sc-result-icon { background: rgba(0,255,133,0.1); color: var(--green); }
.sc-result-fail .sc-result-icon { background: rgba(255,77,77,0.1); color: var(--red); }
.sc-result h3 { font-size: 17px; font-weight: 700; margin-bottom: 8px; }
.sc-result p { font-size: 14px; color: var(--text-mid); line-height: 1.5; }
.sc-result-detail {
  margin-top: 16px; padding-top: 16px;
  border-top: 1px solid var(--border);
  display: flex; flex-direction: column; gap: 8px;
}
.sc-result-row {
  display: flex; justify-content: space-between;
  font-size: 13px;
}
.sc-result-row span:first-child { color: var(--text-dim); }
.sc-result-row span:last-child { font-weight: 600; }
.sc-result-ok .sc-result-row span:last-child { color: var(--green); }
.sc-result-fail .sc-result-row span:last-child { color: var(--red); }

/* Stamps / Loyalty */
.sc-stamps {
  margin-top: 80px;
}
.sc-stamps-header {
  margin-bottom: 40px;
}
.sc-section-label {
  font-size: 11px; font-weight: 700; letter-spacing: 3px;
  text-transform: uppercase; color: var(--acid); margin-bottom: 12px;
}
.sc-stamps-header h2 {
  font-size: 36px; font-weight: 800; letter-spacing: -1.5px;
  margin-bottom: 12px;
}
.sc-stamps-header h2 span { color: var(--acid); }
.sc-stamps-header p {
  font-size: 15px; color: var(--text-mid); max-width: 640px; line-height: 1.6;
}
.sc-stamps-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;
}
.sc-stamp-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 32px; text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}
.sc-stamp-card:hover {
  transform: translateY(-4px); border-color: rgba(255,255,255,0.15);
}
.sc-stamp-icon {
  font-size: 40px; margin-bottom: 12px;
}
.sc-stamp-level {
  font-size: 14px; font-weight: 800; letter-spacing: 3px;
  text-transform: uppercase; color: var(--text); margin-bottom: 6px;
}
.sc-stamp-req {
  font-size: 13px; color: var(--text-dim); margin-bottom: 16px;
  padding-bottom: 16px; border-bottom: 1px solid var(--border);
}
.sc-stamp-card p {
  font-size: 14px; color: var(--text-mid); line-height: 1.5;
}

/* Scanner stats bar */
.sc-stats {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px;
  margin-top: 64px; padding: 40px;
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px;
}
.sc-stat { text-align: center; }
.sc-stat-num {
  font-size: 36px; font-weight: 800; color: var(--acid);
  margin-bottom: 4px;
}
.sc-stat-label {
  font-size: 12px; color: var(--text-dim); letter-spacing: 1px;
  text-transform: uppercase;
}

/* ═══════════════════════════════════════════
   DECK v2 — Investor Presentation (rebuilt)
   ═══════════════════════════════════════════ */
/* Deck scroll-snap container */
#v-deck.active {
  position: fixed;
  top: 56px; left: 0; right: 0; bottom: 0;
  overflow-y: auto;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  z-index: 5;
  background: var(--bg);
}
#v-deck .dk-slide,
#v-deck .dk-hero,
#v-deck .dk-mission,
#v-deck .dk-value-section,
#v-deck .dk-profile-section,
#v-deck .dk-cta {
  scroll-snap-align: start;
  min-height: calc(100vh - 56px);
}
#v-deck .dk-stats,
#v-deck .dk-slide-half {
  scroll-snap-align: start;
  min-height: calc(100vh - 56px);
}

/* Deck Toggle Bar */
.dk-toggle-bar {
  position: sticky; top: 0; z-index: 90;
  display: flex; justify-content: flex-end; gap: 12px;
  padding: 12px 48px; background: rgba(10,10,10,0.92);
  backdrop-filter: blur(12px); border-bottom: 1px solid var(--border);
}
.dk-toggle {
  display: flex; background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 20px; overflow: hidden;
}
.dk-toggle button {
  background: none; border: none; color: var(--text-dim);
  padding: 8px 18px; cursor: pointer; transition: all 0.25s;
  font-family: 'Sora', sans-serif; font-size: 11px; font-weight: 700;
  letter-spacing: 1px; text-transform: uppercase;
}
.dk-toggle button.active { background: var(--acid); color: #000; }

/* Tech/Simple toggle visibility */
.dk-tech { display: none; }
.dk-simple { display: block; }
.deck-tech-mode .dk-tech { display: block; }
.deck-tech-mode .dk-simple { display: none; }

/* Deck Marquee */
.dk-marquee {
  overflow: hidden; padding: 12px 0;
  border-top: 2px solid var(--acid); border-bottom: 2px solid var(--acid);
  background: linear-gradient(90deg, var(--acid) 0%, #00FF85 50%, var(--acid) 100%);
}
.dk-marquee-track {
  display: flex; animation: dk-scroll 20s linear infinite; white-space: nowrap;
}
@keyframes dk-scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
.dk-marquee span {
  font-size: 13px; font-weight: 900; color: #000;
  margin-right: 48px; text-transform: uppercase;
}

/* Deck Slide — base for all sections */
.dk-slide {
  min-height: 100vh; max-width: 1600px; margin: 0 auto;
  padding: 80px 48px;
  display: flex; flex-direction: column; justify-content: center;
  align-items: center; text-align: center;
  position: relative;
}
.dk-slide-half {
  min-height: 100vh; max-width: 1600px; margin: 0 auto;
  padding: 80px 48px;
  display: flex; flex-direction: column; justify-content: center;
  align-items: center; text-align: center;
}
.dk-slide-label {
  font-size: 17px; font-weight: 700; letter-spacing: 3px;
  text-transform: uppercase; color: var(--acid); margin-bottom: 20px;
}
.dk-slide h2 {
  font-size: clamp(36px, 4.5vw, 56px); font-weight: 900; letter-spacing: -2px;
  margin-bottom: 48px; line-height: 1.05;
}
.dk-slide h2 span { color: var(--acid); }
.dk-slide h2 em {
  font-style: italic; color: var(--acid);
  background: linear-gradient(90deg, var(--acid), #00FF85);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

/* Deck Hero */
.dk-hero {
  padding: 80px 48px;
  display: grid; grid-template-columns: 1fr 1fr; gap: 80px;
  align-items: center; position: relative;
  max-width: 1600px; margin: 0 auto;
  min-height: 100vh;
}
.dk-hero::before {
  content: ''; position: absolute; top: 10%; right: 5%;
  width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(229,255,0,0.08) 0%, transparent 70%);
  border-radius: 50%; filter: blur(80px); pointer-events: none;
}
.dk-hero-tag {
  display: inline-block; background: var(--acid-dim);
  border: 1px solid var(--acid); padding: 10px 20px;
  font-size: 15px; font-weight: 700; letter-spacing: 2px;
  color: var(--acid); margin-bottom: 28px; text-transform: uppercase;
}
.dk-hero h1 {
  font-size: 72px; font-weight: 900; line-height: 0.85;
  margin-bottom: 24px; text-transform: uppercase; letter-spacing: -2px;
}
.dk-hero h1 .outline {
  display: block; color: transparent;
  -webkit-text-stroke: 1px #fff; letter-spacing: 4px;
}
.dk-hero h1 .acid { display: block; color: var(--acid); position: relative; letter-spacing: 2px; }
.dk-hero h1 .white { display: block; color: #fff; letter-spacing: 4px; }
.dk-hero-desc {
  font-size: 22px; color: var(--text-mid); max-width: 500px;
  line-height: 1.6; margin-bottom: 40px;
}
.dk-hero-desc .acid-text { color: var(--acid); font-weight: 600; }
.dk-hero-btns { display: flex; gap: 16px; }
.dk-btn-primary {
  background: var(--acid); color: #000; border: none;
  padding: 18px 36px; font-weight: 800; font-size: 17px;
  cursor: pointer; transition: all 0.2s;
  font-family: 'Sora', sans-serif; text-transform: uppercase;
}
.dk-btn-primary:hover { background: #fff; box-shadow: 0 0 40px var(--acid-glow); }
.dk-btn-secondary {
  background: transparent; color: #fff; border: 2px solid rgba(255,255,255,0.2);
  padding: 18px 36px; font-weight: 700; font-size: 17px;
  cursor: pointer; transition: all 0.2s;
  font-family: 'Sora', sans-serif; text-transform: uppercase;
}
.dk-btn-secondary:hover { border-color: rgba(255,255,255,0.5); }

/* Deck Tickets */
.dk-tickets { position: relative; perspective: 800px; }
.dk-ticket {
  border-radius: 16px; padding: 24px; position: relative;
  transition: transform 0.3s;
}
.dk-ticket-fake {
  background: linear-gradient(135deg, #1a1a1a 0%, #111 100%);
  border: 2px solid rgba(var(--red-rgb, 255,59,48), 0.3);
  transform: rotate(-3deg); z-index: 1; margin-bottom: -50px;
}
.dk-ticket-real {
  background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
  border: 2px solid var(--acid);
  transform: rotate(2deg); z-index: 2;
  box-shadow: 0 10px 40px rgba(229,255,0,0.15);
}
.dk-ticket-label {
  position: absolute; top: 16px; right: 16px;
  padding: 6px 16px; font-size: 11px; font-weight: 900;
  letter-spacing: 1px; text-transform: uppercase;
}
.dk-ticket-fake .dk-ticket-label { background: var(--red); color: #fff; }
.dk-ticket-real .dk-ticket-label { background: var(--acid); color: #000; }
.dk-ticket-event { font-size: 18px; font-weight: 800; margin-bottom: 4px; }
.dk-ticket-fake .dk-ticket-event { color: rgba(255,255,255,0.4); text-decoration: line-through; }
.dk-ticket-venue { font-size: 15px; color: var(--text-dim); margin-bottom: 16px; }
.dk-ticket-price-row { display: flex; justify-content: space-between; align-items: flex-end; }
.dk-ticket-price-label {
  font-size: 11px; letter-spacing: 1px; margin-bottom: 4px;
  text-transform: uppercase; color: var(--text-dim);
}
.dk-ticket-real .dk-ticket-price-label { color: var(--acid); }
.dk-ticket-price { font-size: 32px; font-weight: 900; }
.dk-ticket-fake .dk-ticket-price { color: var(--red); }
.dk-ticket-real .dk-ticket-price { color: var(--green); }
.dk-ticket-qr {
  margin-top: 20px; padding: 12px; border-radius: 8px;
  display: flex; align-items: center; gap: 12px; font-size: 12px;
}
.dk-ticket-fake .dk-ticket-qr { background: rgba(255,59,48,0.1); color: var(--red); }
.dk-ticket-real .dk-ticket-qr { background: rgba(229,255,0,0.1); color: var(--green); }
.dk-ticket-qr-box {
  width: 36px; height: 36px; border-radius: 4px; flex-shrink: 0;
  background: repeating-linear-gradient(45deg, rgba(255,255,255,0.1) 0 2px, transparent 2px 6px);
}
.dk-ticket-real .dk-ticket-qr-box { background: #fff; }

/* Deck Mission */
.dk-mission {
  min-height: 100vh; display: flex; flex-direction: column;
  justify-content: center; align-items: center; text-align: center;
  padding: 80px 48px; max-width: 1600px; margin: 0 auto;
}
.dk-mission-line {
  font-size: clamp(32px, 5vw, 60px); font-weight: 800;
  line-height: 1.15; margin-bottom: 16px;
  color: var(--text-dim);
  opacity: 0.6; transition: opacity 0.3s;
}
.dk-mission-line.highlight {
  color: #fff; opacity: 1;
  font-style: italic;
}
.dk-mission-line .acid { color: var(--acid); }

/* Deck Stats */
.dk-stats {
  padding: 48px 0;
  border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
  background: rgba(255,255,255,0.015);
  min-height: 100vh; display: flex; align-items: center;
}
.dk-stats-inner {
  max-width: 1600px; margin: 0 auto; padding: 0 48px; width: 100%;
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px;
  text-align: center;
}
.dk-stat-num { font-size: 72px; font-weight: 900; margin-bottom: 10px; }
.dk-stat-num.red { color: var(--red); }
.dk-stat-num.green { color: var(--green); }
.dk-stat-num.acid { color: var(--acid); text-shadow: 0 0 20px rgba(229,255,0,0.4); }
.dk-stat-label {
  font-size: 16px; color: var(--text-dim); letter-spacing: 1px; text-transform: uppercase;
}

/* Deck Problem */
.dk-problems { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; width: 100%; }
.dk-problem {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 36px;
}
.dk-problem-icon { font-size: 36px; margin-bottom: 16px; }
.dk-problem h3 { font-size: 26px; font-weight: 700; margin-bottom: 10px; }
.dk-problem p { font-size: 19px; color: var(--text-mid); line-height: 1.6; }

/* Deck Pills */
.dk-pills { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 32px; justify-content: center; }
.dk-pill {
  background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.15);
  padding: 10px 24px; border-radius: 100px;
  font-size: 16px; font-weight: 700; color: #fff;
  letter-spacing: 0.5px;
}
.dk-pill.red { border-color: rgba(255,59,48,0.4); color: var(--red); background: rgba(255,59,48,0.08); }

/* Deck News Grid (problem evidence) */
.dk-news-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;
  margin-top: 40px; width: 100%;
}
.dk-news-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 12px; padding: 36px; position: relative;
  transition: transform 0.25s, box-shadow 0.25s;
}
.dk-news-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(0,0,0,0.4);
}
.dk-news-source {
  font-size: 15px; font-weight: 700; letter-spacing: 1px;
  text-transform: uppercase; color: var(--text-dim); margin-bottom: 14px;
}
.dk-news-card h4 {
  font-size: 24px; font-weight: 700; line-height: 1.35; color: #fff;
  margin-bottom: 14px;
}
.dk-news-card p {
  font-size: 18px; color: var(--text-mid); line-height: 1.5;
}
.dk-news-tag {
  display: inline-block; margin-top: 14px;
  font-size: 14px; font-weight: 700; padding: 6px 14px;
  border-radius: 100px; background: rgba(255,59,48,0.1);
  color: var(--red); letter-spacing: 0.5px;
}

/* Deck Value Sections (B2B / B2C) */
.dk-value-section {
  min-height: 100vh; padding: 80px 48px;
  display: flex; flex-direction: column; justify-content: center;
  align-items: center; text-align: center;
  position: relative;
}
.dk-value-section::before {
  content: ''; position: absolute; inset: 0;
  opacity: 0.08; pointer-events: none; border-radius: 0;
}
.dk-value-b2b::before { background: linear-gradient(135deg, #1e3c78 0%, transparent 60%); }
.dk-value-b2c::before { background: linear-gradient(135deg, #1e7838 0%, transparent 60%); }
.dk-value-inner {
  max-width: 1600px; margin: 0 auto; width: 100%;
  position: relative; z-index: 1;
  display: flex; flex-direction: column; align-items: center; text-align: center;
}
.dk-value-badge {
  display: inline-block; padding: 8px 20px; border-radius: 100px;
  font-size: 14px; font-weight: 800; letter-spacing: 2px;
  text-transform: uppercase; margin-bottom: 24px;
}
.dk-value-b2b .dk-value-badge { background: rgba(100,149,237,0.15); color: #6495ED; border: 1px solid rgba(100,149,237,0.3); }
.dk-value-b2c .dk-value-badge { background: rgba(0,200,83,0.15); color: #00C853; border: 1px solid rgba(0,200,83,0.3); }
.dk-value-section h2 {
  font-size: clamp(32px, 4vw, 52px); font-weight: 900; letter-spacing: -2px;
  margin-bottom: 48px; line-height: 1.05; max-width: 800px; margin-left: auto; margin-right: auto;
}
.dk-value-section h2 span { color: var(--acid); }
.dk-value-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; width: 100%;
}
.dk-value-card {
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 16px; padding: 36px;
  transition: transform 0.25s, background 0.25s;
}
.dk-value-card:hover {
  transform: translateY(-4px);
  background: rgba(255,255,255,0.07);
}
.dk-value-card h3 {
  font-size: 26px; font-weight: 800; margin-bottom: 12px; color: #fff;
}
.dk-value-card p {
  font-size: 19px; color: var(--text-mid); line-height: 1.6;
}
.dk-value-icon {
  font-size: 40px; line-height: 1; margin-bottom: 20px;
  filter: saturate(1.2);
}

/* Deck How Cards (gradient lift — same as before) */
.dk-how-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 100%; }
.dk-how-card {
  position: relative; border-radius: 16px; overflow: hidden; cursor: pointer;
  transition: transform 0.35s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.35s;
}
.dk-how-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}
.dk-how-inner {
  position: relative; aspect-ratio: 3/4; padding: 48px 40px;
  display: flex; flex-direction: column; justify-content: space-between;
  border-radius: 20px; overflow: hidden;
}
.dk-how-inner.dk-grad-1 {
  background: linear-gradient(160deg, #7B68EE 0%, #9B8FFF 40%, #6B5CE7 100%);
  border: 2px solid rgba(155,143,255,0.4);
}
.dk-how-inner.dk-grad-2 {
  background: linear-gradient(160deg, #FF8C42 0%, #FFB347 40%, #FF6B1A 100%);
  border: 2px solid rgba(255,179,71,0.4);
}
.dk-how-inner.dk-grad-3 {
  background: linear-gradient(160deg, #C8D900 0%, #E5FF00 40%, #A8B800 100%);
  border: 2px solid rgba(229,255,0,0.4);
}
.dk-how-num {
  font-size: 72px; font-weight: 900; color: rgba(255,255,255,0.5); line-height: 1;
}
.dk-how-logo { display: flex; justify-content: center; align-items: center; flex: 1; font-size: 160px; line-height: 1; filter: saturate(1.2); }
.dk-how-inner h3 {
  font-size: clamp(24px, 2.8vw, 32px); font-weight: 800; color: #fff;
  line-height: 1.1; letter-spacing: -0.5px;
}
.dk-how-desc {
  text-align: center; padding: 20px 8px 4px;
  font-size: 20px; color: var(--text-mid); line-height: 1.5;
}
.dk-how-tooltip {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8);
  background: #fff; color: var(--bg); padding: 12px 24px;
  font-size: 15px; font-weight: 700; border-radius: 8px;
  white-space: nowrap; opacity: 0; transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
  pointer-events: none; z-index: 10;
  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
}
.dk-how-card:hover .dk-how-tooltip {
  opacity: 1; transform: translate(-50%, -50%) scale(1);
}

/* Deck Flow Grid — emoji step layout */
.dk-flow-grid {
  display: flex; align-items: flex-start; justify-content: center;
  gap: 0; max-width: 1100px; margin: 0 auto;
  padding: 40px 0;
}
.dk-flow-step {
  flex: 1; text-align: center; padding: 24px 20px;
  max-width: 320px;
}
.dk-flow-emoji {
  font-size: 80px; line-height: 1; margin-bottom: 20px;
  filter: saturate(1.2);
}
.dk-flow-step h3 {
  font-size: 26px; font-weight: 800; color: #fff;
  margin-bottom: 12px; letter-spacing: -0.5px;
}
.dk-flow-step p {
  font-size: 18px; color: var(--text-mid); line-height: 1.55;
}
.dk-flow-arrow {
  font-size: 48px; font-weight: 300; color: var(--acid);
  display: flex; align-items: center; padding-top: 40px;
  opacity: 0.7; user-select: none;
}

/* Deck Tech Benefits — colored cards */
.dk-benefits-grid {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; width: 100%;
}
.dk-benefit-card {
  border-radius: 20px; padding: 44px;
  transition: transform 0.25s;
  position: relative; overflow: hidden;
}
.dk-benefit-card:hover { transform: translateY(-6px); }
.dk-benefit-card h3 { font-size: 30px; font-weight: 800; margin-bottom: 14px; color: #fff; }
.dk-benefit-card p { font-size: 20px; color: rgba(255,255,255,0.75); line-height: 1.55; }
.dk-benefit-card .dk-bc-icon {
  font-size: 56px; line-height: 1; margin-bottom: 20px;
  filter: saturate(1.2);
}
.dk-bc-blue { background: linear-gradient(160deg, #1a3a6e 0%, #2c5aa0 100%); border: 1px solid rgba(100,149,237,0.3); }
.dk-bc-green { background: linear-gradient(160deg, #1a5e2e 0%, #2d8f4e 100%); border: 1px solid rgba(0,200,83,0.3); }
.dk-bc-purple { background: linear-gradient(160deg, #3a1a6e 0%, #6b3fa0 100%); border: 1px solid rgba(155,63,199,0.3); }
.dk-bc-yellow { background: linear-gradient(160deg, #5e5a1a 0%, #8f8a2d 100%); border: 1px solid rgba(229,255,0,0.3); }

/* Deck Profile Mockup */
/* ===== PROFILE SHOWCASE — BOLD SPLIT LAYOUT ===== */
.dk-profile-section {
  min-height: 100vh; padding: 60px 48px;
  display: flex; flex-direction: row; align-items: center; justify-content: space-between;
  gap: 48px;
  max-width: 1600px; margin: 0 auto; position: relative;
  overflow: visible;
}
.dk-profile-left {
  flex: 0 0 42%; display: flex; flex-direction: column; gap: 40px;
  text-align: left; z-index: 2;
}
.dk-profile-left h2 {
  font-size: clamp(36px, 4.5vw, 62px); font-weight: 900; letter-spacing: -3px;
  line-height: 1.02; margin-bottom: 0;
}
.dk-profile-left h2 span { color: var(--acid); }
.dk-profile-left > p {
  font-size: 20px; color: var(--text-mid); line-height: 1.65; max-width: 480px;
}

/* Feature pills on the left */
.dk-profile-features {
  display: flex; flex-direction: column; gap: 16px; margin-top: 8px;
}
.dk-profile-feat {
  display: flex; align-items: center; gap: 16px;
  background: rgba(229,255,0,0.04);
  border: 1px solid rgba(229,255,0,0.12);
  border-radius: 16px; padding: 18px 24px;
  transition: all 0.3s;
}
.dk-profile-feat:hover {
  background: rgba(229,255,0,0.08);
  border-color: rgba(229,255,0,0.25);
  transform: translateX(6px);
}
.dk-profile-feat-icon { font-size: 32px; flex-shrink: 0; }
.dk-profile-feat-text h4 {
  font-size: 17px; font-weight: 800; color: #fff; margin: 0 0 4px;
}
.dk-profile-feat-text p {
  font-size: 14px; color: var(--text-dim); margin: 0; line-height: 1.4;
}

/* ===== RIGHT SIDE: PHONE SHOWCASE ===== */
.dk-showcase {
  flex: 0 0 50%; position: relative;
  display: flex; align-items: center; justify-content: center;
  perspective: 1800px;
  min-height: 680px;
}

/* Giant glow behind phones */
.dk-showcase::before {
  content: ''; position: absolute;
  width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(229,255,0,0.14) 0%, rgba(229,255,0,0.04) 40%, transparent 70%);
  border-radius: 50%; filter: blur(80px); z-index: 0;
  animation: dk-glow-pulse 4s ease-in-out infinite;
}
@keyframes dk-glow-pulse {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.15); }
}

/* Main phone (center, front) */
.dk-phone {
  width: 340px; min-height: 640px;
  background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
  border: 2px solid rgba(229,255,0,0.35);
  border-radius: 44px; padding: 10px;
  position: relative; z-index: 3;
  box-shadow:
    0 40px 120px rgba(0,0,0,0.7),
    0 0 80px rgba(229,255,0,0.12),
    0 0 0 1px rgba(255,255,255,0.1),
    inset 0 1px 0 rgba(255,255,255,0.12);
  transform: translateZ(0);
}
.dk-phone-screen {
  background: #111111; border-radius: 36px;
  padding: 16px 14px; min-height: 615px;
  position: relative; overflow: hidden;
}
/* Dynamic island */
.dk-phone-screen::before {
  content: ''; position: absolute; top: 8px; left: 50%; transform: translateX(-50%);
  width: 110px; height: 30px; background: #080808;
  border-radius: 20px; z-index: 5;
  box-shadow: 0 0 0 2px rgba(255,255,255,0.06);
}
.dk-phone-statusbar {
  display: flex; justify-content: space-between; align-items: center;
  padding: 8px 8px 14px; font-size: 11px; font-weight: 600; color: #999;
}
.dk-phone-header { text-align: center; margin-bottom: 18px; }
.dk-phone-avatar {
  width: 72px; height: 72px; border-radius: 50%;
  background: linear-gradient(135deg, var(--acid) 0%, #00FF85 100%);
  margin: 0 auto 10px; display: flex; align-items: center; justify-content: center;
  font-size: 32px;
  box-shadow: 0 0 40px rgba(229,255,0,0.35);
}
.dk-phone-name { font-size: 20px; font-weight: 800; color: #fff; letter-spacing: -0.3px; }
.dk-phone-handle { font-size: 13px; color: #999; margin-bottom: 14px; }
.dk-phone-stats {
  display: flex; justify-content: center; gap: 28px; margin-bottom: 18px;
  padding-bottom: 16px; border-bottom: 1px solid rgba(255,255,255,0.12);
}
.dk-phone-stat { text-align: center; }
.dk-phone-stat-num { font-size: 22px; font-weight: 900; color: #fff; }
.dk-phone-stat-label { font-size: 10px; color: #aaa; text-transform: uppercase; letter-spacing: 1px; }
.dk-badges-grid {
  display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;
}
.dk-badge {
  background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.14);
  border-radius: 14px; padding: 14px 10px; text-align: center;
  font-size: 11px; font-weight: 600; color: #ccc;
  transition: all 0.3s;
}
.dk-badge:hover { background: rgba(229,255,0,0.12); border-color: rgba(229,255,0,0.3); }
.dk-badge-emoji { font-size: 28px; margin-bottom: 6px; display: block; }

/* ===== SECONDARY PHONES (behind, tilted) ===== */
.dk-phone-secondary {
  position: absolute; width: 280px; min-height: 540px;
  background: linear-gradient(180deg, #222 0%, #151515 100%);
  border: 1.5px solid rgba(255,255,255,0.12);
  border-radius: 40px; padding: 10px; z-index: 1;
  opacity: 0.6;
  box-shadow: 0 30px 80px rgba(0,0,0,0.6);
  overflow: hidden;
}
.dk-phone-secondary .dk-phone-screen-secondary {
  background: #0f0f0f; border-radius: 32px;
  padding: 16px 14px; min-height: 515px;
  position: relative; overflow: hidden;
}
/* Dynamic island for secondary */
.dk-phone-screen-secondary::before {
  content: ''; position: absolute; top: 8px; left: 50%; transform: translateX(-50%);
  width: 100px; height: 26px; background: #000;
  border-radius: 16px; z-index: 5;
}
.dk-phone-left {
  left: -80px; top: 50%; transform: translateY(-50%) rotateY(18deg) scale(0.88);
  transform-origin: right center;
}
.dk-phone-right {
  right: -80px; top: 50%; transform: translateY(-50%) rotateY(-18deg) scale(0.88);
  transform-origin: left center;
}

/* Mock content for secondary screens */
.dk-mock-bar {
  height: 10px; border-radius: 5px; background: rgba(255,255,255,0.12); margin-bottom: 10px;
}
.dk-mock-bar.short { width: 60%; }
.dk-mock-bar.med { width: 80%; }
.dk-mock-bar.accent { background: rgba(229,255,0,0.25); width: 45%; }
.dk-mock-card {
  background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px; padding: 14px; margin-bottom: 10px;
}
.dk-mock-card-row {
  display: flex; gap: 10px; align-items: center;
}
.dk-mock-avatar {
  width: 36px; height: 36px; border-radius: 50%;
  background: rgba(229,255,0,0.2); flex-shrink: 0;
}
.dk-mock-lines { flex: 1; }

/* Floating notification cards */
.dk-notif {
  position: absolute; background: rgba(16,16,16,0.96);
  border: 1px solid rgba(229,255,0,0.2); border-radius: 16px;
  padding: 14px 20px; backdrop-filter: blur(24px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.6), 0 0 30px rgba(229,255,0,0.05);
  z-index: 5; white-space: nowrap;
  animation: dk-notif-float 5s ease-in-out infinite;
}
.dk-notif-top {
  top: 8%; right: -30px;
  animation-delay: 0s;
}
.dk-notif-mid {
  bottom: 25%; left: -50px;
  animation-delay: 1.5s;
}
@keyframes dk-notif-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
.dk-notif-icon { font-size: 18px; margin-bottom: 4px; }
.dk-notif-title { font-size: 14px; font-weight: 700; color: #fff; }
.dk-notif-sub { font-size: 12px; color: var(--text-dim); }
.dk-notif-accent { color: var(--acid); font-weight: 700; }

/* Deck Ecosystem */
.dk-eco-grid {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px;
  position: relative; width: 100%;
}
.dk-eco-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 32px; text-align: center;
  position: relative;
}
.dk-eco-card h3 { font-size: 24px; font-weight: 800; margin-bottom: 16px; color: #fff; }
.dk-eco-step {
  font-size: 17px; color: var(--text-mid); line-height: 1.5;
  text-align: left; margin-bottom: 8px;
  padding-left: 20px; position: relative;
}
.dk-eco-step::before {
  content: '→'; position: absolute; left: 0; color: var(--acid);
}
.dk-eco-arrow {
  position: absolute; top: 50%; right: -14px;
  font-size: 20px; color: var(--acid); z-index: 2;
  transform: translateY(-50%);
}

/* Deck Revenue */
.dk-revenue-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; width: 100%; }
.dk-revenue-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 36px; text-align: center;
}
.dk-revenue-pct { font-size: 56px; font-weight: 900; color: var(--acid); margin-bottom: 10px; }
.dk-revenue-card h3 { font-size: 26px; font-weight: 700; margin-bottom: 10px; }
.dk-revenue-card p { font-size: 19px; color: var(--text-mid); line-height: 1.6; }

/* Deck Market Size */
.dk-market-viz {
  display: flex; align-items: center; justify-content: center;
  gap: 0; position: relative; margin: 48px auto;
  min-height: 320px;
}
.dk-market-circle {
  border-radius: 50%; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  text-align: center; position: relative;
}
.dk-market-circle.big {
  width: 300px; height: 300px;
  background: rgba(229,255,0,0.08); border: 2px solid rgba(229,255,0,0.3);
  margin-right: -60px; z-index: 1;
}
.dk-market-circle.small {
  width: 220px; height: 220px;
  background: rgba(100,149,237,0.08); border: 2px solid rgba(100,149,237,0.3);
  z-index: 2;
}
.dk-market-circle .year {
  font-size: 15px; font-weight: 700; letter-spacing: 2px;
  text-transform: uppercase; color: var(--text-dim); margin-bottom: 8px;
}
.dk-market-circle .amount {
  font-size: 36px; font-weight: 900; color: #fff;
}
.dk-market-circle.big .amount { color: var(--acid); }
.dk-market-cagr {
  position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
  background: var(--bg-raised); border: 1px solid var(--border);
  padding: 10px 24px; border-radius: 100px;
  font-size: 16px; font-weight: 700; color: var(--acid);
}

/* Deck Competitors */
.dk-comp-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 100%;
}
.dk-comp-card {
  background: var(--bg-raised); border: 1px solid var(--border);
  border-radius: 16px; padding: 28px; text-align: center;
  transition: transform 0.2s;
}
.dk-comp-card:hover { transform: translateY(-4px); }
.dk-comp-card h3 { font-size: 24px; font-weight: 700; margin-bottom: 8px; }
.dk-comp-card p { font-size: 17px; color: var(--text-mid); line-height: 1.5; }
.dk-comp-card .dk-comp-lacks {
  margin-top: 12px; font-size: 14px; color: var(--red);
  font-weight: 600;
}
.dk-comp-lezgo {
  grid-column: 1 / -1;
  background: linear-gradient(135deg, rgba(229,255,0,0.08) 0%, rgba(0,255,133,0.05) 100%);
  border: 2px solid rgba(229,255,0,0.3);
  border-radius: 16px; padding: 36px; text-align: center;
}
.dk-comp-lezgo h3 { font-size: 32px; font-weight: 900; color: var(--acid); margin-bottom: 8px; }
.dk-comp-lezgo p { font-size: 20px; color: var(--text-mid); }

/* Deck CTA */
.dk-cta {
  text-align: center; padding: 80px 48px;
  position: relative;
  max-width: 1600px; margin: 0 auto;
  min-height: 80vh;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
}
.dk-cta h2 {
  font-size: 56px; font-weight: 900; margin-bottom: 16px;
  text-transform: uppercase; letter-spacing: -2px;
  font-style: italic;
}
.dk-cta h2 span { color: var(--acid); }
.dk-cta p {
  font-size: 23px; color: var(--text-mid); margin-bottom: 40px; max-width: 600px;
}
.dk-cta-contact {
  font-size: 16px; color: var(--text-dim); margin-top: 24px;
}
.dk-cta-contact a { color: var(--acid); text-decoration: none; }
.dk-cta-btn {
  background: var(--acid); color: #000; border: none;
  padding: 22px 56px; font-weight: 900; font-size: 19px;
  cursor: pointer; transition: all 0.2s;
  font-family: 'Sora', sans-serif; text-transform: uppercase;
}
.dk-cta-btn:hover { background: #fff; box-shadow: 0 0 60px var(--acid-glow); }


/* ═══════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════ */
@media (max-width: 1024px) {
  .events-grid { grid-template-columns: repeat(3, 1fr); }
  .hero-content, .search-section, .content, .footer { padding-left: 36px; padding-right: 36px; }
  .mp { padding: 60px 40px 80px; }
  .mp-listing { grid-template-columns: 50px 80px 1fr auto; gap: 20px; padding: 22px 24px; }
  .mp-listing-img { width: 80px; height: 80px; }
  .cf-section { padding-left: 40px; padding-right: 40px; }
  .cf-hero { padding-left: 40px; padding-right: 40px; }
  .cf-stats { padding-left: 40px; padding-right: 40px; }
  .pf { padding: 60px 40px; }
  .ev-hero-content { padding: 60px 40px 48px; }
  .ev-tickets-section { padding: 60px 40px 80px; }
  .ev-info-section { padding: 0 40px 60px; }
  .tk-grid { grid-template-columns: repeat(4, 1fr); gap: 12px; }
  .sc { padding: 60px 40px 80px; }
  .sc-main { gap: 48px; }
  .dk-hero { padding: 80px 40px 60px; gap: 60px; }
  .dk-slide { padding: 60px 40px; }
  .dk-cta { padding: 80px 40px; }
  .dk-stats-inner { padding: 0 40px; }
  .dk-toggle-bar { padding: 12px 40px; }
  .dk-value-section { padding: 60px 40px; }
  .dk-profile-section { padding: 60px 40px; gap: 40px; }
}
@media (max-width: 768px) {
  /* === NAV === */
  .util-bar { display: none; }
  .nav-cat .soon-tag { display: none; }
  .nav-categories { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .nav-cat { padding: 0 14px; font-size: 13px; }

  /* === HERO === */
  .hero { height: 65vh; min-height: 480px; max-height: 650px; }
  .hero h1 { font-size: 42px; letter-spacing: -2px; }
  .hero-content { padding-left: 24px; padding-right: 24px; text-align: center; }
  .hero-content h1, .hero-content p { text-align: center; }
  .hero-sub { margin: 0 auto; }

  /* === GLOBAL PADDING === */
  .search-section, .content, .footer { padding-left: 24px; padding-right: 24px; }

  /* === SEARCH === */
  .search-bar { flex-direction: column; height: auto; }
  .search-field { padding: 14px 20px; border-right: none; border-bottom: 1px solid var(--border); text-align: left; }
  .search-btn { padding: 16px 20px; justify-content: center; }

  /* === EVENTS === */
  .srb-grid { grid-template-columns: 1fr; gap: 16px; }
  .promo-grid { grid-template-columns: 1fr; gap: 16px; }
  .events-grid { grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .section-header { text-align: center; flex-direction: column; align-items: center; gap: 12px; }

  /* === CÓMO FUNCIONA === */
  .cf-hero { padding: 80px 24px; text-align: center; }
  .cf-hero-inner { grid-template-columns: 1fr; gap: 48px; }
  .cf-hero h1, .cf-hero p { text-align: center; }
  .cf-tickets { max-width: 400px; margin: 0 auto; }
  .cf-stats { grid-template-columns: repeat(2, 1fr); gap: 24px; padding: 40px 24px; }
  .cf-stat { text-align: center; }
  .cf-section { padding: 64px 24px; text-align: center; }
  .cf-section-label, .cf-section-title { text-align: center; }
  .cf-features { grid-template-columns: 1fr; gap: 16px; }
  .cf-feature { text-align: center; }
  .cf-steps { max-width: 480px; margin: 0 auto; }
  .cf-step { grid-template-columns: 1fr; text-align: center; gap: 12px; }
  .cf-step-num { text-align: center; }
  .cf-compare { grid-template-columns: 1fr; }
  .cf-compare-new { border-left: none; border-top: 3px solid var(--acid); }
  .cf-compromisos { grid-template-columns: repeat(2, 1fr); }
  @media (max-width: 560px) { .cf-compromisos { grid-template-columns: 1fr; } }
  .std-teaser { flex-direction: column; align-items: flex-start; gap: 8px; }
  .std-teaser-arrow { display: none; }
  .cf-btns { flex-direction: column; align-items: center; }
  .cf-cta { text-align: center; }

  /* === MARKETPLACE === */
  .mp { padding: 48px 24px 60px; }
  .mp-search-bar { flex-direction: column; height: auto; }
  .mp-search-field { padding: 14px 20px; border-right: none; border-bottom: 1px solid var(--border); }
  .mp-top { flex-direction: column; align-items: flex-start; gap: 16px; }
  .mp-listing { grid-template-columns: 1fr; gap: 12px; padding: 20px; }
  .mp-listing-img { display: none; }
  .mp-listing-date { display: none; }
  .mp-listing-right { align-items: flex-start; flex-direction: row; gap: 12px; }
  .mp-filters-row { flex-direction: column; align-items: flex-start; }

  /* === PERFIL === */
  .pf { padding: 48px 24px; }
  .pf-header { flex-direction: column; align-items: flex-start; gap: 24px; }
  .pf-edit-btn { margin-left: 0; }
  .pf-badges { grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .pf-memberships { grid-template-columns: 1fr; }
  .pf-ticket-row { grid-template-columns: 1fr; gap: 12px; }
  .pf-ticket-img { display: none; }
  .pf-ticket-right { text-align: left; }

  /* === EVENTO === */
  .ev-hero { min-height: 420px; }
  .ev-hero-content { padding: 48px 24px 40px; }
  .ev-hero-title { font-size: 32px; }
  .ev-hero-info { gap: 16px; }
  .ev-tickets-section { padding: 48px 24px 60px; }
  .ev-info-section { grid-template-columns: 1fr; padding: 0 24px 48px; gap: 32px; }
  .tk-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
  .tk-features { gap: 20px; }

  /* === SCANNER === */
  .sc { padding: 48px 24px 60px; }
  .sc-header { text-align: center; }
  .sc-header h1 { font-size: 36px; }
  .sc-main { grid-template-columns: 1fr; gap: 48px; }
  .sc-results { grid-template-columns: 1fr; }
  .sc-stats { grid-template-columns: repeat(2, 1fr); gap: 20px; padding: 32px 24px; }
  .sc-viewfinder { width: 180px; height: 180px; }
  .sc-stamps-grid { grid-template-columns: 1fr; max-width: 480px; margin: 0 auto; }

  /* === DECK === */
  .dk-hero { grid-template-columns: 1fr; gap: 48px; padding: 60px 24px; text-align: center; }
  .dk-hero h1 { font-size: 56px; }
  .dk-hero-text { text-align: center; }
  .dk-tickets { max-width: 400px; margin: 0 auto; }
  .dk-stats-inner { grid-template-columns: repeat(2, 1fr); gap: 24px; padding: 0 24px; }
  .dk-slide { padding: 60px 24px; }
  .dk-slide-half { padding: 48px 24px; }
  .dk-slide h2 { font-size: 36px; }
  .dk-problems { grid-template-columns: 1fr; gap: 16px; }
  .dk-how-grid { grid-template-columns: repeat(2, 1fr) !important; max-width: 100%; gap: 16px; }
  .dk-revenue-grid { grid-template-columns: 1fr; }
  .dk-benefits-grid { grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .dk-benefit-card { padding: 32px; }
  .dk-value-grid { grid-template-columns: 1fr; gap: 16px; }
  .dk-value-section { padding: 60px 24px; }
  .dk-value-section h2 { font-size: 32px; }
  .dk-news-grid { grid-template-columns: 1fr; }
  .dk-eco-grid { grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .dk-eco-arrow { display: none; }
  .dk-comp-grid { grid-template-columns: 1fr; gap: 16px; }
  .dk-flow-grid { flex-direction: column; align-items: center; gap: 20px; }
  .dk-flow-arrow { transform: rotate(90deg); padding: 0; font-size: 36px; }
  .dk-flow-step { max-width: 400px; width: 100%; }
  .dk-flow-emoji { font-size: 64px; }
  .dk-profile-section { padding: 60px 24px; gap: 40px; flex-direction: column; text-align: center; }
  .dk-profile-left { flex: none; align-items: center; text-align: center; width: 100%; }
  .dk-profile-left > p { max-width: 100%; }
  .dk-profile-features { width: 100%; max-width: 480px; }
  .dk-showcase { flex: none; min-height: 500px; width: 100%; }
  .dk-phone-secondary { display: none; }
  .dk-notif { display: none; }
  .dk-phone { width: 300px; min-height: 560px; }
  .dk-mission-line { font-size: clamp(24px, 4vw, 40px); }
  .dk-market-circle.big { width: 220px; height: 220px; }
  .dk-market-circle.small { width: 160px; height: 160px; }
  .dk-cta { padding: 60px 24px; text-align: center; }
  .dk-cta h2 { font-size: 36px; }
  .dk-hero-btns { flex-direction: column; align-items: center; }
  .dk-toggle-bar { padding: 12px 24px; }
  .dk-slide-label { text-align: center; }
  .dk-value-inner { text-align: center; }
  .dk-value-badge { margin: 0 auto 20px; }
  .id-banner { margin: 0 -24px 48px -24px; }
}

@media (max-width: 480px) {
  /* === HERO === */
  .hero { height: 55vh; min-height: 380px; max-height: 500px; }
  .hero h1 { font-size: 32px; letter-spacing: -1.5px; }
  .hero-content, .search-section, .content, .footer { padding-left: 16px; padding-right: 16px; }
  .hero-content { padding-bottom: 40px; }

  /* === EVENTS === */
  .nav-cat { padding: 0 8px; font-size: 12px; }
  .cal-dropdown { width: 280px; }
  .srb-card-img { width: 100px; min-height: 90px; }
  .events-grid { grid-template-columns: 1fr; gap: 14px; }

  /* === CÓMO FUNCIONA === */
  .cf-hero { padding: 60px 16px; }
  .cf-hero h1 { font-size: 44px; }
  .cf-ticket { padding: 18px; }
  .cf-ticket-fake { margin-bottom: -40px; }
  .cf-ticket-event { font-size: 16px; }
  .cf-ticket-price { font-size: 28px; }
  .cf-stat-num { font-size: 32px; }
  .cf-stats { padding: 32px 16px; gap: 20px; }
  .cf-section { padding: 52px 16px; }
  .cf-section-title { font-size: 28px; }
  .cf-step-num { font-size: 28px; }
  .cf-cta { padding: 64px 16px; }
  .cf-feature { padding: 24px 20px; }
  .cf-feature-icon { font-size: 40px; }

  /* === MARKETPLACE === */
  .mp { padding: 36px 16px 48px; }

  /* === PERFIL === */
  .pf { padding: 36px 16px; }
  .pf-badges { grid-template-columns: 1fr 1fr; gap: 12px; }
  .pf-stats-row { gap: 16px; flex-wrap: wrap; justify-content: center; }

  /* === EVENTO === */
  .ev-hero-content { padding: 40px 16px 32px; }
  .ev-hero-title { font-size: 28px; letter-spacing: -1px; }
  .ev-hero-info { flex-direction: column; gap: 10px; }
  .ev-tickets-section { padding: 36px 16px 48px; }
  .ev-info-section { padding: 0 16px 36px; }
  .tk-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
  .tk-card-type { font-size: 20px; }
  .tk-card-inner { padding: 20px; }
  .tk-card-price { font-size: 15px; }
  .tk-features { flex-direction: column; gap: 12px; }

  /* === SCANNER === */
  .sc { padding: 36px 16px 48px; }
  .sc-header h1 { font-size: 28px; letter-spacing: -1px; }
  .sc-viewfinder { width: 160px; height: 160px; }
  .sc-stats { grid-template-columns: 1fr 1fr; padding: 24px 16px; }
  .sc-stat-num { font-size: 28px; }

  /* === DECK === */
  .dk-hero { padding: 48px 16px; gap: 36px; }
  .dk-hero h1 { font-size: 38px; }
  .dk-slide { padding: 48px 16px; min-height: auto; }
  .dk-slide-half { padding: 36px 16px; }
  .dk-slide h2 { font-size: 28px; letter-spacing: -1px; }
  .dk-stats-inner { padding: 0 16px; }
  .dk-cta { padding: 48px 16px; }
  .dk-cta h2 { font-size: 28px; }
  .dk-stat-num { font-size: 32px; }
  .dk-revenue-pct { font-size: 36px; }
  .dk-benefits-grid { grid-template-columns: 1fr; gap: 14px; }
  .dk-benefit-card { padding: 28px 24px; }
  .dk-bc-icon { font-size: 44px; }
  .dk-benefit-card h3 { font-size: 22px; }
  .dk-benefit-card p { font-size: 16px; }
  .dk-eco-grid { grid-template-columns: 1fr; gap: 14px; }
  .dk-how-grid { grid-template-columns: 1fr !important; max-width: 100%; gap: 16px; }
  .dk-how-inner { aspect-ratio: 4/3; padding: 32px 28px; }
  .dk-how-logo { font-size: 80px; }
  .dk-how-num { font-size: 48px; }
  .dk-how-inner h3 { font-size: 24px; }
  .dk-flow-step h3 { font-size: 22px; }
  .dk-flow-step p { font-size: 16px; }
  .dk-flow-emoji { font-size: 56px; }
  .dk-mission-line { font-size: clamp(20px, 5vw, 32px); }
  .dk-market-circle.big { width: 180px; height: 180px; }
  .dk-market-circle.small { width: 140px; height: 140px; }
  .dk-market-circle .amount { font-size: 24px; }
  .dk-toggle-bar { padding: 10px 16px; gap: 8px; }
  .dk-toggle button { padding: 6px 12px; font-size: 10px; }
  .dk-profile-section { padding: 48px 16px; }
  .dk-profile-left { text-align: center; align-items: center; }
  .dk-phone { width: 260px; min-height: 480px; }
  .dk-showcase { min-height: 420px; }
  .dk-profile-feat { padding: 14px 16px; gap: 12px; }
  .dk-profile-feat-icon { font-size: 26px; }
  .dk-profile-feat-text h4 { font-size: 15px; }
  .dk-profile-feat-text p { font-size: 13px; }
  .dk-value-section { padding: 48px 16px; }
  .dk-value-section h2 { font-size: 26px; }
  .dk-value-card { padding: 28px 24px; }
  .dk-value-icon { font-size: 32px; }
  .dk-value-card h3 { font-size: 20px; }
  .dk-value-card p { font-size: 15px; }
  .id-banner { margin: 0 -16px 40px -16px; padding: 20px 16px; }
  .dk-comp-lezgo { padding: 24px; }
  .dk-comp-lezgo h3 { font-size: 24px; }
}

/* ═══════════════════════════════════════════
   PURCHASE MODAL
   ═══════════════════════════════════════════ */
.pm-overlay {
  position: fixed; inset: 0; z-index: 9000;
  background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
  display: flex; align-items: flex-end; justify-content: center;
  opacity: 0; pointer-events: none;
  transition: opacity 0.3s ease;
}
.pm-overlay.pm-open {
  opacity: 1; pointer-events: all;
}
.pm-sheet {
  width: 100%; max-width: 560px; max-height: 88vh;
  background: #111; border-radius: 28px 28px 0 0;
  border: 1px solid rgba(229,255,0,0.15);
  border-bottom: none;
  padding: 0;
  overflow: hidden;
  transform: translateY(40px);
  transition: transform 0.35s cubic-bezier(0.25,0.46,0.45,0.94);
  display: flex; flex-direction: column;
}
.pm-overlay.pm-open .pm-sheet { transform: translateY(0); }
.pm-handle {
  width: 40px; height: 4px; background: rgba(255,255,255,0.2);
  border-radius: 2px; margin: 16px auto 0;
}
.pm-header {
  padding: 20px 28px 16px;
  display: flex; align-items: center; justify-content: space-between;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.pm-header-event { font-size: 13px; font-weight: 600; color: var(--acid); letter-spacing: 0.08em; text-transform: uppercase; }
.pm-header-title { font-size: 20px; font-weight: 800; margin-top: 4px; }
.pm-close {
  width: 36px; height: 36px; border-radius: 50%; background: rgba(255,255,255,0.08);
  border: none; cursor: pointer; color: #fff; font-size: 18px;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.pm-close:hover { background: rgba(255,255,255,0.15); }
.pm-body { flex: 1; overflow-y: auto; padding: 24px 28px; }

/* Steps indicator */
.pm-steps {
  display: flex; align-items: center; gap: 0; margin-bottom: 28px;
}
.pm-step-dot {
  width: 30px; height: 30px; border-radius: 50%;
  background: rgba(255,255,255,0.06); border: 2px solid rgba(255,255,255,0.28);
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: rgba(255,255,255,0.55);
  flex-shrink: 0; transition: all 0.3s;
}
.pm-step-dot.active {
  background: var(--acid); border-color: var(--acid); color: #000;
  box-shadow: 0 0 14px rgba(229,255,0,0.55);
}
.pm-step-dot.done {
  background: var(--acid); border-color: var(--acid); color: #000;
  opacity: 0.7;
}
.pm-step-line {
  flex: 1; height: 2px; background: rgba(255,255,255,0.15); transition: background 0.3s;
  border-radius: 2px;
}
.pm-step-line.done { background: var(--acid); opacity: 0.6; }

/* Step panels */
.pm-panel { display: none; }
.pm-panel.active { display: block; }

/* Step 1: ticket summary */
.pm-ticket-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px; background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; margin-bottom: 12px;
  cursor: pointer; transition: border-color 0.2s;
}
.pm-ticket-row:hover { border-color: rgba(229,255,0,0.3); }
.pm-ticket-row.selected { border-color: var(--acid); background: rgba(229,255,0,0.06); }
.pm-ticket-row.soldout { opacity: 0.4; cursor: not-allowed; }
.pm-ticket-name { font-size: 16px; font-weight: 700; }
.pm-ticket-sub { font-size: 12px; color: var(--text-dim); margin-top: 2px; }
.pm-ticket-price { font-size: 20px; font-weight: 800; color: var(--acid); }
.pm-ticket-radio {
  width: 20px; height: 20px; border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.2); flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
}
.pm-ticket-row.selected .pm-ticket-radio { border-color: var(--acid); }
.pm-ticket-row.selected .pm-ticket-radio::after {
  content: ''; width: 10px; height: 10px; border-radius: 50%; background: var(--acid);
}

/* Quantity stepper */
.pm-ticket-row {
  cursor: default !important;
}
.pm-ticket-row:hover { border-color: rgba(255,255,255,0.15) !important; }
.pm-qty-row {
  display: flex; align-items: center; gap: 10px; flex-shrink: 0;
}
.pm-qty-btn {
  width: 30px; height: 30px; border-radius: 50%;
  background: rgba(255,255,255,0.08); border: 1.5px solid rgba(255,255,255,0.18);
  color: #fff; font-size: 18px; font-weight: 700; line-height: 1;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: all 0.15s; flex-shrink: 0;
}
.pm-qty-btn:hover:not(:disabled) { background: rgba(229,255,0,0.18); border-color: var(--acid); color: var(--acid); }
.pm-qty-btn:disabled { opacity: 0.25; cursor: not-allowed; }
.pm-qty-num {
  font-size: 17px; font-weight: 800; min-width: 22px; text-align: center;
}
/* Subtotal row */
.pm-ticket-subtotal {
  display: flex; justify-content: space-between; align-items: center;
  padding: 14px 20px; margin-bottom: 12px;
  border-top: 1px solid rgba(255,255,255,0.08);
  font-size: 13px; color: var(--text-mid);
}
.pm-ticket-subtotal strong { font-size: 17px; font-weight: 800; color: #fff; }
/* ID-assignment notice */
.pm-id-notice {
  display: none; gap: 10px; align-items: flex-start;
  padding: 13px 16px; margin-bottom: 14px;
  background: rgba(229,255,0,0.05); border: 1px solid rgba(229,255,0,0.22);
  border-radius: 12px; font-size: 13px; color: var(--text-mid); line-height: 1.55;
}
.pm-id-notice.visible { display: flex; }
.pm-id-notice-icon { font-size: 18px; flex-shrink: 0; margin-top: 1px; }

/* Fee breakdown toggle */
.pm-fee-row {
  display: flex; justify-content: space-between; align-items: center;
  font-size: 14px; margin-bottom: 4px; color: var(--text-mid);
}
.pm-fee-toggle {
  display: flex; align-items: center; gap: 5px; cursor: pointer;
  user-select: none;
}
.pm-fee-toggle:hover { color: #fff; }
.pm-fee-chevron {
  font-size: 10px; transition: transform 0.2s; display: inline-block;
  color: var(--text-dim);
}
.pm-fee-chevron.open { transform: rotate(180deg); }
.pm-fee-breakdown {
  display: none; flex-direction: column; gap: 6px;
  margin: 6px 0 10px; padding: 12px 14px;
  background: rgba(255,255,255,0.03); border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.07);
}
.pm-fee-breakdown.visible { display: flex; }
.pm-fee-line {
  display: flex; justify-content: space-between; align-items: center;
  font-size: 12px; color: var(--text-mid);
}
.pm-fee-line span:last-child { color: var(--text-mid); font-weight: 600; }
.pm-fee-label { display: flex; align-items: center; gap: 6px; }
.pm-fee-dot {
  width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0;
}

/* Step 2: DNI verification */
.pm-verify-icon { font-size: 64px; text-align: center; margin-bottom: 20px; }
.pm-verify-title { font-size: 22px; font-weight: 800; text-align: center; margin-bottom: 8px; }
.pm-verify-sub { font-size: 14px; color: var(--text-mid); text-align: center; margin-bottom: 24px; line-height: 1.6; }
.pm-input {
  width: 100%; background: rgba(255,255,255,0.06); border: 1.5px solid rgba(255,255,255,0.12);
  border-radius: 12px; padding: 14px 18px; font-size: 16px; color: #fff;
  font-family: 'Sora', sans-serif; outline: none; box-sizing: border-box; margin-bottom: 12px;
  letter-spacing: 0.05em;
}
.pm-input:focus { border-color: rgba(229,255,0,0.5); }
.pm-input::placeholder { color: rgba(255,255,255,0.45); }
.pm-security-note {
  display: flex; align-items: center; gap: 8px;
  background: rgba(229,255,0,0.06); border: 1px solid rgba(229,255,0,0.2);
  border-radius: 10px; padding: 12px 16px; font-size: 12px; color: var(--text-mid);
  margin-top: 4px;
}

/* Step 3: Payment */
.pm-pay-summary {
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px; padding: 20px; margin-bottom: 20px;
}
.pm-pay-row { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px; color: var(--text-mid); }
.pm-pay-row.total { font-size: 18px; font-weight: 800; color: #fff; border-top: 1px solid rgba(255,255,255,0.08); padding-top: 12px; margin-top: 4px; margin-bottom: 0; }
.pm-pay-row.total span:last-child { color: var(--acid); }
.pm-card-row {
  display: flex; gap: 10px; margin-bottom: 12px;
}
.pm-card-opt {
  flex: 1; padding: 12px 16px; background: rgba(255,255,255,0.04);
  border: 1.5px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer;
  font-size: 13px; font-weight: 600; text-align: center; color: var(--text-mid);
  transition: all 0.2s;
}
.pm-card-opt.selected { border-color: var(--acid); color: var(--acid); background: rgba(229,255,0,0.06); }
.pm-card-opt .pm-card-icon { font-size: 20px; display: block; margin-bottom: 4px; }

/* Step 4: Confirmation */
.pm-confirm-icon { font-size: 72px; text-align: center; margin-bottom: 16px; animation: pm-pop 0.5s cubic-bezier(0.175,0.885,0.32,1.275); }
@keyframes pm-pop { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
.pm-confirm-title { font-size: 28px; font-weight: 900; text-align: center; margin-bottom: 8px; }
.pm-confirm-sub { font-size: 15px; color: var(--text-mid); text-align: center; margin-bottom: 28px; line-height: 1.6; }
.pm-ticket-card-preview {
  background: linear-gradient(135deg, #1a1a00 0%, #111 100%);
  border: 1.5px solid rgba(229,255,0,0.4); border-radius: 20px;
  padding: 24px; text-align: center; position: relative; overflow: hidden;
}
.pm-ticket-card-preview::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: linear-gradient(90deg, transparent, var(--acid), transparent);
}
.pm-ticket-card-event { font-size: 13px; font-weight: 700; color: var(--acid); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 4px; }
.pm-ticket-card-name { font-size: 22px; font-weight: 900; margin-bottom: 16px; }
.pm-ticket-card-details { display: flex; justify-content: space-around; margin-bottom: 20px; }
.pm-ticket-card-detail { font-size: 12px; color: var(--text-dim); text-align: center; }
.pm-ticket-card-detail strong { display: block; font-size: 14px; color: #fff; font-weight: 700; margin-bottom: 2px; }
.pm-ticket-qr { font-size: 56px; margin: 0 auto; display: block; }
.pm-ticket-verified { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 700; color: var(--acid); margin-top: 12px; }

/* CTA button in modal */
.pm-cta {
  width: 100%; background: var(--acid); color: var(--bg);
  border: none; border-radius: 14px; padding: 18px;
  font-size: 16px; font-weight: 800; font-family: 'Sora', sans-serif;
  cursor: pointer; margin-top: 20px; transition: transform 0.15s, box-shadow 0.15s;
  letter-spacing: 0.02em;
}
.pm-cta:hover { transform: translateY(-1px); box-shadow: 0 8px 32px rgba(229,255,0,0.35); }
.pm-cta:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }
.pm-cta-secondary {
  width: 100%; background: transparent; color: var(--text-mid);
  border: 1px solid rgba(255,255,255,0.15); border-radius: 14px; padding: 14px;
  font-size: 14px; font-weight: 600; font-family: 'Sora', sans-serif;
  cursor: pointer; margin-top: 10px;
}
.pm-cta-secondary:hover { border-color: rgba(255,255,255,0.3); color: #fff; }

/* Loading state */
.pm-loading {
  display: none; flex-direction: column; align-items: center;
  justify-content: center; padding: 40px 0; gap: 16px;
}
.pm-loading.visible { display: flex; }
.pm-spinner {
  width: 40px; height: 40px; border: 3px solid rgba(229,255,0,0.15);
  border-top-color: var(--acid); border-radius: 50%;
  animation: pm-spin 0.8s linear infinite;
}
@keyframes pm-spin { to { transform: rotate(360deg); } }
.pm-loading-text { font-size: 14px; color: var(--text-mid); }

/* Countdown timer */
.ev-countdown {
  display: flex; align-items: center; gap: 6px;
  background: rgba(229,255,0,0.06); border: 1px solid rgba(229,255,0,0.2);
  border-radius: 12px; padding: 10px 16px; margin-top: 16px;
  font-size: 13px; color: var(--text-mid);
  flex-wrap: wrap;
}
.ev-countdown-label { font-weight: 600; color: var(--acid); margin-right: 4px; }
.ev-countdown-unit { background: rgba(0,0,0,0.4); border: 1px solid rgba(229,255,0,0.15); border-radius: 6px; padding: 4px 8px; font-size: 16px; font-weight: 800; color: #fff; min-width: 36px; text-align: center; font-variant-numeric: tabular-nums; }

@media (max-width: 480px) {
  .pm-sheet { max-height: 95vh; border-radius: 24px 24px 0 0; }
  .pm-body { padding: 20px 20px; }
  .pm-header { padding: 16px 20px 14px; }
  .pm-confirm-title { font-size: 22px; }
}

/* ═══════════════════════════════════════════
   AUTH VIEW
   ═══════════════════════════════════════════ */
.auth-view {
  min-height: 100vh; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 40px 24px; position: relative; overflow: hidden;
}
.auth-view::before {
  content: ''; position: absolute; top: -200px; right: -200px;
  width: 600px; height: 600px; background: radial-gradient(circle, rgba(229,255,0,0.06) 0%, transparent 70%);
  pointer-events: none;
}
.auth-logo {
  font-size: 28px; font-weight: 900; letter-spacing: -1px;
  color: var(--acid); margin-bottom: 48px; cursor: pointer;
}
.auth-card {
  width: 100%; max-width: 420px;
  background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 24px; overflow: hidden;
}
.auth-tabs {
  display: flex; border-bottom: 1px solid rgba(255,255,255,0.08);
}
.auth-tab {
  flex: 1; padding: 18px; text-align: center; font-size: 15px; font-weight: 700;
  color: var(--text-dim); cursor: pointer; transition: all 0.2s;
}
.auth-tab.active { color: #fff; border-bottom: 2px solid var(--acid); }
.auth-body { padding: 32px; }
.auth-title { font-size: 22px; font-weight: 800; margin-bottom: 6px; }
.auth-sub { font-size: 14px; color: var(--text-mid); margin-bottom: 28px; line-height: 1.5; }

/* Auth steps */
.auth-step { display: none; }
.auth-step.active { display: block; }
.auth-input {
  width: 100%; background: rgba(255,255,255,0.06); border: 1.5px solid rgba(255,255,255,0.12);
  border-radius: 12px; padding: 14px 18px; font-size: 15px; color: #fff;
  font-family: 'Sora', sans-serif; outline: none; box-sizing: border-box; margin-bottom: 12px;
}
.auth-input:focus { border-color: rgba(229,255,0,0.5); }
.auth-input::placeholder { color: rgba(255,255,255,0.3); }
.auth-label { font-size: 12px; font-weight: 600; color: var(--text-dim); margin-bottom: 6px; display: block; letter-spacing: 0.06em; text-transform: uppercase; }
.auth-btn {
  width: 100%; background: var(--acid); color: var(--bg);
  border: none; border-radius: 12px; padding: 16px;
  font-size: 15px; font-weight: 800; font-family: 'Sora', sans-serif;
  cursor: pointer; margin-top: 8px; transition: transform 0.15s, box-shadow 0.15s;
}
.auth-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 24px rgba(229,255,0,0.3); }
.auth-btn-ghost {
  width: 100%; background: transparent; color: var(--text-mid);
  border: 1px solid rgba(255,255,255,0.12); border-radius: 12px; padding: 14px;
  font-size: 14px; font-weight: 600; font-family: 'Sora', sans-serif;
  cursor: pointer; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;
}
.auth-btn-ghost:hover { border-color: rgba(255,255,255,0.25); color: #fff; }
.auth-divider {
  display: flex; align-items: center; gap: 12px; margin: 20px 0;
  font-size: 12px; color: var(--text-dim);
}
.auth-divider::before, .auth-divider::after {
  content: ''; flex: 1; height: 1px; background: rgba(255,255,255,0.08);
}
.auth-legal { font-size: 12px; color: var(--text-dim); text-align: center; margin-top: 16px; line-height: 1.5; }
.auth-legal a { color: var(--acid); text-decoration: none; }

/* Auth step indicator */
.auth-steps-bar { display: flex; gap: 8px; margin-bottom: 28px; }
.auth-steps-bar span {
  flex: 1; height: 3px; border-radius: 2px; background: rgba(255,255,255,0.1);
  transition: background 0.3s;
}
.auth-steps-bar span.done { background: var(--acid); }
.auth-steps-bar span.active { background: rgba(229,255,0,0.5); }

/* Photo capture mock */
.auth-photo-box {
  width: 180px; height: 180px; margin: 0 auto 20px;
  background: rgba(255,255,255,0.04); border: 2px dashed rgba(229,255,0,0.3);
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 64px; cursor: pointer; transition: border-color 0.2s;
  position: relative; overflow: hidden;
}
.auth-photo-box:hover { border-color: var(--acid); }
.auth-photo-box.captured { border-style: solid; border-color: var(--acid); }
.auth-photo-box .auth-photo-overlay {
  position: absolute; inset: 0; background: rgba(0,0,0,0.6);
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; font-weight: 700; color: var(--acid); opacity: 0; transition: opacity 0.2s;
}
.auth-photo-box:hover .auth-photo-overlay { opacity: 1; }
.auth-success-icon { font-size: 72px; text-align: center; margin-bottom: 16px; animation: pm-pop 0.5s cubic-bezier(0.175,0.885,0.32,1.275); }
.auth-success-title { font-size: 26px; font-weight: 900; text-align: center; margin-bottom: 8px; }
.auth-success-sub { font-size: 14px; color: var(--text-mid); text-align: center; line-height: 1.6; margin-bottom: 24px; }
.auth-verified-badge {
  display: inline-flex; align-items: center; gap: 8px;
  background: rgba(229,255,0,0.1); border: 1px solid rgba(229,255,0,0.3);
  border-radius: 10px; padding: 10px 16px; font-size: 13px; font-weight: 700;
  color: var(--acid); margin: 0 auto 24px; display: flex; justify-content: center;
}

/* ═══════════════════════════════════════════
   MY TICKETS VIEW (v-mis-entradas)
   ═══════════════════════════════════════════ */
.mt-view { min-height: 100vh; padding: 0 0 80px; max-width: 760px; margin: 0 auto; }
.mt-header {
  padding: 32px 32px 0; display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 0;
}
.mt-header-left h1 { font-size: 32px; font-weight: 900; letter-spacing: -1px; }
.mt-header-left p { font-size: 14px; color: var(--text-mid); margin-top: 4px; }
.mt-header-right { display: flex; gap: 12px; align-items: center; }
.mt-filter-tabs {
  display: flex; gap: 0; padding: 24px 32px 0; border-bottom: 1px solid rgba(255,255,255,0.08);
}
.mt-tab {
  padding: 12px 20px; font-size: 14px; font-weight: 700; color: var(--text-dim);
  cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; white-space: nowrap;
}
.mt-tab.active { color: #fff; border-bottom-color: var(--acid); }
.mt-tab-count {
  display: inline-flex; align-items: center; justify-content: center;
  background: rgba(229,255,0,0.15); color: var(--acid);
  border-radius: 10px; padding: 2px 7px; font-size: 11px; font-weight: 800; margin-left: 6px;
}
.mt-panel { display: none; padding: 24px 32px; }
.mt-panel.active { display: block; }

/* Ticket cards */
.mt-ticket {
  background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 20px; overflow: hidden; margin-bottom: 16px;
  transition: border-color 0.2s;
}
.mt-ticket:hover { border-color: rgba(229,255,0,0.2); }
.mt-ticket-head {
  display: flex; align-items: center; gap: 0; cursor: pointer; padding: 0;
}
.mt-ticket-img {
  width: 100px; height: 100px; flex-shrink: 0;
  background-size: cover; background-position: center;
}
.mt-ticket-info { flex: 1; padding: 16px 20px; }
.mt-ticket-event { font-size: 16px; font-weight: 800; margin-bottom: 4px; }
.mt-ticket-meta { font-size: 13px; color: var(--text-dim); margin-bottom: 8px; }
.mt-ticket-tags { display: flex; gap: 8px; flex-wrap: wrap; }
.mt-ticket-tag {
  font-size: 11px; font-weight: 700; padding: 3px 10px; border-radius: 6px;
  letter-spacing: 0.06em;
}
.mt-ticket-tag.upcoming { background: rgba(229,255,0,0.12); color: var(--acid); }
.mt-ticket-tag.attended { background: rgba(255,255,255,0.06); color: var(--text-mid); }
.mt-ticket-tag.resale { background: rgba(255,165,0,0.15); color: #ffa500; }
.mt-ticket-tag.tier { background: rgba(255,255,255,0.06); color: var(--text-mid); }
.mt-ticket-right { padding: 16px 20px; display: flex; flex-direction: column; align-items: flex-end; gap: 8px; flex-shrink: 0; }
.mt-ticket-price { font-size: 18px; font-weight: 800; color: var(--acid); }
.mt-ticket-actions { display: flex; gap: 8px; }
.mt-ticket-btn {
  padding: 8px 14px; border-radius: 8px; font-size: 12px; font-weight: 700;
  font-family: 'Sora', sans-serif; cursor: pointer; border: none; transition: all 0.2s;
}
.mt-ticket-btn.primary { background: var(--acid); color: var(--bg); }
.mt-ticket-btn.ghost { background: rgba(255,255,255,0.06); color: var(--text-mid); border: 1px solid rgba(255,255,255,0.1); }
.mt-ticket-btn.ghost:hover { background: rgba(255,255,255,0.1); color: #fff; }

/* Digital ticket expand */
.mt-ticket-expand {
  display: none; border-top: 1px solid rgba(255,255,255,0.08);
  padding: 24px;
}
.mt-ticket-expand.open { display: block; }
.mt-digital-ticket {
  background: linear-gradient(135deg, #111 0%, #0d1a00 50%, #111 100%);
  border: 1.5px solid rgba(229,255,0,0.35); border-radius: 20px;
  padding: 28px; max-width: 360px; margin: 0 auto; position: relative; overflow: hidden;
}
.mt-digital-ticket::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: linear-gradient(90deg, transparent, var(--acid), transparent);
}
/* Tear line */
.mt-tear-line {
  display: flex; align-items: center; margin: 20px 0;
  position: relative;
}
.mt-tear-line::before {
  content: ''; position: absolute; left: -28px; right: -28px;
  border-top: 1px dashed rgba(255,255,255,0.15);
}
.mt-tear-dot { width: 20px; height: 20px; background: var(--bg); border-radius: 50%; flex-shrink: 0; }
.mt-tear-dot:last-child { margin-left: auto; }
.mt-dt-event { font-size: 12px; font-weight: 700; color: var(--acid); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 4px; }
.mt-dt-name { font-size: 22px; font-weight: 900; margin-bottom: 20px; line-height: 1.2; }
.mt-dt-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 20px; }
.mt-dt-field label { font-size: 10px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.08em; display: block; margin-bottom: 2px; }
.mt-dt-field span { font-size: 13px; font-weight: 700; }
.mt-qr-area { text-align: center; }
.mt-qr-emoji { font-size: 80px; display: block; filter: grayscale(0.1); }
.mt-qr-label { font-size: 11px; color: var(--text-dim); margin-top: 4px; }
.mt-dt-footer { display: flex; align-items: center; justify-content: space-between; margin-top: 16px; }
.mt-dt-verified { display: flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 700; color: var(--acid); }
.mt-dt-id { font-size: 11px; color: var(--text-dim); font-family: monospace; }
.mt-ticket-share { display: flex; gap: 10px; margin-top: 16px; }
.mt-share-btn {
  flex: 1; padding: 10px; background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1); border-radius: 10px;
  font-size: 13px; font-weight: 600; text-align: center; cursor: pointer; color: var(--text-mid);
  font-family: 'Sora', sans-serif; transition: all 0.2s;
}
.mt-share-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }

/* Empty state */
.mt-empty {
  text-align: center; padding: 60px 24px; color: var(--text-dim);
}
.mt-empty-icon { font-size: 64px; margin-bottom: 16px; }
.mt-empty-text { font-size: 18px; font-weight: 700; margin-bottom: 8px; color: var(--text-mid); }
.mt-empty-sub { font-size: 14px; line-height: 1.6; }

/* ═══════════════════════════════════════════
   ORGANIZER DASHBOARD (v-organizer)
   ═══════════════════════════════════════════ */
.og-view { min-height: 100vh; padding: 0 0 80px; }
.og-header { padding: 32px 32px 24px; border-bottom: 1px solid rgba(255,255,255,0.08); }
.og-header-top { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 8px; }
.og-header h1 { font-size: 28px; font-weight: 900; letter-spacing: -1px; }
.og-header p { font-size: 14px; color: var(--text-mid); margin-top: 4px; }
.og-badge {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(229,255,0,0.1); border: 1px solid rgba(229,255,0,0.25);
  border-radius: 8px; padding: 6px 12px; font-size: 12px; font-weight: 700; color: var(--acid);
}
.og-btn-new {
  background: var(--acid); color: var(--bg); border: none; border-radius: 10px;
  padding: 10px 18px; font-size: 13px; font-weight: 800; font-family: 'Sora', sans-serif;
  cursor: pointer; transition: transform 0.15s;
}
.og-btn-new:hover { transform: translateY(-1px); }

/* Metric cards */
.og-metrics { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; padding: 24px 32px; }
.og-metric {
  background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px; padding: 20px;
}
.og-metric-label { font-size: 12px; color: var(--text-dim); font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 8px; }
.og-metric-value { font-size: 32px; font-weight: 900; letter-spacing: -1px; margin-bottom: 4px; }
.og-metric-value.acid { color: var(--acid); }
.og-metric-change { font-size: 12px; color: var(--text-dim); }
.og-metric-change.up { color: #4ade80; }
.og-metric-change.down { color: #f87171; }

/* Events managed */
.og-section { padding: 0 32px 24px; }
.og-section-title { font-size: 18px; font-weight: 800; margin-bottom: 16px; display: flex; align-items: center; justify-content: space-between; }
.og-section-title a { font-size: 13px; font-weight: 600; color: var(--text-dim); text-decoration: none; cursor: pointer; }
.og-section-title a:hover { color: var(--acid); }
.og-events { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 8px; }
.og-event-card {
  background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px; overflow: hidden; cursor: pointer; transition: border-color 0.2s;
}
.og-event-card:hover { border-color: rgba(229,255,0,0.25); }
.og-event-img { height: 120px; background-size: cover; background-position: center; position: relative; }
.og-event-status {
  position: absolute; top: 12px; right: 12px;
  background: rgba(0,0,0,0.7); border: 1px solid rgba(229,255,0,0.4);
  border-radius: 6px; padding: 4px 10px; font-size: 11px; font-weight: 700; color: var(--acid);
}
.og-event-body { padding: 16px; }
.og-event-name { font-size: 16px; font-weight: 800; margin-bottom: 4px; }
.og-event-meta { font-size: 12px; color: var(--text-dim); margin-bottom: 12px; }
.og-event-bar { height: 4px; background: rgba(255,255,255,0.08); border-radius: 2px; margin-bottom: 8px; }
.og-event-bar-fill { height: 100%; background: var(--acid); border-radius: 2px; }
.og-event-sell { font-size: 12px; color: var(--text-dim); display: flex; justify-content: space-between; }
.og-event-sell strong { color: #fff; }
.og-event-actions { display: flex; gap: 8px; padding: 12px 16px 16px; border-top: 1px solid rgba(255,255,255,0.06); }
.og-act-btn {
  flex: 1; padding: 8px; border-radius: 8px; border: none; font-size: 12px; font-weight: 700;
  font-family: 'Sora', sans-serif; cursor: pointer; text-align: center;
}
.og-act-btn.primary { background: var(--acid); color: var(--bg); }
.og-act-btn.ghost { background: rgba(255,255,255,0.06); color: var(--text-mid); }
.og-act-btn.ghost:hover { background: rgba(255,255,255,0.1); color: #fff; }

/* Attendee table */
.og-table { width: 100%; border-collapse: collapse; }
.og-table th {
  text-align: left; padding: 10px 16px; font-size: 11px; font-weight: 700;
  color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.06em;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.og-table td { padding: 14px 16px; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.04); }
.og-table tr:last-child td { border-bottom: none; }
.og-table tbody tr:hover { background: rgba(255,255,255,0.02); }
.og-attendee-name { font-weight: 700; margin-bottom: 2px; }
.og-attendee-dni { font-size: 12px; color: var(--text-dim); font-family: monospace; }
.og-status-pill {
  display: inline-flex; align-items: center; gap: 5px; padding: 4px 10px;
  border-radius: 20px; font-size: 11px; font-weight: 700;
}
.og-status-pill.checked { background: rgba(74,222,128,0.15); color: #4ade80; }
.og-status-pill.pending { background: rgba(229,255,0,0.1); color: var(--acid); }
.og-status-pill.resale { background: rgba(255,165,0,0.15); color: #ffa500; }
.og-table-wrap { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; overflow: hidden; }
.og-table-head { padding: 16px 16px 0; display: flex; align-items: center; justify-content: space-between; }
.og-table-head-title { font-size: 15px; font-weight: 700; }
.og-search-mini {
  background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px; padding: 8px 14px; font-size: 13px; color: #fff;
  font-family: 'Sora', sans-serif; outline: none; width: 200px;
}
.og-search-mini::placeholder { color: rgba(255,255,255,0.3); }

/* Revenue chart bars */
.og-chart { display: flex; align-items: flex-end; gap: 8px; height: 80px; padding: 0 0 0; margin-bottom: 8px; }
.og-bar { flex: 1; background: rgba(229,255,0,0.15); border-radius: 4px 4px 0 0; border: 1px solid rgba(229,255,0,0.2); transition: background 0.2s; }
.og-bar:hover { background: rgba(229,255,0,0.4); }
.og-bar.highlight { background: var(--acid); }
.og-chart-labels { display: flex; gap: 8px; }
.og-chart-label { flex: 1; text-align: center; font-size: 10px; color: var(--text-dim); }

/* ═══════════════════════════════════════════
   EVENT FORM (v-event-form)
   ═══════════════════════════════════════════ */
.ef-view { min-height: 100vh; padding: 32px; max-width: 860px; margin: 0 auto; }
.ef-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 32px; }
.ef-header h1 { font-size: 24px; font-weight: 900; }
.ef-back { background: none; border: 1px solid rgba(255,255,255,0.12); color: var(--text-mid); border-radius: 8px; padding: 8px 16px; font-size: 13px; font-weight: 700; cursor: pointer; font-family: inherit; }
.ef-back:hover { border-color: rgba(255,255,255,0.25); color: #fff; }
.ef-section { margin-bottom: 28px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; padding: 24px; }
.ef-section-title { font-size: 14px; font-weight: 800; color: var(--acid); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 16px; }
.ef-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px; }
.ef-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 12px; }
.ef-field { display: flex; flex-direction: column; gap: 6px; }
.ef-field.full { grid-column: 1 / -1; }
.ef-label { font-size: 11px; font-weight: 700; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em; }
.ef-input, .ef-select, .ef-textarea {
  background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 10px; padding: 12px 14px; font-size: 14px; color: #fff;
  font-family: 'Sora', sans-serif; outline: none; transition: border-color 0.2s;
}
.ef-input:focus, .ef-select:focus, .ef-textarea:focus { border-color: var(--acid); }
.ef-textarea { min-height: 80px; resize: vertical; }
.ef-select { cursor: pointer; }
.ef-select option { background: #1a1a1a; }

/* Lineup artist rows */
.ef-artist-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.ef-artist-row input { flex: 1; }
.ef-remove-btn { background: rgba(255,77,77,0.15); color: #ff4d4d; border: none; border-radius: 8px; width: 36px; height: 36px; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.ef-remove-btn:hover { background: rgba(255,77,77,0.3); }
.ef-add-btn { background: rgba(229,255,0,0.08); color: var(--acid); border: 1px dashed rgba(229,255,0,0.3); border-radius: 10px; padding: 10px 16px; font-size: 13px; font-weight: 700; cursor: pointer; font-family: inherit; width: 100%; text-align: center; margin-top: 8px; }
.ef-add-btn:hover { background: rgba(229,255,0,0.15); border-style: solid; }

/* Ticket tier cards */
.ef-tier { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 14px; padding: 20px; margin-bottom: 16px; }
.ef-tier-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.ef-tier-num { font-size: 12px; font-weight: 800; color: var(--acid); text-transform: uppercase; letter-spacing: 0.06em; }
.ef-phase-row { display: grid; grid-template-columns: 1fr 130px 100px 80px 36px; gap: 8px; margin-bottom: 8px; align-items: center; }
.ef-phase-labels { display: grid; grid-template-columns: 1fr 130px 100px 80px 36px; gap: 8px; margin-bottom: 6px; }
.ef-phase-labels span { font-size: 10px; font-weight: 700; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em; }
.ef-includes-input { width: 100%; }

/* Gross margin box */
.ef-margin { margin-top: 16px; background: rgba(74,222,128,0.06); border: 1px solid rgba(74,222,128,0.15); border-radius: 10px; padding: 14px 16px; }
.ef-margin-title { font-size: 11px; font-weight: 800; color: #4ade80; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 8px; }
.ef-margin-row { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 4px; }
.ef-margin-row .label { color: var(--text-mid); }
.ef-margin-row .value { font-weight: 700; color: var(--text); }
.ef-margin-row.total .value { color: #4ade80; font-size: 15px; }

/* Actions bar */
.ef-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 32px; padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.08); }
.ef-btn-save { background: var(--acid); color: #000; border: none; border-radius: 10px; padding: 14px 32px; font-size: 14px; font-weight: 800; cursor: pointer; font-family: inherit; }
.ef-btn-save:hover { filter: brightness(1.1); }
.ef-btn-cancel { background: none; border: 1px solid rgba(255,255,255,0.12); color: var(--text-mid); border-radius: 10px; padding: 14px 24px; font-size: 14px; font-weight: 700; cursor: pointer; font-family: inherit; }

.ef-toggle-label { display:flex; align-items:center; gap:8px; font-size:13px; color:var(--text-main); cursor:pointer; padding:8px 12px; border-radius:8px; background:rgba(255,255,255,0.04); }
.ef-toggle-label input[type="checkbox"] { accent-color: var(--acid); width:16px; height:16px; cursor:pointer; }
.ef-toggle-label input[type="checkbox"]:disabled { opacity:0.4; cursor:default; }

/* Responsive */
@media (max-width: 768px) {
  .ef-view { padding: 16px; }
  .ef-row, .ef-row-3 { grid-template-columns: 1fr; }
  .ef-phase-row { grid-template-columns: 1fr 100px 80px 70px 36px; }
  .ef-phase-labels { grid-template-columns: 1fr 100px 80px 70px 36px; }
}

/* ═══════════════════════════════════════════
   NOTIFICATION PANEL
   ═══════════════════════════════════════════ */
.notif-overlay {
  position: fixed; inset: 0; z-index: 8000;
  background: rgba(0,0,0,0.5);
  opacity: 0; pointer-events: none; transition: opacity 0.25s;
}
.notif-overlay.open { opacity: 1; pointer-events: all; }
.notif-panel {
  position: fixed; top: 0; right: 0; bottom: 0; width: 380px; max-width: 100vw;
  background: #111; border-left: 1px solid rgba(255,255,255,0.08);
  transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.25,0.46,0.45,0.94);
  overflow-y: auto; z-index: 8001;
}
.notif-overlay.open .notif-panel { transform: translateX(0); }
.notif-header {
  padding: 24px; display: flex; align-items: center; justify-content: space-between;
  border-bottom: 1px solid rgba(255,255,255,0.08); position: sticky; top: 0;
  background: #111; z-index: 1;
}
.notif-header h2 { font-size: 18px; font-weight: 800; }
.notif-close { background: rgba(255,255,255,0.08); border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; color: #fff; font-size: 16px; display: flex; align-items: center; justify-content: center; }
.notif-close:hover { background: rgba(255,255,255,0.15); }
.notif-mark-all { font-size: 12px; font-weight: 600; color: var(--acid); background: none; border: none; cursor: pointer; font-family: 'Sora', sans-serif; }
.notif-item {
  display: flex; align-items: flex-start; gap: 14px; padding: 16px 24px;
  border-bottom: 1px solid rgba(255,255,255,0.04); cursor: pointer; transition: background 0.15s;
}
.notif-item:hover { background: rgba(255,255,255,0.02); }
.notif-item.unread { background: rgba(229,255,0,0.03); }
.notif-item-icon { font-size: 28px; flex-shrink: 0; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.05); border-radius: 50%; }
.notif-item-body { flex: 1; }
.notif-item-title { font-size: 14px; font-weight: 700; margin-bottom: 2px; }
.notif-item-text { font-size: 13px; color: var(--text-mid); line-height: 1.4; margin-bottom: 6px; }
.notif-item-time { font-size: 11px; color: var(--text-dim); }
.notif-unread-dot { width: 8px; height: 8px; background: var(--acid); border-radius: 50%; flex-shrink: 0; margin-top: 6px; }
.notif-section-label { padding: 12px 24px 6px; font-size: 11px; font-weight: 700; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.08em; }
.notif-bell {
  position: relative; cursor: pointer; padding: 6px;
  background: rgba(255,255,255,0.06); border-radius: 10px; font-size: 18px;
  border: none; color: #fff; display: flex; align-items: center; justify-content: center;
}
.notif-bell .notif-badge {
  position: absolute; top: -4px; right: -4px; width: 16px; height: 16px;
  background: var(--acid); border-radius: 50%; font-size: 9px; font-weight: 800;
  color: var(--bg); display: flex; align-items: center; justify-content: center;
}

/* ═══════════════════════════════════════════
   RESALE MODAL
   ═══════════════════════════════════════════ */
.resale-overlay {
  position: fixed; inset: 0; z-index: 9001;
  background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
  display: flex; align-items: flex-end; justify-content: center;
  opacity: 0; pointer-events: none; transition: opacity 0.3s;
}
.resale-overlay.open { opacity: 1; pointer-events: all; }
.resale-sheet {
  width: 100%; max-width: 520px; background: #111;
  border-radius: 28px 28px 0 0; border: 1px solid rgba(255,255,255,0.1); border-bottom: none;
  padding: 20px 28px 40px;
  transform: translateY(40px); transition: transform 0.35s cubic-bezier(0.25,0.46,0.45,0.94);
}
.resale-overlay.open .resale-sheet { transform: translateY(0); }
.resale-handle { width: 40px; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; margin: 0 auto 24px; }
.resale-title { font-size: 22px; font-weight: 900; margin-bottom: 6px; }
.resale-sub { font-size: 14px; color: var(--text-mid); margin-bottom: 24px; }
.resale-ticket-preview {
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 14px; padding: 14px 18px; margin-bottom: 20px;
  display: flex; align-items: center; gap: 14px;
}
.resale-ticket-preview .rtp-icon { font-size: 28px; }
.resale-ticket-preview .rtp-info h3 { font-size: 15px; font-weight: 700; margin-bottom: 2px; }
.resale-ticket-preview .rtp-info p { font-size: 12px; color: var(--text-dim); }
.resale-price-section { margin-bottom: 16px; }
.resale-price-label { font-size: 12px; font-weight: 700; color: var(--text-dim); letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 8px; }
.resale-price-input-wrap {
  display: flex; align-items: center; background: rgba(255,255,255,0.06);
  border: 1.5px solid rgba(255,255,255,0.15); border-radius: 12px; overflow: hidden;
}
.resale-price-input-wrap:focus-within { border-color: rgba(229,255,0,0.5); }
.resale-currency { padding: 14px 16px; font-size: 16px; font-weight: 700; color: var(--acid); background: rgba(229,255,0,0.06); border-right: 1px solid rgba(255,255,255,0.08); }
.resale-price-input {
  flex: 1; background: none; border: none; outline: none; padding: 14px 16px;
  font-size: 24px; font-weight: 800; color: #fff; font-family: 'Sora', sans-serif; width: 100%;
}
.resale-price-hints { display: flex; gap: 8px; margin-top: 8px; }
.resale-hint-btn {
  padding: 6px 12px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px; font-size: 12px; font-weight: 600; color: var(--text-mid);
  cursor: pointer; font-family: 'Sora', sans-serif;
}
.resale-hint-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }
.resale-info-row { display: flex; justify-content: space-between; font-size: 13px; padding: 6px 0; color: var(--text-mid); }
.resale-info-row strong { color: #fff; }
.resale-divider { border: none; border-top: 1px solid rgba(255,255,255,0.08); margin: 12px 0; }
.resale-total { display: flex; justify-content: space-between; font-size: 16px; font-weight: 800; }
.resale-total span:last-child { color: var(--acid); }
.resale-terms { display: flex; align-items: flex-start; gap: 10px; padding: 14px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; margin-bottom: 20px; cursor: pointer; }
.resale-terms input[type="checkbox"] { margin-top: 1px; accent-color: var(--acid); cursor: pointer; }
.resale-terms label { font-size: 12px; color: var(--text-dim); line-height: 1.5; cursor: pointer; }
.resale-btn { width: 100%; background: var(--acid); color: var(--bg); border: none; border-radius: 14px; padding: 18px; font-size: 15px; font-weight: 800; font-family: 'Sora', sans-serif; cursor: pointer; transition: transform 0.15s; }
.resale-btn:hover { transform: translateY(-1px); }
.resale-cancel { width: 100%; background: transparent; color: var(--text-dim); border: none; padding: 12px; font-size: 14px; cursor: pointer; font-family: 'Sora', sans-serif; margin-top: 6px; }

/* ═══════════════════════════════════════════
   SCANNER RESULT OVERLAY
   ═══════════════════════════════════════════ */
.scan-result-overlay {
  position: fixed; inset: 0; z-index: 9002;
  display: flex; align-items: center; justify-content: center; padding: 24px;
  opacity: 0; pointer-events: none; transition: opacity 0.25s;
}
.scan-result-overlay.open { opacity: 1; pointer-events: all; }
.scan-result-bg {
  position: absolute; inset: 0; background: rgba(0,0,0,0.9);
}
.scan-result-card {
  position: relative; z-index: 1; width: 100%; max-width: 400px;
  background: #111; border-radius: 28px; padding: 40px 32px; text-align: center;
  border: 2px solid rgba(255,255,255,0.1);
  animation: pm-pop 0.35s cubic-bezier(0.175,0.885,0.32,1.275);
}
.scan-result-card.approved { border-color: rgba(74,222,128,0.5); }
.scan-result-card.denied { border-color: rgba(248,113,113,0.5); }
.scan-result-icon { font-size: 80px; margin-bottom: 16px; display: block; }
.scan-result-status {
  font-size: 24px; font-weight: 900; margin-bottom: 6px; letter-spacing: -0.5px;
}
.scan-result-status.approved { color: #4ade80; }
.scan-result-status.denied { color: #f87171; }
.scan-result-name { font-size: 20px; font-weight: 800; margin-bottom: 4px; }
.scan-result-detail { font-size: 14px; color: var(--text-mid); margin-bottom: 24px; }
.scan-result-info {
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px; padding: 16px; margin-bottom: 24px; text-align: left;
}
.scan-result-row { display: flex; justify-content: space-between; font-size: 13px; padding: 5px 0; }
.scan-result-row span:first-child { color: var(--text-dim); }
.scan-result-row span:last-child { font-weight: 700; }
.scan-next-btn {
  width: 100%; padding: 16px; border-radius: 14px; border: none; font-size: 15px; font-weight: 800;
  font-family: 'Sora', sans-serif; cursor: pointer;
}
.scan-next-btn.approved { background: #4ade80; color: #000; }
.scan-next-btn.denied { background: #f87171; color: #000; }

/* Responsive for new views */
@media (max-width: 768px) {
  .og-metrics { grid-template-columns: repeat(2, 1fr); }
  .og-events { grid-template-columns: 1fr; }
  .og-section { padding: 0 16px 24px; }
  .og-header { padding: 24px 16px 16px; }
  .og-metrics { padding: 16px; }
  .mt-header { padding: 24px 16px 0; }
  .mt-filter-tabs { padding: 16px 16px 0; }
  .mt-panel { padding: 16px; }
  .mt-ticket-img { width: 80px; height: 80px; }
  .notif-panel { width: 100vw; }
  .auth-card { border-radius: 0; border-left: none; border-right: none; }
  .auth-view { padding: 24px 0; }
}
@media (max-width: 480px) {
  .og-metrics { grid-template-columns: 1fr 1fr; gap: 10px; }
  .mt-ticket-head { flex-direction: column; }
  .mt-ticket-img { width: 100%; height: 120px; }
  .mt-ticket-right { align-items: flex-start; padding: 0 16px 16px; }
  .mt-ticket-actions { flex-wrap: wrap; }
}

  /* ─── Nav Profile Dropdown ─── */
  .nav-user { position: relative; }
  .nav-dropdown {
    position: fixed; top: 72px; right: 16px;
    width: 230px; background: #1c1c1c;
    border: 1px solid rgba(255,255,255,0.1); border-radius: 18px;
    padding: 8px; z-index: 99999;
    opacity: 0; pointer-events: none; transform: translateY(-8px);
    transition: opacity 0.18s ease, transform 0.18s ease;
    box-shadow: 0 24px 64px rgba(0,0,0,0.7);
  }
  .nav-dropdown.open { opacity: 1; pointer-events: all; transform: translateY(0); }
  .nd-item {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 12px; border-radius: 11px; cursor: pointer;
    font-size: 14px; color: var(--text-mid); transition: background 0.15s, color 0.15s;
    user-select: none;
  }
  .nd-item:hover { background: rgba(255,255,255,0.07); color: #fff; }
  .nd-icon { width: 22px; text-align: center; font-size: 15px; flex-shrink: 0; }
  .nd-divider { height: 1px; background: rgba(255,255,255,0.08); margin: 5px 2px; }
  .nd-item.danger { color: #f87171; }
  .nd-item.danger:hover { background: rgba(248,113,113,0.1); color: #f87171; }
  .nd-toggle {
    margin-left: auto; width: 36px; height: 20px;
    background: rgba(255,255,255,0.1); border-radius: 10px;
    position: relative; transition: background 0.2s; flex-shrink: 0;
  }
  .nd-toggle.on { background: var(--acid); }
  .nd-toggle::after {
    content: ''; position: absolute; top: 2px; left: 2px;
    width: 16px; height: 16px; background: #fff; border-radius: 50%;
    transition: transform 0.2s; box-shadow: 0 1px 4px rgba(0,0,0,0.3);
  }
  .nd-toggle.on::after { transform: translateX(16px); }
  .nd-lang-badge {
    margin-left: auto; font-size: 11px; font-weight: 800;
    color: var(--acid); letter-spacing: 0.06em;
  }
  /* dark mode overrides */
  body.light-mode { --bg: #f4f4f0; --text: #111; --text-mid: #444; --text-dim: #888; }
  body.light-mode .nav-dropdown { background: #fff; border-color: rgba(0,0,0,0.1); box-shadow: 0 24px 64px rgba(0,0,0,0.12); }
  body.light-mode .nd-item { color: #555; }
  body.light-mode .nd-item:hover { background: rgba(0,0,0,0.05); color: #111; }
  body.light-mode .nd-divider { background: rgba(0,0,0,0.08); }

</style>
</head>
<body>

<!-- ═══════════════════════════════════════════
     MAIN NAVIGATION
     ═══════════════════════════════════════════ -->
<nav class="main-nav">
  <div class="main-nav-inner">
    <div class="nav-logo" onclick="go('eventos')">LEZGO</div>
    <div class="nav-categories">
      <div class="nav-cat active" onclick="go('eventos')" data-es="Eventos" data-en="Events">Eventos</div>
      <div class="nav-cat" onclick="go('fans')" data-es="Para Fans" data-en="For Fans">Para Fans</div>
      <div class="nav-cat" onclick="go('promotores')" data-es="Para Promotores" data-en="For Promoters">Para Promotores</div>
      <div class="nav-cat" onclick="go('marketplace')" data-es="Marketplace" data-en="Marketplace">Marketplace</div>
      <div class="nav-cat" onclick="go('deck')" data-es="Deck" data-en="Deck">Deck</div>
    </div>
    <div class="nav-right">
      <div class="nav-user" onclick="ndToggle(event)">
        <div class="nav-avatar">ML</div>
        <span class="nav-username">Mario</span>
        <div class="nav-dropdown" id="nav-dropdown" onclick="event.stopPropagation()">
          <!-- Logged-in items -->
          <div class="nd-item nd-logged-in" onclick="ndGo('perfil')">
            <span class="nd-icon">👤</span> <span data-es="Mi Perfil" data-en="My Profile">Mi Perfil</span>
          </div>
          <div class="nd-item nd-logged-in" onclick="ndGo('mis-entradas')">
            <span class="nd-icon">🎟️</span> <span data-es="Mis Entradas" data-en="My Tickets">Mis Entradas</span>
          </div>
          <div class="nd-item nd-logged-in nd-promoter-only" onclick="ndGo('organizer')">
            <span class="nd-icon">📊</span> <span data-es="Dashboard Organizador" data-en="Organizer Dashboard">Dashboard Organizador</span>
          </div>
          <div class="nd-item nd-logged-in" onclick="ndGo('scanner')">
            <span class="nd-icon">📡</span> <span data-es="Scanner" data-en="Scanner">Scanner</span>
          </div>
          <div class="nd-divider nd-logged-in"></div>
          <!-- Always visible -->
          <div class="nd-item" onclick="ndToggleLang(event)">
            <span class="nd-icon">🌐</span> <span data-es="Idioma" data-en="Language">Idioma</span>
            <div style="margin-left:auto;display:flex;gap:4px;align-items:center;">
              <span id="nd-lang-es" style="font-size:11px;font-weight:800;padding:3px 7px;border-radius:6px;background:var(--acid);color:#000;">ES</span>
              <span id="nd-lang-en" style="font-size:11px;font-weight:800;padding:3px 7px;border-radius:6px;background:rgba(255,255,255,0.08);color:var(--text-dim);">EN</span>
            </div>
          </div>
          <div class="nd-divider"></div>
          <!-- Logged-out: login -->
          <div class="nd-item nd-logged-out" onclick="authGoogleLogin()">
            <span class="nd-icon">🔑</span> <span data-es="Iniciar sesión con Google" data-en="Sign in with Google">Iniciar sesión con Google</span>
          </div>
          <!-- Logged-in: logout -->
          <div class="nd-item danger nd-logged-in" onclick="authLogout()">
            <span class="nd-icon">🚪</span> <span data-es="Cerrar sesión" data-en="Sign out">Cerrar sesión</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>


<!-- ═══════════════════════════════════════════
     VIEW 1: EVENTOS (Home)
     ═══════════════════════════════════════════ -->
<div id="v-eventos" class="view active">

  <!-- Marquee -->
  <div class="marquee">
    <div class="marquee-track">
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
    </div>
  </div>

  <!-- Hero -->
  <section class="hero" id="home-hero">
    <div class="hero-video-wrap" id="hero-video-wrap">
      <!-- Populated by renderHero(): YouTube iframe or fallback image -->
    </div>
    <div class="hero-gradient"></div>
    <div class="hero-content" id="hero-content">
      <!-- Populated dynamically by renderHero() -->
    </div>
  </section>

  <!-- Search Bar -->
  <div class="search-section">
    <div class="search-bar">
      <div class="search-field" id="loc-field" onclick="toggleDropdown('loc')">
        <div class="search-field-label">Ubicación</div>
        <div class="search-field-value" id="loc-value">Lima, Perú</div>
        <div class="dropdown" id="loc-dropdown">
          <div class="dropdown-item selected" onclick="selectLoc(this, 'Lima, Perú')"><span class="dot"></span>Lima, Perú</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'Cerca de ti')"><span class="dot"></span>&#128205; Cerca de ti</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'Barranco')"><span class="dot"></span>Barranco</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'Miraflores')"><span class="dot"></span>Miraflores</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'San Isidro')"><span class="dot"></span>San Isidro</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'Surco')"><span class="dot"></span>Surco</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'Cercado de Lima')"><span class="dot"></span>Cercado de Lima</div>
          <div class="dropdown-item" onclick="selectLoc(this, 'Chorrillos')"><span class="dot"></span>Chorrillos</div>
        </div>
      </div>
      <div class="search-field" id="date-field" onclick="toggleDropdown('date')">
        <div class="search-field-label">Fechas</div>
        <div class="search-field-value" id="date-value">Todas las fechas</div>
        <div class="cal-dropdown" id="date-dropdown">
          <div class="cal-header">
            <button class="cal-nav" onclick="calNav(-1, event)">&#8249;</button>
            <span id="cal-month-label"></span>
            <button class="cal-nav" onclick="calNav(1, event)">&#8250;</button>
          </div>
          <div class="cal-grid" id="cal-grid"></div>
          <div class="cal-range-info" id="cal-range-info">
            <span id="cal-range-text">Selecciona una fecha o rango</span>
            <button class="cal-clear" onclick="calClear(event)">Limpiar</button>
          </div>
        </div>
      </div>
      <div class="search-field search-field-main" style="border-right:none;position:relative;">
        <div class="search-field-label">Buscar</div>
        <input class="search-field-value" id="search-text-input" type="text" placeholder="Artista, evento o venue..." autocomplete="off" oninput="searchAutocomplete(this.value)" onkeydown="searchKeydown(event)" style="background:transparent;border:none;outline:none;color:var(--text);font-size:15px;width:100%;font-family:inherit;">
        <div class="search-ac-dropdown" id="search-ac-dropdown"></div>
      </div>
      <button class="search-btn" onclick="doSearch()">Buscar</button>
    </div>
  </div>

  <!-- Search Results (hidden by default) -->
  <div class="search-results-banner" id="search-results">
    <div class="srb-header">
      <div class="srb-title" id="srb-title">Resultados</div>
      <button class="srb-clear" onclick="clearSearch()">Limpiar búsqueda</button>
    </div>
    <div class="srb-grid" id="srb-grid"></div>
  </div>



  <!-- Content -->
  <div class="content">

    <!-- Promo Cards (dynamic) -->
    <div class="section-head">
      <h2 class="section-title">No te los pierdas</h2>
    </div>
    <div class="promo-grid" id="promo-grid">
      <!-- Populated dynamically by renderPromoCards() -->
    </div>

    <!-- ID Banner -->
    <div class="id-banner">
      <div class="id-banner-icon"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span></div>
      <p>Cada entrada en Lezgo está vinculada a tu DNI, carnet de extranjería o pasaporte.<br>Escanea tu identificación en la puerta y entra. Cero fraude.</p>
    </div>


    <!-- Próximos Eventos (dynamic) -->
    <div class="section-head">
      <h2 class="section-title">Próximos eventos</h2>
      <div style="display:flex;align-items:center;gap:12px;">
        <div class="view-toggle" id="ev-view-toggle">
          <button class="view-toggle-btn active" onclick="toggleEvView('grid')" title="Cuadrícula">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="1" width="6" height="6" rx="1"/><rect x="9" y="1" width="6" height="6" rx="1"/><rect x="1" y="9" width="6" height="6" rx="1"/><rect x="9" y="9" width="6" height="6" rx="1"/></svg>
          </button>
          <button class="view-toggle-btn" onclick="toggleEvView('list')" title="Por fecha">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="1" width="14" height="3" rx="1"/><rect x="1" y="6.5" width="14" height="3" rx="1"/><rect x="1" y="12" width="14" height="3" rx="1"/></svg>
          </button>
        </div>
        <span class="section-more">Ver todos →</span>
      </div>
    </div>
    <div class="events-grid active" id="ev-cards-grid">
      <!-- Populated dynamically by renderAllSections() -->
    </div>
    <div class="events-datelist" id="ev-datelist">
      <!-- Populated dynamically by renderDateList() -->
    </div>

    <!-- Más en Lima (dynamic) — only visible in grid view -->
    <div class="section-head" id="mas-lima-head">
      <h2 class="section-title">Más en Lima</h2>
      <span class="section-more">Ver todos →</span>
    </div>
    <div class="events-grid active" id="ev-cards-grid-2">
      <!-- Populated dynamically by renderAllSections() -->
    </div>
  </div>

  <!-- FAQ Plataforma -->
  <div class="faq-section">
    <div class="faq-section-title">// Preguntas frecuentes</div>
    <div class="faq-section-heading">Sobre Lezgo</div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Qué es Lezgo?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Lezgo es una plataforma de ticketing verificado para fiestas, conciertos y próximamente clubes. Cada entrada está vinculada a tu identidad, eliminando las reventas fraudulentas y asegurando que solo fans reales accedan a los eventos.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Cómo funciona la verificación de identidad?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Al crear tu cuenta, se vincula tu email y un documento de identidad (DNI, carnet de extranjería o pasaporte). Al momento de la compra, a cada entrada se le asigna un ID. El día del evento, se valida persona + ID para el ingreso. Si no puedes asistir, puedes revender tu entrada de forma segura a través del Marketplace.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿En qué ciudades opera Lezgo?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Empezamos en Lima, Perú. El plan es expandir a otras ciudades de Latinoamérica conforme crecemos.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Lezgo cobra comisión?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Cada evento maneja comisiones entre 8% y 10%. Parte de nuestra transparencia es desglosar todos los fees: impuestos, pasarelas de pago y comisión de plataforma. Siempre sabes exactamente a dónde va tu plata.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Puedo revender mi entrada?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Sí, pero a través de nuestro <a href="#marketplace" onclick="go('marketplace')" style="color:var(--acid);text-decoration:underline">Marketplace oficial</a>. Esto garantiza que cuentes con toda la información para una compra/venta segura y a precio justo, y que la entrada se transfiera al nuevo fan.</div></div>
    </div>
  </div>

  <!-- Email capture -->
  <div class="email-capture" id="email-capture-section">
    <h3>Estamos construyendo<br><span style="color:var(--acid);">algo distinto.</span></h3>
    <p>Lezgo es un proyecto independiente.<br>Estamos creando la plataforma para volver a confiar en los eventos.<br>Déjanos tu correo y te contamos cómo avanzamos.</p>
    <div class="email-capture-form" id="email-form">
      <input class="email-capture-input" type="email" id="email-input" placeholder="tu@correo.com">
      <button class="email-capture-btn" onclick="submitEmail()">Unirme</button>
    </div>
    <div class="email-capture-legal">Al suscribirte aceptas recibir máximo 1 correo por semana. <strong>Sin spam, nunca.</strong><br>Te puedes salir cuando quieras.</div>
    <div class="email-capture-ok" id="email-ok">Gracias por creer en el proyecto.<br>Te mantendremos al tanto.</div>
  </div>

  <!-- Footer -->
  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 2A: PARA ASISTENTES
     ═══════════════════════════════════════════ -->
<div id="v-fans" class="view">

  <!-- Marquee -->
  <div class="marquee" style="margin-top:0;">
    <div class="marquee-track">
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CERO ESTAFAS</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> TU ID = TU ENTRADA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENTA SEGURA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ESCANEA Y ENTRA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> P2P MARKETPLACE</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> VERIFICADO CON ID</span>
    </div>
  </div>


  <!-- Hero con Fake vs Real -->
  <section class="cf-hero" id="cf-hero">
    <div class="cf-glow cf-glow-1"></div>
    <div class="cf-glow cf-glow-2"></div>
    <div class="cf-hero-inner">
      <div>
        <div class="cf-hero-badge"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> BIENVENIDO AL FUTURO</div>
        <h1>
          <span class="outline">COMPRA</span>
          <span class="acid-text" id="glitch-target">
            <span class="cf-glitch-layer cf-glitch-pink" aria-hidden="true">TICKETS</span>
            <span class="cf-glitch-layer cf-glitch-cyan" aria-hidden="true">TICKETS</span>
            TICKETS
          </span>
          <span class="white-text">SIN MIEDO</span>
        </h1>
        <p class="cf-hero-text"><strong>Cero estafas. Cero reventas falsas.</strong></p>
        <div class="cf-btns">
          <button class="btn-acid" onclick="go('eventos')">Explorar Eventos</button>
          <button class="btn-border">¿Cómo funciona?</button>
        </div>
      </div>

      <!-- Tickets -->
      <div class="cf-tickets" id="cf-tickets">
        <div class="cf-ticket cf-ticket-fake" id="t-fake">
          <div class="gline gline-1"></div>
          <div class="gline gline-2"></div>
          <div class="gline gline-3"></div>
          <div class="cf-ticket-badge badge-fake">FALSO</div>
          <div class="cf-ticket-event">Bad Bunny — World Tour</div>
          <div class="cf-ticket-venue-sm">Estadio Nacional · 15 Mar 2026</div>
          <div class="cf-ticket-row">
            <div>
              <div class="cf-ticket-price-label">Precio Scammer</div>
              <div class="cf-ticket-price">S/450</div>
            </div>
            <div style="font-size:14px;color:rgba(255,255,255,0.4);text-align:right;">
              Precio real: <span style="text-decoration:line-through;">S/90</span>
            </div>
          </div>
          <div class="cf-ticket-qr">
            <div class="cf-qr-mini"></div>
            <span>QR INVALIDO — DATOS CORRUPTOS</span>
          </div>
        </div>

        <div class="cf-ticket cf-ticket-real" id="t-real">
          <div class="cf-ticket-badge badge-verified"><span><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span></span> VERIFICADO</div>
          <div class="cf-ticket-event">Bad Bunny — World Tour</div>
          <div class="cf-ticket-venue-sm">Estadio Nacional · 15 Mar 2026</div>
          <div class="cf-ticket-row">
            <div>
              <div class="cf-ticket-price-label">Precio Justo</div>
              <div class="cf-ticket-price">S/90</div>
            </div>
            <div style="font-size:12px;color:rgba(255,255,255,0.6);text-align:right;">
              Vinculado a:<br>
              <span style="color:var(--acid);font-weight:700;">Mario L. ✓</span>
            </div>
          </div>
          <div class="cf-ticket-qr">
            <div class="cf-qr-mini"><div class="cf-qr-inner"></div></div>
            <span>ID VERIFICADO — ENTRADA GARANTIZADA</span>
          </div>
        </div>
      </div>
    </div>
  </section>



  <!-- Para Fans -->
  <section class="cf-section">
    <div class="cf-section-label">// Para Fans</div>
    <h2 class="cf-section-title">Así funciona<br>para <span style="color:var(--acid);">ti.</span></h2>
    <p class="cf-section-text" style="white-space:nowrap;">Tres pasos. Sin complicaciones. Tu entrada está protegida por tu identidad.</p>
    <div class="dk-how-grid" style="margin-top:48px;">
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-1">
          <div class="dk-how-num">01</div>
          <div class="dk-how-logo">🎫</div>
          <h3>Compra tu<br>entrada</h3>
          <div class="dk-how-tooltip">Simple y seguro →</div>
        </div>
        <div class="dk-how-desc">Elige el evento, paga con tarjeta. <strong>Tu entrada queda vinculada a tu ID automáticamente.</strong></div>
      </div>
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-2">
          <div class="dk-how-num">02</div>
          <div class="dk-how-logo">🪪</div>
          <h3>Presenta tu<br>ID en puerta</h3>
          <div class="dk-how-tooltip">Zero fraude →</div>
        </div>
        <div class="dk-how-desc">Muestra tu ID, te toman una foto, y entras. <strong>Sin QR, sin screenshots, sin fraude.</strong></div>
      </div>
      <div class="dk-how-card" onclick="go('marketplace')">
        <div class="dk-how-inner dk-grad-3">
          <div class="dk-how-num">03</div>
          <div class="dk-how-logo" style="font-size:100px;">🔄</div>
          <h3>Revende<br>seguro</h3>
          <div class="dk-how-tooltip">P2P Marketplace →</div>
        </div>
        <div class="dk-how-desc">Publica tu ticket, indica el precio y <strong>otro fan podrá comprarlo dentro de Lezgo.</strong></div>
      </div>
    </div>
  </section>

  <!-- Beneficios para fans -->
  <section class="cf-section" style="border-top:1px solid var(--border);">
    <div class="cf-section-label">// Beneficios</div>
    <h2 class="cf-section-title">Obtén beneficios<br>por ser un <span style="color:var(--acid);">fan real.</span></h2>
    <p class="cf-section-text">Asistir tiene recompensas. Tu historial te abre puertas que otros no tienen.</p>
    <div class="cf-features">
      <div class="cf-feature">
        <div class="cf-feature-icon">🏆</div>
        <h3>Badges</h3>
        <p>Cada evento suma un badge a tu perfil. <strong>Tu historial musical, verificado y visible.</strong></p>
      </div>
      <div class="cf-feature">
        <div class="cf-feature-icon">⚡</div>
        <h3>Acceso anticipado</h3>
        <p>Más badges, más prioridad. <strong>Entras primero a la preventa, sin depender de la suerte.</strong></p>
      </div>
      <div class="cf-feature">
        <div class="cf-feature-icon">💎</div>
        <h3>Beneficios exclusivos</h3>
        <p>Descuentos, upgrades de zona y merch. <strong>Lo ganas asistiendo, no por sorteo.</strong></p>
      </div>
      <div class="cf-feature">
        <div class="cf-feature-icon">🎯</div>
        <h3>Perfil verificado</h3>
        <p>Tu identidad respaldada por tu historial real. <strong>Los promotores saben que eres un fan de verdad.</strong></p>
      </div>
    </div>
  </section>

  <!-- Nuestros Compromisos -->
  <section class="cf-section" id="cf-compromisos" style="border-top:1px solid var(--border);">
    <div class="cf-section-label">// Para los fans</div>
    <h2 class="cf-section-title">Nuestros compromisos<br>con <span style="color:var(--acid);">los fans.</span></h2>
    <p class="cf-section-text">Sabemos cómo funciona el ticketing en Perú. Por eso construimos Lezgo con reglas claras desde el día uno.</p>
    <div class="cf-compromisos">

      <div class="cf-compromiso">
        <div class="cf-compromiso-num">01 — CARGOS</div>
        <h4>Sinceridad en los cargos</h4>
        <p>Antes de pagar ves exactamente qué se cobra y por qué. Plataforma, verificación y procesamiento desglosados. Sin cargos sorpresa al final del checkout.</p>
        <span class="cf-compromiso-badge">Cargos visibles siempre</span>
      </div>

      <div class="cf-compromiso">
        <div class="cf-compromiso-num">02 — REVENTA</div>
        <h4>Transparencia en el marketplace</h4>
        <p>Todos los tickets en reventa están visibles en un solo lugar. Ves el <span class="cap">precio original vs. precio de reventa</span> de cada entrada antes de decidir. Sin mercado negro, sin intermediarios ocultos.</p>
        <span class="cf-compromiso-badge">Precios visibles para todos</span>
      </div>

      <div class="cf-compromiso">
        <div class="cf-compromiso-num">03 — PRIVACIDAD</div>
        <h4>Tu data no se vende. Nunca.</h4>
        <p>Tu ID y datos personales se usan exclusivamente para verificar tu identidad en la compra y en puerta. No los vendemos a marcas, promotores ni terceros. Punto.</p>
        <span class="cf-compromiso-badge">Datos solo para verificar</span>
      </div>

      <div class="cf-compromiso">
        <div class="cf-compromiso-num">04 — ANTI-SCALPING</div>
        <h4>Un ID, una entrada</h4>
        <p>Cada entrada está atada a un documento real. Un revendedor no puede comprar 50 entradas sin 50 identidades verificadas. Anti-scalping by design, no una promesa vacía.</p>
        <span class="cf-compromiso-badge">1 ID = 1 entrada</span>
      </div>

      <div class="cf-compromiso">
        <div class="cf-compromiso-num">05 — SOPORTE</div>
        <h4>Soporte real en menos de 24h</h4>
        <p>Si algo sale mal — pago duplicado, error de verificación, entrada que no aparece — respondemos en menos de <span class="cap">24 horas</span>. Una persona, no un bot.</p>
        <span class="cf-compromiso-badge">Respuesta &lt;24h</span>
      </div>

      <div class="cf-compromiso">
        <div class="cf-compromiso-num">06 — ESTÁNDARES</div>
        <h4>Estándares internacionales de transparencia</h4>
        <p>Nos alineamos con las mejores prácticas globales del ticketing: fees declarados antes del checkout, política de reembolso publicada y sin cambios de precio sorpresa. Lo que en otros países ya es norma, en Perú lo hacemos realidad.</p>
        <span class="cf-compromiso-badge">Estándares internacionales</span>
      </div>

    </div>
  </section>

  <!-- FAQ Fans -->
  <div class="faq-section">
    <div class="faq-section-title">// Preguntas frecuentes</div>
    <div class="faq-section-heading">Para asistentes</div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Cómo compro mi entrada?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Elige tu evento, selecciona el tipo de entrada y la cantidad, inicia sesión con tu email (magic link) o Google, y confirma tu compra. Tu entrada aparece automáticamente en "Mis Entradas".</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Qué necesito para entrar al evento?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Tu documento de identidad (DNI, carnet de extranjería o pasaporte) y tu celular con tu cuenta de Lezgo. En la puerta se valida persona + ID para el ingreso. No necesitas imprimir nada.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Qué pasa si no puedo ir al evento?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Puedes poner tu entrada a la venta en el <a href="#marketplace" onclick="go('marketplace')" style="color:var(--acid);text-decoration:underline">Marketplace de Lezgo</a>. Se transfiere al nuevo fan de forma segura. Con más fans usando la plataforma, entre todos podemos acabar con la reventa abusiva.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Mi entrada es transferible?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Solo a través del Marketplace oficial. No puedes pasar tu entrada a otra persona directamente porque cada entrada está vinculada a un ID verificado (DNI, carnet de extranjería o pasaporte).</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Qué tipo de eventos encuentro en Lezgo?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Fiestas, conciertos y próximamente clubes. Trabajamos con promotores verificados para garantizar la calidad de cada evento publicado en la plataforma.</div></div>
    </div>
  </div>

  <!-- Email Capture -->
  <div class="email-capture">
    <h3>Estamos construyendo<br><span style="color:var(--acid);">algo distinto.</span></h3>
    <p>Lezgo es un proyecto independiente.<br>Estamos creando la plataforma para volver a confiar en los eventos.<br>Déjanos tu correo y te contamos cómo avanzamos.</p>
    <div class="email-capture-form" id="email-form-asist">
      <input class="email-capture-input" type="email" id="email-input-asist" placeholder="tu@correo.com">
      <button class="email-capture-btn" onclick="asistSubmitEmail()">Unirme</button>
    </div>
    <div class="email-capture-legal">Al suscribirte aceptas recibir máximo 1 correo por semana. <strong>Sin spam, nunca.</strong><br>Te puedes salir cuando quieras.</div>
    <div class="email-capture-ok" id="email-ok-asist">Gracias por creer en el proyecto.<br>Te mantendremos al tanto.</div>
  </div>

  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 2B: PARA PROMOTORES
     ═══════════════════════════════════════════ -->
<div id="v-promotores" class="view">

  <!-- Marquee promotor -->
  <div class="marquee" style="margin-top:0;">
    <div class="marquee-track">
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CONTROL TOTAL</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENUE EN REVENTA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> DASHBOARD EN VIVO</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> SCANNER ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ANTI-SCALPING</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> MECÁNICAS DE VENTA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CONTROL TOTAL</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENUE EN REVENTA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> DASHBOARD EN VIVO</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> SCANNER ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ANTI-SCALPING</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> MECÁNICAS DE VENTA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> CONTROL TOTAL</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> REVENUE EN REVENTA</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> DASHBOARD EN VIVO</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> SCANNER ID</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> ANTI-SCALPING</span>
      <span class="marquee-item"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> MECÁNICAS DE VENTA</span>
    </div>
  </div>


  <!-- Hero Promotor — mismo layout que Fans -->
  <section class="cf-hero">
    <div class="cf-glow cf-glow-1"></div>
    <div class="cf-glow cf-glow-2"></div>
    <div class="cf-hero-inner">
      <div>
        <div class="cf-hero-badge"><span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span> PARA ORGANIZADORES</div>
        <h1>
          <span class="outline">CONTROLA</span>
          <span class="acid-text">
            <span class="cf-glitch-layer cf-glitch-pink" aria-hidden="true">TODO</span>
            <span class="cf-glitch-layer cf-glitch-cyan" aria-hidden="true">TODO</span>
            TODO
          </span>
          <span class="white-text">MAS FACIL</span>
        </h1>
        <p class="cf-hero-text" style="white-space:nowrap;"><strong>Control total sobre la venta y reventa de tus boletos.</strong></p>
        <div class="cf-btns">
          <button class="btn-acid">Crear evento →</button>
          <button class="btn-border" onclick="go('fans')">¿Cómo funciona para fans?</button>
        </div>
      </div>
    </div>
  </section>


  <!-- ═══ FASE 1: PRE-LANZAMIENTO ═══ -->
  <section class="cf-section">
    <div class="pp-phase-tag">PRE-LANZAMIENTO</div>
    <div class="cf-section-label">// Setup</div>
    <h2 class="cf-section-title">Configura todo<br><span style="color:var(--acid);">desde el inicio.</span></h2>
    <p class="cf-section-text">El contrato inicial de tus boletos define las reglas del juego: cantidades, precios, límites y más.</p>
    <div class="dk-how-grid" style="margin-top:48px;">
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-1">
          <div class="dk-how-num">01</div>
          <div class="dk-how-logo">📋</div>
          <h3>Crea tu<br>evento</h3>
          <div class="dk-how-tooltip">Setup rápido →</div>
        </div>
        <div class="dk-how-desc">Nombre, fecha, ubicación, lineup, descripción. <strong>Sin formularios eternos. Listo en minutos.</strong></div>
      </div>
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-2">
          <div class="dk-how-num">02</div>
          <div class="dk-how-logo">🎫</div>
          <h3>Define tus<br>boletos</h3>
          <div class="dk-how-tooltip">Control total →</div>
        </div>
        <div class="dk-how-desc">Cantidades por categoría, precio base, máximo por persona, fechas de drops. <strong>Tú decides todo en el contrato inicial.</strong></div>
      </div>
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-3">
          <div class="dk-how-num">03</div>
          <div class="dk-how-logo">🎨</div>
          <h3>Página<br>del evento</h3>
          <div class="dk-how-tooltip">Tu marca →</div>
        </div>
        <div class="dk-how-desc">Landing personalizada con tu branding. <strong>Lista para compartir y vender desde el primer momento.</strong></div>
      </div>
    </div>
  </section>

  <!-- ═══ FASE 2: LANZAMIENTO ═══ -->
  <section class="cf-section">
    <div class="pp-phase-tag">LANZAMIENTO</div>
    <div class="cf-section-label">// Mecánicas de venta</div>
    <h2 class="cf-section-title">Elige cómo<br><span style="color:var(--acid);">vender tus entradas.</span></h2>
    <p class="cf-section-text">Cada evento es diferente. Elige la mecánica que mejor funcione para tu audiencia.</p>
    <div class="pp-mechanics-grid">
      <div class="pp-mech-card">
        <div class="pp-mech-tag">FCFS</div>
        <h3>Cola virtual tradicional</h3>
        <p>First-come, first-served. Los fans hacen fila en orden y compran en tiempo real.</p>
      </div>
      <div class="pp-mech-card">
        <div class="pp-mech-tag">RANDOM</div>
        <h3>Cola virtual aleatoria</h3>
        <p>Todos tienen la misma probabilidad. Elimina la ventaja de bots y conexiones rápidas.</p>
      </div>
      <div class="pp-mech-card">
        <div class="pp-mech-tag">LOYALTY</div>
        <h3>Preferencia para leales</h3>
        <p>Fans con badges acceden primero a la compra. Premia a quien realmente apoya tu escena.</p>
      </div>
      <div class="pp-mech-card">
        <div class="pp-mech-tag">DUTCH AUCTION</div>
        <h3>Subasta holandesa</h3>
        <p>El precio empieza alto y baja gradualmente. Los fans compran cuando les parece justo.</p>
      </div>
      <div class="pp-mech-card">
        <div class="pp-mech-tag">DROPS</div>
        <h3>Lanzamientos por oleadas</h3>
        <p>Libera entradas en fechas específicas. Genera urgencia y controla el flujo de venta.</p>
      </div>
      <div class="pp-mech-card">
        <div class="pp-mech-tag">CUSTOM</div>
        <h3>Mecánicas custom</h3>
        <p>Collabs con artistas, acceso por invitación, preventas exclusivas. Tu idea, tu mecánica.</p>
      </div>
    </div>
  </section>

  <!-- Dashboard en vivo -->
  <section class="cf-section">
    <div class="cf-section-label">// Dashboard</div>
    <h2 class="cf-section-title">Todo tu evento<br><span style="color:var(--acid);">en una pantalla.</span></h2>
    <p class="cf-section-text">Mientras se venden las entradas, tú ves todo en vivo.</p>
    <div class="pp-dashboard-mock">
      <div class="pp-dash-row">
        <div class="pp-dash-stat">
          <div class="pp-dash-num" style="color:var(--acid);">847</div>
          <div class="pp-dash-label">Boletos vendidos</div>
        </div>
        <div class="pp-dash-stat">
          <div class="pp-dash-num">1,200</div>
          <div class="pp-dash-label">Capacidad total</div>
        </div>
        <div class="pp-dash-stat">
          <div class="pp-dash-num" style="color:var(--green);">70.6%</div>
          <div class="pp-dash-label">Ocupación</div>
        </div>
        <div class="pp-dash-stat">
          <div class="pp-dash-num">S/76,230</div>
          <div class="pp-dash-label">Revenue bruto</div>
        </div>
      </div>
      <div class="pp-dash-row">
        <div class="pp-dash-stat">
          <div class="pp-dash-num">3m 22s</div>
          <div class="pp-dash-label">Tiempo prom. compra</div>
        </div>
        <div class="pp-dash-stat">
          <div class="pp-dash-num">12</div>
          <div class="pp-dash-label">En cola ahora</div>
        </div>
        <div class="pp-dash-stat">
          <div class="pp-dash-num" style="color:var(--acid);">94%</div>
          <div class="pp-dash-label">Conversión</div>
        </div>
        <div class="pp-dash-stat">
          <div class="pp-dash-num">Lima 68%</div>
          <div class="pp-dash-label">Top región</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══ FASE 3: POST-LANZAMIENTO ═══ -->
  <section class="cf-section">
    <div class="pp-phase-tag">POST-LANZAMIENTO</div>
    <div class="cf-section-label">// Reventa y control</div>
    <h2 class="cf-section-title">Después de la venta,<br><span style="color:var(--acid);">tú sigues ganando.</span></h2>
    <p class="cf-section-text">La reventa deja de ser mercado negro. Revenue directo para ti, con tus reglas.</p>

    <!-- Revenue share -->
    <div class="pp-revenue-box">
      <h3 style="font-size:18px;font-weight:800;margin-bottom:20px;text-align:center;">Revenue share en cada reventa</h3>
      <div class="pp-rev-bars">
        <div class="pp-rev-item">
          <div class="pp-rev-label">Fan original</div>
          <div class="pp-rev-bar"><div class="pp-rev-fill" style="width:75%;background:rgba(255,255,255,0.15);"></div><span>75%</span></div>
        </div>
        <div class="pp-rev-item">
          <div class="pp-rev-label">Promotor</div>
          <div class="pp-rev-bar"><div class="pp-rev-fill" style="width:15%;background:var(--acid);"></div><span style="color:var(--acid);font-weight:700;">15%</span></div>
        </div>
        <div class="pp-rev-item">
          <div class="pp-rev-label">Lezgo</div>
          <div class="pp-rev-bar"><div class="pp-rev-fill" style="width:10%;background:rgba(229,255,0,0.3);"></div><span>10%</span></div>
        </div>
      </div>
      <p style="font-size:12px;color:var(--text-dim);margin-top:12px;text-align:center;">* Porcentajes configurables por el promotor en el contrato inicial.</p>
    </div>

  </section>

  <!-- ═══ SCANNER EN PUERTA ═══ -->
  <section class="cf-section">
    <div class="pp-phase-tag">DÍA DEL EVENTO</div>
    <div class="cf-section-label">// Verificación en puerta</div>
    <h2 class="cf-section-title">Scanner de<br><span style="color:var(--acid);">identidad en puerta.</span></h2>
    <p class="cf-section-text">Tu staff escanea el ID del asistente con la app de Lezgo. En segundos, la identidad se verifica contra el boleto comprado. Sin QR, sin screenshots, sin fraude.</p>

    <div class="dk-how-grid" style="margin-top:48px;">
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-1">
          <div class="dk-how-num">01</div>
          <div class="dk-how-logo">📱</div>
          <h3>Escanea<br>el ID</h3>
          <div class="dk-how-tooltip">App Lezgo →</div>
        </div>
        <div class="dk-how-desc">Tu staff usa la app de Lezgo para escanear el documento de identidad del asistente. <strong>Un toque, sin complicaciones.</strong></div>
      </div>
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-2">
          <div class="dk-how-num">02</div>
          <div class="dk-how-logo">✅</div>
          <h3>Verificación<br>en tiempo real</h3>
          <div class="dk-how-tooltip">Match instantáneo →</div>
        </div>
        <div class="dk-how-desc">Lezgo cruza el ID con el boleto comprado y la foto de verificación. <strong>Resultado en segundos: ✓ o ✗.</strong></div>
      </div>
      <div class="dk-how-card">
        <div class="dk-how-inner dk-grad-3">
          <div class="dk-how-num">03</div>
          <div class="dk-how-logo">🚪</div>
          <h3>Ingreso<br>seguro</h3>
          <div class="dk-how-tooltip">Cero fraude →</div>
        </div>
        <div class="dk-how-desc">Solo entra quien compró o quien recibió la transferencia verificada. <strong>Cero colados, cero entradas falsas.</strong></div>
      </div>
    </div>
  </section>

  <!-- FAQ Promotores -->
  <div class="faq-section">
    <div class="faq-section-title">// Preguntas frecuentes</div>
    <div class="faq-section-heading">Para promotores</div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Cómo publico mi evento en Lezgo?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Escríbenos a hola@lezgo.fans. Verificamos tu cuenta, te damos acceso de promotor, y desde el Dashboard puedes crear y editar tus eventos con toda la info: lineup, tiers de tickets, fases de precios y más.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Cuánto cobra Lezgo?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">8% de comisión por cada entrada vendida. No hay costos fijos, ni mensualidades, ni cargos de setup. Solo pagas cuando vendes.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Puedo configurar fases de precio (Early Bird, Preventa, etc.)?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Sí. Cada tier de entrada puede tener múltiples fases con precio, cantidad y fecha de release independientes. Tú controlas cuándo se libera cada fase.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Tengo acceso a métricas y datos?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Sí. Desde el Dashboard ves ventas en tiempo real, capacidad por tier, y puedes exportar la lista de asistentes. Estamos agregando más analytics.</div></div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="faqToggle(this)">
        <span class="faq-q-text">¿Puedo personalizar la página de mi evento?</span>
        <span class="faq-toggle">+</span>
      </div>
      <div class="faq-answer"><div class="faq-a-text">Sí. Desde el formulario de evento puedes activar o desactivar secciones como lineup, descripción, venue, video y tags para mostrar solo lo que necesitas.</div></div>
    </div>
  </div>

  <!-- Email capture promotor -->
  <div class="email-capture">
    <h3>Estamos construyendo<br><span style="color:var(--acid);">algo distinto.</span></h3>
    <p>Lezgo es un proyecto independiente.<br>Estamos creando la plataforma para volver a confiar en los eventos.<br>Déjanos tu correo y te contamos cómo avanzamos.</p>
    <div class="email-capture-form" id="pp-email-bar">
      <input class="email-capture-input" type="email" id="pp-email-input" placeholder="tu@productora.com">
      <button class="email-capture-btn" onclick="ppSubmitEmail()">Unirme</button>
    </div>
    <div class="email-capture-legal">Al suscribirte aceptas recibir máximo 1 correo por semana. <strong>Sin spam, nunca.</strong><br>Te puedes salir cuando quieras.</div>
    <div class="email-capture-ok" id="pp-email-success">Gracias por creer en el proyecto.<br>Te mantendremos al tanto.</div>
  </div>

  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 3: MARKETPLACE
     ═══════════════════════════════════════════ -->
<div id="v-marketplace" class="view">
  <section>
    <div class="mp">
      <div class="mp-top">
        <div class="mp-intro">
          <div class="mp-label">// Marketplace P2P</div>
          <h2 class="mp-title">Reventa entre<br>fans <span style="color:var(--acid);">verificados.</span></h2>
          <p class="mp-text">¿Ya no puedes ir? Publica tu entrada. ¿Buscas una entrada? Compra de otro fan. Cada transacción re-vincula la entrada al documento del nuevo comprador. El promotor recibe su porcentaje automáticamente.</p>
        </div>
      </div>

      <!-- Search bar Marketplace -->
      <div class="mp-search-bar">
        <div class="mp-search-field" id="mp-loc-field" onclick="mpToggle('loc')">
          <div class="search-field-label">Ubicación</div>
          <div class="search-field-value" id="mp-loc-value">Todos los distritos</div>
          <div class="dropdown" id="mp-loc-dropdown">
            <div class="dropdown-item selected" onclick="mpSelectLoc(this, 'Todos los distritos', 'todos')"><span class="dot"></span>Todos los distritos</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'Cerca de ti', 'cerca')"><span class="dot"></span>&#128205; Cerca de ti</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'Barranco', 'barranco')"><span class="dot"></span>Barranco</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'Miraflores', 'miraflores')"><span class="dot"></span>Miraflores</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'San Isidro', 'san-isidro')"><span class="dot"></span>San Isidro</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'Surco', 'surco')"><span class="dot"></span>Surco</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'Cercado de Lima', 'cercado')"><span class="dot"></span>Cercado de Lima</div>
            <div class="dropdown-item" onclick="mpSelectLoc(this, 'Chorrillos', 'chorrillos')"><span class="dot"></span>Chorrillos</div>
          </div>
        </div>
        <div class="mp-search-field" id="mp-date-field" onclick="mpToggle('date')">
          <div class="search-field-label">Fechas</div>
          <div class="search-field-value" id="mp-date-value">Todas las fechas</div>
          <div class="cal-dropdown" id="mp-date-dropdown">
            <div class="cal-header">
              <button class="cal-nav" onclick="mpCalNav(-1, event)">&#8249;</button>
              <span id="mp-cal-month-label"></span>
              <button class="cal-nav" onclick="mpCalNav(1, event)">&#8250;</button>
            </div>
            <div class="cal-grid" id="mp-cal-grid"></div>
            <div class="cal-range-info" id="mp-cal-range-info">
              <span id="mp-cal-range-text">Selecciona una fecha o rango</span>
              <button class="cal-clear" onclick="mpCalClear(event)">Limpiar</button>
            </div>
          </div>
        </div>
        <div class="mp-search-field mp-search-field-main" style="border-right:none;">
          <div class="search-field-label">Buscar</div>
          <div class="search-field-value" style="opacity:0.5;">Evento, artista...</div>
        </div>
      </div>

      <!-- Filter pills -->
      <div class="mp-filters-row" id="mp-filters" style="margin-top:20px;">
        <div class="mp-filters-left">
          <button class="mp-filter active" data-filter="todos">Todos</button>
          <button class="mp-filter" data-filter="oferta">Oferta</button>
        </div>
        <div class="mp-filters-right">
          <button class="mp-sort" data-sort="fecha">Ordenar por fecha ↕</button>
          <button class="mp-sort" data-sort="precio">Ordenar por precio ↕</button>
        </div>
      </div>

      <div class="mp-listings" id="mp-listings">
        <div class="mp-listing" data-price="95" data-original="120" data-date="2026-05-01" data-oferta="1" data-distrito="cercado">
          <div class="mp-listing-date">
            <div class="mp-listing-date-day">01</div>
            <div class="mp-listing-date-month">MAY</div>
          </div>
          <div class="mp-listing-img" style="background-image:url('https://images.unsplash.com/photo-1545128485-c400e7702796?w=200&q=80');"></div>
          <div class="mp-listing-info">
            <div class="mp-listing-event">Rorschach.Inc 2026</div>
            <div class="mp-listing-meta">01 Mayo · Av. 9 de Diciembre 203 · General</div>
            <div class="mp-listing-seller">
              <span class="verified-dot">&#10003;</span>
              <span>Camila R. · Identidad verificada</span>
            </div>
            <div class="mp-listing-reason">"Viajo a Cusco ese finde, no llego"</div>
          </div>
          <div class="mp-listing-right">
            <div class="mp-listing-prices">
              <span class="mp-listing-original">S/120</span>
              <span class="mp-listing-price below">S/95</span>
            </div>
            <span class="mp-listing-tag mp-tag-below">Bajo precio original</span>
            <button class="mp-listing-btn">Comprar</button>
          </div>
        </div>

        <div class="mp-listing" data-price="280" data-original="280" data-date="2026-05-15" data-oferta="0" data-distrito="surco">
          <div class="mp-listing-date">
            <div class="mp-listing-date-day">15</div>
            <div class="mp-listing-date-month">MAY</div>
          </div>
          <div class="mp-listing-img" style="background-image:url('https://images.unsplash.com/photo-1493676304819-0d7a8d026dcf?w=200&q=80');"></div>
          <div class="mp-listing-info">
            <div class="mp-listing-event">Hernán Cattáneo</div>
            <div class="mp-listing-meta">15 Mayo · Arena Perú · VIP</div>
            <div class="mp-listing-seller">
              <span class="verified-dot">&#10003;</span>
              <span>Diego M. · Identidad verificada</span>
            </div>
            <div class="mp-listing-reason">"Me salió un compromiso familiar"</div>
          </div>
          <div class="mp-listing-right">
            <div class="mp-listing-prices">
              <span class="mp-listing-original">S/280</span>
              <span class="mp-listing-price" style="color:var(--acid);">S/280</span>
            </div>
            <span class="mp-listing-tag mp-tag-face">Precio original</span>
            <button class="mp-listing-btn">Comprar</button>
          </div>
        </div>

        <div class="mp-listing" data-price="200" data-original="250" data-date="2026-05-22" data-oferta="1" data-distrito="chorrillos">
          <div class="mp-listing-date">
            <div class="mp-listing-date-day">22</div>
            <div class="mp-listing-date-month">MAY</div>
          </div>
          <div class="mp-listing-img" style="background-image:url('https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=200&q=80');"></div>
          <div class="mp-listing-info">
            <div class="mp-listing-event">Solomun en Lima</div>
            <div class="mp-listing-meta">22 Mayo · Lurin Live · General</div>
            <div class="mp-listing-seller">
              <span class="verified-dot">&#10003;</span>
              <span>Fernanda L. · Identidad verificada</span>
            </div>
            <div class="mp-listing-reason">"Ya compré VIP, me sobra la general"</div>
          </div>
          <div class="mp-listing-right">
            <div class="mp-listing-prices">
              <span class="mp-listing-original">S/250</span>
              <span class="mp-listing-price below">S/200</span>
            </div>
            <span class="mp-listing-tag mp-tag-below">Bajo precio original</span>
            <button class="mp-listing-btn">Comprar</button>
          </div>
        </div>

        <div class="mp-listing" data-price="480" data-original="550" data-date="2026-05-02" data-oferta="1" data-distrito="miraflores">
          <div class="mp-listing-date">
            <div class="mp-listing-date-day">02</div>
            <div class="mp-listing-date-month">MAY</div>
          </div>
          <div class="mp-listing-img" style="background-image:url('https://images.unsplash.com/photo-1574391884720-bbc3740c59d1?w=200&q=80');"></div>
          <div class="mp-listing-info">
            <div class="mp-listing-event">Ultra Perú 2026</div>
            <div class="mp-listing-meta">02 Mayo · Club Cultural Lima, Miraflores · Super VIP</div>
            <div class="mp-listing-seller">
              <span class="verified-dot">&#10003;</span>
              <span>Andrés K. · Identidad verificada</span>
            </div>
            <div class="mp-listing-reason">"Cambio de planes de último momento"</div>
          </div>
          <div class="mp-listing-right">
            <div class="mp-listing-prices">
              <span class="mp-listing-original">S/550</span>
              <span class="mp-listing-price below">S/480</span>
            </div>
            <span class="mp-listing-tag mp-tag-below">Bajo precio original</span>
            <button class="mp-listing-btn">Comprar</button>
          </div>
        </div>

        <div class="mp-listing" data-price="180" data-original="180" data-date="2026-05-16" data-oferta="0" data-distrito="surco">
          <div class="mp-listing-date">
            <div class="mp-listing-date-day">16</div>
            <div class="mp-listing-date-month">MAY</div>
          </div>
          <div class="mp-listing-img" style="background-image:url('https://images.unsplash.com/photo-1598387993281-cecf8b71a8f8?w=200&q=80');"></div>
          <div class="mp-listing-info">
            <div class="mp-listing-event">FABRICLIMA 001</div>
            <div class="mp-listing-meta">12 Abril · Almacén 77, Callao · General</div>
            <div class="mp-listing-seller">
              <span class="verified-dot">&#10003;</span>
              <span>Lucía V. · Identidad verificada</span>
            </div>
            <div class="mp-listing-reason">"Me regalaron otra entrada, vendo esta"</div>
          </div>
          <div class="mp-listing-right">
            <div class="mp-listing-prices">
              <span class="mp-listing-original">S/180</span>
              <span class="mp-listing-price" style="color:var(--acid);">S/180</span>
            </div>
            <span class="mp-listing-tag mp-tag-face">Precio original</span>
            <button class="mp-listing-btn">Comprar</button>
          </div>
        </div>

        <div class="mp-listing" data-price="120" data-original="150" data-date="2026-05-22" data-oferta="1" data-distrito="barranco">
          <div class="mp-listing-date">
            <div class="mp-listing-date-day">22</div>
            <div class="mp-listing-date-month">MAY</div>
          </div>
          <div class="mp-listing-img" style="background-image:url('https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=200&q=80');"></div>
          <div class="mp-listing-info">
            <div class="mp-listing-event">Deep House Sunset Sessions</div>
            <div class="mp-listing-meta">22 Mayo · La Fábrica, Barranco · VIP</div>
            <div class="mp-listing-seller">
              <span class="verified-dot">&#10003;</span>
              <span>Roberto P. · Identidad verificada</span>
            </div>
            <div class="mp-listing-reason">"Me cambió la fecha del vuelo"</div>
          </div>
          <div class="mp-listing-right">
            <div class="mp-listing-prices">
              <span class="mp-listing-original">S/150</span>
              <span class="mp-listing-price below">S/120</span>
            </div>
            <span class="mp-listing-tag mp-tag-below">Bajo precio original</span>
            <button class="mp-listing-btn">Comprar</button>
          </div>
        </div>
      </div>

      <div class="mp-note">
        <strong>¿Cómo funciona?</strong> Al comprar una entrada en reventa, esta se desvincula del documento del vendedor y se re-vincula automáticamente al tuyo. El promotor recibe un porcentaje de cada transacción. No se permiten precios por encima del 20% del valor original.
      </div>

      <!-- Sell CTA -->
      <div style="text-align:center;padding:60px 0 20px;">
        <p style="font-size:18px;color:var(--text-mid);margin-bottom:20px;">¿Tienes una entrada que ya no usarás?</p>
        <button class="btn-acid" style="padding:16px 40px;font-size:15px;">Publicar mi entrada en venta</button>
      </div>
    </div>
  </section>

  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 4: PERFIL
     ═══════════════════════════════════════════ -->
<div id="v-perfil" class="view">
  <div class="pf">

    <!-- Header -->
    <div class="pf-header">
      <div class="pf-avatar" id="profile-avatar">
        <div class="pf-verified-ring"></div>
        <span id="profile-initials">ML</span>
      </div>
      <div class="pf-info">
        <h1 id="profile-name">Mario Leder <span class="pf-check">&#10003;</span></h1>
        <div class="pf-meta" id="profile-email">Identidad verificada con <span>DNI</span> · Miembro desde <span>Enero 2026</span></div>
        <div id="profile-dni" style="font-size:12px;color:var(--text-dim);margin-top:4px"></div>
        <div class="pf-stats-row">
          <div class="pf-stat"><strong>7</strong> eventos</div>
          <div class="pf-stat"><strong>5</strong> badges</div>
          <div class="pf-stat"><strong>2</strong> membresías</div>
          <div class="pf-stat"><strong>1</strong> reventa</div>
        </div>
      </div>
      <button class="pf-edit-btn">Editar perfil</button>
      <button class="pf-edit-btn" id="pf-promoter-btn" onclick="contactPromoter()" style="margin-left:8px;background:rgba(229,255,0,0.1);border-color:var(--acid);color:var(--acid);display:none">🏢 Quiero ser Promotor</button>
    </div>

    <!-- Badges -->
    <div class="pf-section">
      <div class="pf-section-head">
        <div class="pf-section-title">Badges</div>
        <span class="pf-section-more">Ver todos →</span>
      </div>
      <div class="pf-badges">
        <div class="pf-badge">
          <div class="pf-badge-icon">🎧</div>
          <div class="pf-badge-name">Club Connoisseur</div>
          <div class="pf-badge-desc">Asistió a 5+ eventos de club</div>
        </div>
        <div class="pf-badge">
          <div class="pf-badge-icon">⚡</div>
          <div class="pf-badge-name">Early Adopter</div>
          <div class="pf-badge-desc">Entre los primeros 1,000 usuarios</div>
        </div>
        <div class="pf-badge">
          <div class="pf-badge-icon">🔊</div>
          <div class="pf-badge-name">Bass Monster</div>
          <div class="pf-badge-desc">3+ eventos de techno/bass</div>
        </div>
        <div class="pf-badge">
          <div class="pf-badge-icon">🎯</div>
          <div class="pf-badge-name">Preventa Hunter</div>
          <div class="pf-badge-desc">Compró 3+ preventas</div>
        </div>
        <div class="pf-badge">
          <div class="pf-badge-icon">🧭</div>
          <div class="pf-badge-name">Lima Explorer</div>
          <div class="pf-badge-desc">Eventos en 3+ distritos</div>
        </div>
        <div class="pf-badge locked">
          <div class="pf-badge-icon">👑</div>
          <div class="pf-badge-name">Festival Warrior</div>
          <div class="pf-badge-desc">Asiste a 3 festivales</div>
        </div>
        <div class="pf-badge locked">
          <div class="pf-badge-icon">🤝</div>
          <div class="pf-badge-name">Resale Pro</div>
          <div class="pf-badge-desc">5+ reventas exitosas</div>
        </div>
        <div class="pf-badge locked">
          <div class="pf-badge-icon">💎</div>
          <div class="pf-badge-name">VIP Status</div>
          <div class="pf-badge-desc">10 eventos VIP</div>
        </div>
      </div>
    </div>

    <!-- Memberships -->
    <div class="pf-section">
      <div class="pf-section-head">
        <div class="pf-section-title">Membresías</div>
      </div>
      <div class="pf-memberships">
        <div class="pf-membership">
          <div class="pf-membership-badge">ACTIVA</div>
          <h3>Rorschach.Inc Season Pass</h3>
          <p>Acceso a todos los eventos de Rorschach.Inc durante 2026. Incluye entrada prioritaria y descuentos en consumos.</p>
          <ul class="pf-membership-perks">
            <li>Entrada a todos los eventos 2026</li>
            <li>Acceso prioritario sin cola</li>
            <li>15% descuento en barra</li>
            <li>Badge exclusivo "Rorschach Insider"</li>
          </ul>
        </div>
        <div class="pf-membership">
          <div class="pf-membership-badge">ACTIVA</div>
          <h3>LEZGO Premium</h3>
          <p>Notificaciones de preventa, acceso anticipado a eventos y fees reducidos en marketplace.</p>
          <ul class="pf-membership-perks">
            <li>Acceso 24h antes a preventas</li>
            <li>0% comisión en reventa</li>
            <li>Soporte prioritario</li>
            <li>Badges exclusivos mensuales</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Ticket History -->
    <div class="pf-section">
      <div class="pf-section-head">
        <div class="pf-section-title">Historial de Entradas</div>
        <span class="pf-section-more">Ver todo →</span>
      </div>
      <div class="pf-tickets">
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">FABRICLIMA 001</div>
            <div class="pf-ticket-meta">16 Mayo 2026 · Arena Perú, Santa Anita</div>
            <span class="pf-ticket-status upcoming">PRÓXIMO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price">S/180</div>
            <div class="pf-ticket-tier">General</div>
          </div>
        </div>
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1545128485-c400e7702796?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">Rorschach.Inc 2026</div>
            <div class="pf-ticket-meta">01 Mayo 2026 · Av. 9 de Diciembre 203</div>
            <span class="pf-ticket-status upcoming">PRÓXIMO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price">S/120</div>
            <div class="pf-ticket-tier">Season Pass</div>
          </div>
        </div>
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1493676304819-0d7a8d026dcf?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">Hernán Cattáneo</div>
            <div class="pf-ticket-meta">20 Marzo 2026 · Arena Perú</div>
            <span class="pf-ticket-status attended">ASISTIDO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price">S/280</div>
            <div class="pf-ticket-tier">VIP</div>
          </div>
        </div>
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">FABRICLIMA 001</div>
            <div class="pf-ticket-meta">08 Marzo 2026 · Playa Estacionamiento Costa Verde</div>
            <span class="pf-ticket-status attended">ASISTIDO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price">S/350</div>
            <div class="pf-ticket-tier">Full Weekend</div>
          </div>
        </div>
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">Solomun en Lima</div>
            <div class="pf-ticket-meta">15 Feb 2026 · Lurin Live</div>
            <span class="pf-ticket-status resold">REVENDIDO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price" style="color:var(--text-dim);text-decoration:line-through;">S/250</div>
            <div class="pf-ticket-tier">General · Vendido a S/200</div>
          </div>
        </div>
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1571903601067-7beea7104ce3?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">Deep House Sunset</div>
            <div class="pf-ticket-meta">25 Enero 2026 · La Fábrica, Barranco</div>
            <span class="pf-ticket-status attended">ASISTIDO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price">S/80</div>
            <div class="pf-ticket-tier">General</div>
          </div>
        </div>
        <div class="pf-ticket-row">
          <div class="pf-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1598387993281-cecf8b71a8f8?w=200&q=80');"></div>
          <div class="pf-ticket-info">
            <div class="pf-ticket-name">Warehouse Ritual: NYE Edition</div>
            <div class="pf-ticket-meta">31 Diciembre 2025 · Almacén 404, Callao</div>
            <span class="pf-ticket-status attended">ASISTIDO</span>
          </div>
          <div class="pf-ticket-right">
            <div class="pf-ticket-price">S/150</div>
            <div class="pf-ticket-tier">VIP</div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Organizer Access -->
  <div style="padding: 0 24px 32px; max-width: 560px; margin: 0 auto;">
    <div style="background: rgba(229,255,0,0.04); border: 1px solid rgba(229,255,0,0.15); border-radius: 16px; padding: 20px 24px; display: flex; align-items: center; justify-content: space-between; gap: 16px;">
      <div>
        <div style="font-size: 13px; font-weight: 700; color: var(--acid); letter-spacing: 0.06em; margin-bottom: 4px;">MODO ORGANIZADOR</div>
        <div style="font-size: 14px; color: var(--text-mid);">Accede al dashboard B2B de tu productora</div>
      </div>
      <button onclick="go('organizer')" style="background: var(--acid); color: #000; border: none; border-radius: 10px; padding: 10px 18px; font-size: 13px; font-weight: 800; cursor: pointer; white-space: nowrap; font-family: inherit;">📊 Dashboard →</button>
    </div>
    <div style="margin-top: 12px; display: flex; align-items: center; justify-content: center; gap: 8px;">
      <button onclick="go('auth')" style="background: none; border: none; color: var(--text-dim); font-size: 13px; cursor: pointer; font-family: inherit; padding: 8px 12px; border-radius: 8px; transition: color 0.2s;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='var(--text-dim)'">← Cerrar sesión</button>
    </div>
  </div>

  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 5: EVENTO DEMO
     ═══════════════════════════════════════════ -->
<div id="v-evento" class="view">
  <div class="ev-page">

    <!-- ═══ HERO ═══ -->
    <section class="ev-hero">
      <div class="ev-hero-img" id="ev-hero-img" style="background-image:url('');"></div>
      <div class="ev-hero-content">
        <div class="ev-hero-back" onclick="go('eventos')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Volver a eventos
        </div>
        <div class="ev-hero-tags"></div>
        <h1 class="ev-hero-title"></h1>
        <div class="ev-hero-sub"></div>
        <div class="ev-hero-info">
          <div class="ev-hero-info-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>
            <span></span>
          </div>
          <div class="ev-hero-info-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
            <span></span>
          </div>
          <div class="ev-hero-info-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
            <span></span>
          </div>
        </div>
        <div class="ev-countdown" id="ev-countdown"></div>
        <div class="ev-hero-actions">
          <button class="ev-hero-cta" id="ev-cta-main" onclick="document.getElementById('ev-tickets').scrollIntoView({behavior:'smooth'})">
            Comprar entradas
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M7 7l10 10M17 7v10H7"/></svg>
          </button>
          <div style="position:relative;">
            <button id="cal-btn" onclick="calToggle(event)" class="ev-btn-secondary">
              📅 Agregar al calendario
            </button>
            <div id="cal-dropdown" style="position:fixed;z-index:99999;width:210px;background:#1c1c1c;border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:8px;box-shadow:0 20px 60px rgba(0,0,0,0.7);opacity:0;pointer-events:none;transform:translateY(-6px);transition:opacity 0.18s,transform 0.18s;">
              <div onclick="calAdd('google')" style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;cursor:pointer;font-size:14px;color:var(--text-mid);transition:background 0.15s;" onmouseover="this.style.background='rgba(255,255,255,0.07)';this.style.color='#fff'" onmouseout="this.style.background='';this.style.color='var(--text-mid)'">
                <span style="font-size:16px;">🗓️</span> Google Calendar
              </div>
              <div onclick="calAdd('apple')" style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;cursor:pointer;font-size:14px;color:var(--text-mid);transition:background 0.15s;" onmouseover="this.style.background='rgba(255,255,255,0.07)';this.style.color='#fff'" onmouseout="this.style.background='';this.style.color='var(--text-mid)'">
                <span style="font-size:16px;">🍎</span> Apple Calendar
              </div>
              <div onclick="calAdd('outlook')" style="display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;cursor:pointer;font-size:14px;color:var(--text-mid);transition:background 0.15s;" onmouseover="this.style.background='rgba(255,255,255,0.07)';this.style.color='#fff'" onmouseout="this.style.background='';this.style.color='var(--text-mid)'">
                <span style="font-size:16px;">📧</span> Outlook
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══ QUICK STATS BAR ═══ -->
    <div class="ev-stats-bar" id="ev-stats-bar">
      <!-- Populated by openEvent() -->
    </div>

    <!-- ═══ LINEUP ═══ -->
    <section class="ev-section" id="ev-lineup-section">
      <div class="ev-section-label">// Lineup</div>
      <h2 class="ev-section-title" id="ev-lineup-title">Artistas</h2>
      <div class="ev-lineup-grid" id="ev-lineup-grid">
        <!-- Populated by openEvent() -->
      </div>
    </section>

    <!-- ═══ SOBRE EL EVENTO ═══ -->
    <section class="ev-section" id="ev-about-section">
      <div class="ev-section-label">// Sobre el evento</div>
      <div class="ev-about-content">
        <div class="ev-about-text" id="ev-about-text"></div>
        <div class="ev-about-details" id="ev-about-details">
          <!-- genre, age, setting, vibe chips -->
        </div>
      </div>
    </section>

    <!-- ═══ ENTRADAS ═══ -->
    <section class="ev-tickets-section" id="ev-tickets">
      <div class="ev-tickets-label" id="ev-tickets-label">Entradas</div>
      <div class="ev-tickets-heading" id="ev-tickets-heading">Elige tu entrada</div>
      <div class="ev-tickets-sub" id="ev-tickets-sub">Todas las entradas están verificadas con tu identidad. Sin reventas truchas.</div>

      <div class="tk-grid" id="ev-tk-grid">
        <!-- Populated by openEvent() -->
      </div>

      <!-- Sold-out marketplace CTA (hidden by default) -->
      <div class="ev-marketplace-cta" id="ev-marketplace-cta" style="display:none;">
        <div class="ev-mp-box">
          <div class="ev-mp-icon">🔄</div>
          <h3>Evento agotado — busca en reventa</h3>
          <p>Fans verificados están revendiendo sus entradas en el marketplace de Lezgo. Precio justo, identidad verificada, transferencia segura.</p>
          <button class="btn-acid" onclick="go('marketplace')">Ver Marketplace →</button>
        </div>
      </div>

      <div class="tk-features">
        <div class="tk-feature"><span class="tk-feature-icon">✅</span><span>Entrada vinculada a tu DNI</span></div>
        <div class="tk-feature"><span class="tk-feature-icon">✅</span><span>Reventa segura P2P</span></div>
        <div class="tk-feature"><span class="tk-feature-icon">✅</span><span>Verificación en puerta</span></div>
        <div class="tk-feature"><span class="tk-feature-icon">✅</span><span>Soporte en menos de 24h</span></div>
      </div>
    </section>

    <!-- ═══ DETALLES + MAPA ═══ -->
    <section class="ev-section ev-venue-section" id="ev-venue-section">
      <div class="ev-section-label">// Venue</div>
      <div class="ev-venue-grid">
        <div class="ev-venue-info">
          <h2 class="ev-section-title" id="ev-venue-name"></h2>
          <div class="ev-venue-address" id="ev-venue-address"></div>
          <div class="ev-venue-chips" id="ev-venue-chips"></div>
        </div>
        <div class="ev-venue-map" id="ev-venue-map">
          <div style="width:100%;height:100%;background:var(--bg-raised);border-radius:16px;display:flex;align-items:center;justify-content:center;color:var(--text-dim);font-size:14px;">📍 Mapa próximamente</div>
        </div>
      </div>
    </section>

    <!-- ═══ TAGS PÚBLICOS ═══ -->
    <section class="ev-section" id="ev-tags-section">
      <div class="ev-section-label">// Tags</div>
      <div class="ev-tags-cloud" id="ev-tags-cloud">
        <!-- Populated by openEvent() -->
      </div>
    </section>

  </div>

  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 6: SCANNER — Verificación en Puerta
     ═══════════════════════════════════════════ -->
<div id="v-scanner" class="view">
  <div class="sc">

    <div class="sc-header">
      <div class="sc-badge">
        <span class="acid-smiley acid-smiley-sm"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span>
        SCAN.LEZGO.COM
      </div>
      <h1>Verificación <span>en puerta</span></h1>
      <p>Presenta tu documento, te tomamos una foto, y entras. Como en Disneyland, pero para raves. Cero colas, cero fraude, check-in en segundos.</p>
    </div>

    <!-- Functional Scanner Tool (for organizers/staff) -->
    <div id="scanner-tool" style="background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;padding:24px;margin:0 20px 32px">
      <div style="font-size:12px;letter-spacing:2px;color:var(--acid);margin-bottom:8px;font-weight:600">HERRAMIENTA DE VERIFICACIÓN</div>
      <div style="font-weight:600;color:var(--text);margin-bottom:16px">Ingresa el ID de la entrada para verificar</div>
      <div style="display:flex;gap:8px;margin-bottom:16px">
        <input id="scanner-manual-input" type="text" placeholder="ID de entrada (ej: abc123xyz)" style="flex:1;padding:12px 16px;border-radius:10px;border:1px solid var(--border);background:var(--bg-inset);color:var(--text);font-family:inherit;font-size:14px" />
        <button onclick="manualScan()" style="background:var(--acid);color:#000;border:none;padding:12px 20px;border-radius:10px;font-weight:600;cursor:pointer;font-family:inherit;white-space:nowrap">Verificar →</button>
      </div>
      <div id="scanner-result" style="display:none;padding:16px;border-radius:10px;margin-top:8px"></div>
      <div style="display:flex;gap:8px;margin-top:12px">
        <button onclick="startScanner()" style="background:transparent;border:1px solid var(--border);color:var(--text);padding:10px 16px;border-radius:10px;cursor:pointer;font-family:inherit;font-size:13px">📷 Activar cámara</button>
        <button onclick="stopScanner()" style="background:transparent;border:1px solid var(--border);color:var(--text-dim);padding:10px 16px;border-radius:10px;cursor:pointer;font-family:inherit;font-size:13px">⏹ Detener</button>
      </div>
      <video id="scanner-video" style="display:none;width:100%;border-radius:10px;margin-top:12px" autoplay playsinline></video>
    </div>

    <!-- Scanner main -->
    <div class="sc-main">

      <!-- Device mockup — face scan, not QR -->
      <div class="sc-device">
        <div class="sc-device-inner">
          <div class="sc-viewfinder">
            <div class="sc-viewfinder-corner"></div>
            <div class="sc-viewfinder-corner"></div>
            <div class="sc-viewfinder-corner"></div>
            <div class="sc-viewfinder-corner"></div>
            <div class="sc-scan-line"></div>
            <!-- Face silhouette placeholder -->
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none" style="opacity:0.3;">
              <circle cx="40" cy="30" r="18" stroke="#fff" stroke-width="2"/>
              <path d="M12 72c0-15.5 12.5-28 28-28s28 12.5 28 28" stroke="#fff" stroke-width="2" fill="none"/>
            </svg>
          </div>
          <div class="sc-device-label">El staff toma una foto del asistente con su ID</div>
          <div class="sc-device-status">
            <span class="dot"></span>
            Cámara activa — Listo para verificar
          </div>
        </div>
      </div>

      <!-- Scanner flow — corrected -->
      <div class="sc-flow">
        <div class="sc-step">
          <div class="sc-step-num">1</div>
          <div>
            <h3>Presenta tu documento</h3>
            <p>El asistente muestra su DNI o documento de identidad al staff en puerta. Nada más — no necesitas app, QR, ni nada en tu celular.</p>
          </div>
        </div>
        <div class="sc-step">
          <div class="sc-step-num">2</div>
          <div>
            <h3>Foto de verificación</h3>
            <p>El lector toma una foto del asistente junto a su documento. El sistema cruza la imagen con la identidad vinculada a la entrada en tiempo real.</p>
          </div>
        </div>
        <div class="sc-step">
          <div class="sc-step-num">3</div>
          <div>
            <h3>Resultado instantáneo</h3>
            <p>La pantalla muestra SÍ o NO, junto con la zona a la que tiene acceso (General, VIP, Backstage). Sin discusiones, sin ambigüedad.</p>
          </div>
        </div>
        <div class="sc-step">
          <div class="sc-step-num">4</div>
          <div>
            <h3>Recibes tu Stamp</h3>
            <p>Al validar tu asistencia, recibes un <strong>Stamp</strong> — tu prueba de que estuviste ahí. Se suma a tu perfil y desbloquea beneficios en el programa de fidelización.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Result examples -->
    <div class="sc-results">
      <div class="sc-result sc-result-ok">
        <div class="sc-result-icon">✓</div>
        <h3>Acceso aprobado</h3>
        <p>Identidad verificada. El rostro coincide con el titular de la entrada.</p>
        <div class="sc-result-detail">
          <div class="sc-result-row"><span>Asistente</span><span>Mario G. ✓</span></div>
          <div class="sc-result-row"><span>Evento</span><span>Rorschach.Inc 2026</span></div>
          <div class="sc-result-row"><span>Zona</span><span>VIP Early Access</span></div>
          <div class="sc-result-row"><span>Stamp</span><span>+1 Stamp desbloqueado</span></div>
        </div>
      </div>
      <div class="sc-result sc-result-fail">
        <div class="sc-result-icon">✕</div>
        <h3>Acceso denegado</h3>
        <p>La identidad no coincide con el titular registrado de esta entrada.</p>
        <div class="sc-result-detail">
          <div class="sc-result-row"><span>Asistente</span><span>No coincide</span></div>
          <div class="sc-result-row"><span>Evento</span><span>Rorschach.Inc 2026</span></div>
          <div class="sc-result-row"><span>Zona</span><span>—</span></div>
          <div class="sc-result-row"><span>Estado</span><span>DENEGADO</span></div>
        </div>
      </div>
    </div>

    <!-- Stamps & Loyalty -->
    <div class="sc-stamps">
      <div class="sc-stamps-header">
        <div class="sc-section-label">PROGRAMA DE FIDELIZACIÓN</div>
        <h2>Colecciona <span>Stamps</span></h2>
        <p>Cada evento al que asistes te da un Stamp — tu prueba de asistencia verificada. Acumula Stamps para desbloquear beneficios exclusivos, accesos anticipados y descuentos.</p>
      </div>
      <div class="sc-stamps-grid">
        <div class="sc-stamp-card">
          <div class="sc-stamp-icon">☺</div>
          <div class="sc-stamp-level">RAVER</div>
          <div class="sc-stamp-req">3 Stamps</div>
          <p>Acceso anticipado a preventas y precio preferencial en tu próximo evento.</p>
        </div>
        <div class="sc-stamp-card">
          <div class="sc-stamp-icon" style="color:var(--acid);">☺</div>
          <div class="sc-stamp-level" style="color:var(--acid);">HEADLINER</div>
          <div class="sc-stamp-req">10 Stamps</div>
          <p>Descuentos exclusivos, meet & greets, y prioridad en eventos sold out.</p>
        </div>
        <div class="sc-stamp-card">
          <div class="sc-stamp-icon" style="color:var(--pink);">☺</div>
          <div class="sc-stamp-level" style="color:var(--pink);">LEYENDA</div>
          <div class="sc-stamp-req">25 Stamps</div>
          <p>Acceso VIP permanente, invitaciones a eventos privados y merch drops exclusivos.</p>
        </div>
      </div>
    </div>

    <!-- Scanner stats -->
    <div class="sc-stats">
      <div class="sc-stat">
        <div class="sc-stat-num">&lt;3s</div>
        <div class="sc-stat-label">Verificación completa</div>
      </div>
      <div class="sc-stat">
        <div class="sc-stat-num">0%</div>
        <div class="sc-stat-label">Suplantaciones pasan</div>
      </div>
      <div class="sc-stat">
        <div class="sc-stat-num">ID</div>
        <div class="sc-stat-label">Solo tu documento</div>
      </div>
      <div class="sc-stat">
        <div class="sc-stat-num">☺</div>
        <div class="sc-stat-label">Stamp por cada evento</div>
      </div>
    </div>

  </div>

  <div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     VIEW 7: DECK — Investor Presentation
     ═══════════════════════════════════════════ -->
<div id="v-deck" class="view">
  <!-- Toggle Bar -->
  <div class="dk-toggle-bar">
    <div class="dk-toggle" id="dk-lang-toggle">
      <button class="active" onclick="dkLang('es')">ES</button>
      <button onclick="dkLang('en')">EN</button>
    </div>
    <div class="dk-toggle" id="dk-mode-toggle">
      <button class="active" onclick="dkMode('simple')">Simple</button>
      <button onclick="dkMode('tech')">Tech</button>
    </div>
  </div>

  <!-- Marquee -->
  <div class="dk-marquee">
    <div class="dk-marquee-track">
      <span data-es="IDENTIDAD VERIFICADA" data-en="VERIFIED IDENTITY">IDENTIDAD VERIFICADA</span>
      <span>☺</span>
      <span data-es="CERO FRAUDE" data-en="ZERO FRAUD">CERO FRAUDE</span>
      <span>☺</span>
      <span data-es="REVENTA SEGURA" data-en="SAFE RESALE">REVENTA SEGURA</span>
      <span>☺</span>
      <span data-es="TU ID = TU TICKET" data-en="YOUR ID = YOUR TICKET">TU ID = TU TICKET</span>
      <span>☺</span>
      <span data-es="IDENTIDAD VERIFICADA" data-en="VERIFIED IDENTITY">IDENTIDAD VERIFICADA</span>
      <span>☺</span>
      <span data-es="CERO FRAUDE" data-en="ZERO FRAUD">CERO FRAUDE</span>
      <span>☺</span>
      <span data-es="REVENTA SEGURA" data-en="SAFE RESALE">REVENTA SEGURA</span>
      <span>☺</span>
      <span data-es="TU ID = TU TICKET" data-en="YOUR ID = YOUR TICKET">TU ID = TU TICKET</span>
      <span>☺</span>
    </div>
  </div>

  <!-- 1. HERO -->
  <div class="dk-hero">
    <div>
      <div class="dk-hero-tag" data-es="☺ DECK PARA INVERSIONISTAS" data-en="☺ INVESTOR DECK">☺ DECK PARA INVERSIONISTAS</div>
      <h1>
        <span class="outline" data-es="COMPRA" data-en="BUY">COMPRA</span>
        <span class="acid" data-es="VENDE Y REVENDE" data-en="SELL &amp; RESELL">VENDE Y REVENDE</span>
        <span class="white" data-es="TICKETS SEGURO" data-en="TICKETS SAFE">TICKETS SEGURO</span>
      </h1>
      <p class="dk-hero-desc">
        <span data-es="La primera plataforma de ticketing que vincula cada entrada a la identidad verificada del comprador." data-en="The first ticketing platform that links every ticket to the buyer's verified identity.">La primera plataforma de ticketing que vincula cada entrada a la identidad verificada del comprador.</span>
        <span class="acid-text" data-es=" Cero estafas. Cero reventas falsas." data-en=" Zero scams. Zero fake resales."> Cero estafas. Cero reventas falsas.</span>
      </p>
      <div class="dk-hero-btns">
        <button class="dk-btn-primary" onclick="window.open('mailto:tata@frensonly.club','_blank')" data-es="CONTACTAR EQUIPO" data-en="CONTACT TEAM">CONTACTAR EQUIPO</button>
        <button class="dk-btn-secondary" onclick="go('fans')" data-es="PARA FANS" data-en="FOR FANS">PARA FANS</button>
      </div>
    </div>
    <div class="dk-tickets">
      <div class="dk-ticket dk-ticket-fake">
        <div class="dk-ticket-label" data-es="FALSO" data-en="FAKE">FALSO</div>
        <div class="dk-ticket-event">Bad Bunny — World Tour</div>
        <div class="dk-ticket-venue">Estadio Nacional • 15 Mar 2026</div>
        <div class="dk-ticket-price-row">
          <div>
            <div class="dk-ticket-price-label" data-es="PRECIO SCAMMER" data-en="SCAMMER PRICE">PRECIO SCAMMER</div>
            <div class="dk-ticket-price">S/1,350</div>
          </div>
          <div style="font-size:13px;color:var(--text-dim);text-align:right;">
            <span data-es="Precio real:" data-en="Real price:">Precio real:</span> <span style="text-decoration:line-through;">S/270</span>
          </div>
        </div>
        <div class="dk-ticket-qr">
          <div class="dk-ticket-qr-box"></div>
          <span data-es="QR INVÁLIDO — DATOS CORRUPTOS" data-en="INVALID QR — CORRUPT DATA">QR INVÁLIDO — DATOS CORRUPTOS</span>
        </div>
      </div>
      <div class="dk-ticket dk-ticket-real">
        <div class="dk-ticket-label">☺ VERIFIED</div>
        <div class="dk-ticket-event" style="color:#fff;">Bad Bunny — World Tour</div>
        <div class="dk-ticket-venue">Estadio Nacional • 15 Mar 2026</div>
        <div class="dk-ticket-price-row">
          <div>
            <div class="dk-ticket-price-label" data-es="PRECIO JUSTO" data-en="FAIR PRICE">PRECIO JUSTO</div>
            <div class="dk-ticket-price">S/270</div>
          </div>
          <div style="font-size:12px;color:var(--text-dim);text-align:right;">
            <span data-es="Vinculado a:" data-en="Linked to:">Vinculado a:</span><br><span style="color:var(--acid);font-weight:700;">Mario G. ✓</span>
          </div>
        </div>
        <div class="dk-ticket-qr">
          <div class="dk-ticket-qr-box"></div>
          <span data-es="ID VERIFICADO — ENTRADA GARANTIZADA" data-en="ID VERIFIED — ENTRY GUARANTEED">ID VERIFICADO — ENTRADA GARANTIZADA</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 2. MISSION -->
  <div class="dk-mission">
    <div class="dk-mission-line" data-es="Entra a eventos con confianza" data-en="Step into events with confidence">Entra a eventos con confianza</div>
    <div class="dk-mission-line highlight" data-es="Colecciona recuerdos memorables" data-en="Collect meaningful memories">Colecciona recuerdos memorables</div>
    <div class="dk-mission-line" data-es="Y celebremos la " data-en="And let's celebrate ">Y celebremos la <span class="acid" data-es="música" data-en="music">música</span></div>
  </div>

  <!-- 3. PROBLEM — "The gamble" -->
  <div class="dk-slide">
    <div class="dk-slide-label" data-es="El problema" data-en="The problem">El problema</div>
    <h2 data-es="Conseguir entradas de reventa es una <em>lotería</em>" data-en="Getting resale tickets is a <em>gamble</em>">Conseguir entradas de reventa es una <em>lotería</em></h2>
    <div class="dk-pills">
      <div class="dk-pill red" data-es="🚨 Peligroso" data-en="🚨 Dangerous">🚨 Peligroso</div>
      <div class="dk-pill red" data-es="📈 Scalping" data-en="📈 Scalping">📈 Scalping</div>
      <div class="dk-pill red" data-es="🎫 Entradas falsas" data-en="🎫 Fake tickets">🎫 Entradas falsas</div>
    </div>
    <div class="dk-problems">
      <div class="dk-problem">
        <div class="dk-problem-icon">🎫</div>
        <h3 data-es="Entradas falsas" data-en="Fake tickets">Entradas falsas</h3>
        <p data-es="1 de cada 4 tickets vendidos en reventa son falsos. Los compradores pierden su dinero y se quedan afuera." data-en="1 in 4 resale tickets are fake. Buyers lose their money and get left outside.">1 de cada 4 tickets vendidos en reventa son falsos. Los compradores pierden su dinero y se quedan afuera.</p>
      </div>
      <div class="dk-problem">
        <div class="dk-problem-icon">💸</div>
        <h3 data-es="Reventa abusiva" data-en="Scalping">Reventa abusiva</h3>
        <p data-es="Los revendedores compran masivamente y venden a 3x-10x el precio. Los fans no pueden acceder." data-en="Scalpers bulk-buy and resell at 3x-10x the price. Real fans can't access fair prices.">Los revendedores compran masivamente y venden a 3x-10x el precio. Los fans no pueden acceder.</p>
      </div>
      <div class="dk-problem">
        <div class="dk-problem-icon">🚪</div>
        <h3 data-es="Sin verificación" data-en="No verification">Sin verificación</h3>
        <p data-es="No existe un estándar para validar identidad en puerta. Cualquiera usa una entrada robada o duplicada." data-en="There's no standard to validate identity at the door. Anyone can use a stolen or duplicated ticket.">No existe un estándar para validar identidad en puerta. Cualquiera usa una entrada robada o duplicada.</p>
      </div>
    </div>
  </div>

  <!-- 4. PROBLEM EVIDENCE — News clippings -->
  <div class="dk-slide-half">
    <div class="dk-slide-label" data-es="Y el problema sigue creciendo" data-en="And the problem keeps growing">Y el problema sigue creciendo</div>
    <div class="dk-news-grid">
      <div class="dk-news-card">
        <div class="dk-news-source">Billboard</div>
        <h4 data-es="Fans de Taylor Swift estafados con entradas falsas por más de $1M en gira Eras" data-en="Taylor Swift fans scammed with fake tickets for over $1M during Eras Tour">Fans de Taylor Swift estafados con entradas falsas por más de $1M en gira Eras</h4>
        <div class="dk-news-tag" data-es="Fraude global" data-en="Global fraud">Fraude global</div>
      </div>
      <div class="dk-news-card">
        <div class="dk-news-source">RPP Noticias</div>
        <h4 data-es="Estafas masivas con entradas de Bad Bunny en Lima: cientos de afectados" data-en="Massive Bad Bunny ticket scams in Lima: hundreds affected">Estafas masivas con entradas de Bad Bunny en Lima: cientos de afectados</h4>
        <div class="dk-news-tag" data-es="Perú" data-en="Peru">Perú</div>
      </div>
      <div class="dk-news-card">
        <div class="dk-news-source">El Comercio</div>
        <h4 data-es="Revendedores copan eventos electrónicos: entradas a 5x su precio en redes sociales" data-en="Scalpers flood electronic events: tickets at 5x price on social media">Revendedores copan eventos electrónicos: entradas a 5x su precio en redes sociales</h4>
        <div class="dk-news-tag" data-es="Reventa" data-en="Scalping">Reventa</div>
      </div>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="dk-stats">
    <div class="dk-stats-inner">
      <div>
        <div class="dk-stat-num red">$500M+</div>
        <div class="dk-stat-label" data-es="Perdidos en estafas/año" data-en="Lost to scams/year">Perdidos en estafas/año</div>
      </div>
      <div>
        <div class="dk-stat-num red">1 de 4</div>
        <div class="dk-stat-label" data-es="Tickets son falsos" data-en="Tickets are fake">Tickets son falsos</div>
      </div>
      <div>
        <div class="dk-stat-num green">0%</div>
        <div class="dk-stat-label" data-es="Fraude con Lezgo" data-en="Fraud with Lezgo">Fraude con Lezgo</div>
      </div>
      <div>
        <div class="dk-stat-num acid">☺</div>
        <div class="dk-stat-label" data-es="Vibes garantizados" data-en="Guaranteed vibes">Vibes garantizados</div>
      </div>
    </div>
  </div>

  <!-- 5. SOLUTION B2B -->
  <div class="dk-value-section dk-value-b2b">
    <div class="dk-value-inner">
      <div class="dk-value-badge" data-es="PARA ORGANIZADORES" data-en="FOR ORGANIZERS">PARA ORGANIZADORES</div>
      <h2 data-es="Lezgo da <span>confianza</span> a organizadores y productores" data-en="Lezgo provides <span>trust</span> to organizers and producers">Lezgo da <span>confianza</span> a organizadores y productores</h2>
      <div class="dk-value-grid">
        <div class="dk-value-card">
          <div class="dk-value-icon">🛡️</div>
          <h3 data-es="Anti Falsificación" data-en="Anti Counterfeit">Anti Falsificación</h3>
          <p data-es="Cada ticket está vinculado a un ID verificado. Imposible duplicar o falsificar entradas." data-en="Every ticket is linked to a verified ID. Impossible to duplicate or counterfeit tickets.">Cada ticket está vinculado a un ID verificado. Imposible duplicar o falsificar entradas.</p>
        </div>
        <div class="dk-value-card">
          <div class="dk-value-icon">👥</div>
          <h3 data-es="Social + Fidelización" data-en="Social + Loyalty">Social + Fidelización</h3>
          <p data-es="Programa de fidelización integrado. Recompensa a tus asistentes más fieles con beneficios exclusivos." data-en="Built-in loyalty program. Reward your most loyal attendees with exclusive perks.">Programa de fidelización integrado. Recompensa a tus asistentes más fieles con beneficios exclusivos.</p>
        </div>
        <div class="dk-value-card">
          <div class="dk-value-icon">💰</div>
          <h3 data-es="+ Fuentes de Ingreso" data-en="+ Revenue Streams">+ Fuentes de Ingreso</h3>
          <p data-es="Monetiza la reventa oficial, cobra comisiones automáticas, y accede a data de tu audiencia real." data-en="Monetize official resale, charge automatic commissions, and access real audience data.">Monetiza la reventa oficial, cobra comisiones automáticas, y accede a data de tu audiencia real.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 6. SOLUTION B2C -->
  <div class="dk-value-section dk-value-b2c">
    <div class="dk-value-inner">
      <div class="dk-value-badge" data-es="PARA ASISTENTES" data-en="FOR ATTENDEES">PARA ASISTENTES</div>
      <h2 data-es="Lezgo da <span>seguridad</span> a los asistentes" data-en="Lezgo provides <span>security</span> to end-consumers">Lezgo da <span>seguridad</span> a los asistentes</h2>
      <div class="dk-value-grid">
        <div class="dk-value-card">
          <div class="dk-value-icon">✅</div>
          <h3 data-es="Confiabilidad" data-en="Reliability">Confiabilidad</h3>
          <p data-es="Tu entrada es tuya, verificada y real. Nadie puede duplicarla ni falsificarla." data-en="Your ticket is yours, verified and real. No one can duplicate or fake it.">Tu entrada es tuya, verificada y real. Nadie puede duplicarla ni falsificarla.</p>
        </div>
        <div class="dk-value-card">
          <div class="dk-value-icon">🔄</div>
          <h3 data-es="Mercado P2P abierto" data-en="Open P2P Market">Mercado P2P abierto</h3>
          <p data-es="Revende tu entrada de forma segura a precio justo. Sin revendedores abusivos en el medio." data-en="Resell your ticket safely at fair price. No abusive scalpers in between.">Revende tu entrada de forma segura a precio justo. Sin revendedores abusivos en el medio.</p>
        </div>
        <div class="dk-value-card">
          <div class="dk-value-icon">🪪</div>
          <h3 data-es="Sin QRs" data-en="No QRs">Sin QRs</h3>
          <p data-es="Tu ID es tu ticket. Sin códigos que se puedan capturar, copiar o compartir." data-en="Your ID is your ticket. No codes that can be captured, copied or shared.">Tu ID es tu ticket. Sin códigos que se puedan capturar, copiar o compartir.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 7. HOW IT WORKS -->
  <div class="dk-slide">
    <div class="dk-slide-label" data-es="Cómo funciona" data-en="How it works">Cómo funciona</div>
    <h2 data-es="Espera, ¿ya no hay <span>QRs</span>?" data-en="Wait, RLY? No more <span>QRs</span>?">Espera, ¿ya no hay <span>QRs</span>?</h2>
    <div class="dk-flow-grid">
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🎫</div>
        <h3 data-es="Consigue tu entrada" data-en="Get your ticket">Consigue tu entrada</h3>
        <p data-es="Compra o recibe tu entrada. Se vincula automáticamente a tu identidad." data-en="Buy or receive your ticket. It automatically links to your identity.">Compra o recibe tu entrada. Se vincula automáticamente a tu identidad.</p>
      </div>
      <div class="dk-flow-arrow">→</div>
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🪪</div>
        <h3 data-es="Presenta tu ID" data-en="Show your ID">Presenta tu ID</h3>
        <p data-es="En la puerta, muestra tu documento. El staff verifica tu identidad con foto en segundos." data-en="At the door, show your ID. Staff verifies your identity with a photo in seconds.">En la puerta, muestra tu documento. El staff verifica tu identidad con foto en segundos.</p>
      </div>
      <div class="dk-flow-arrow">→</div>
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🎉</div>
        <h3 data-es="Disfruta" data-en="Enjoy">Disfruta</h3>
        <p data-es="Entras verificado. Sin estrés, sin estafas, sin filas eternas." data-en="Verified entry. No stress, no scams, no endless lines.">Entras verificado. Sin estrés, sin estafas, sin filas eternas.</p>
      </div>
    </div>
  </div>

  <!-- 8A. MAGIC BEHIND — SIMPLE VERSION -->
  <div class="dk-slide dk-simple">
    <div class="dk-slide-label" data-es="La tecnología" data-en="The technology">La tecnología</div>
    <h2 data-es="Tickets digitales vinculados a tu <span>identidad</span>" data-en="Digital tickets linked to your <span>identity</span>">Tickets digitales vinculados a tu <span>identidad</span></h2>
    <div class="dk-flow-grid">
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🔗</div>
        <h3 data-es="Ticket = ID" data-en="Ticket = ID">Ticket = ID</h3>
        <p data-es="Cada entrada vive vinculada a la identidad verificada de su dueño. Imposible duplicar." data-en="Each ticket lives linked to the verified identity of its owner. Impossible to duplicate.">Cada entrada vive vinculada a la identidad verificada de su dueño. Imposible duplicar.</p>
      </div>
      <div class="dk-flow-arrow">→</div>
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">📸</div>
        <h3 data-es="Foto + ID = Acceso" data-en="Photo + ID = Access">Foto + ID = Acceso</h3>
        <p data-es="En puerta, el staff toma foto con tu ID. Verificación instantánea en menos de 3 segundos." data-en="At the door, staff takes a photo with your ID. Instant verification in under 3 seconds.">En puerta, el staff toma foto con tu ID. Verificación instantánea en menos de 3 segundos.</p>
      </div>
      <div class="dk-flow-arrow">→</div>
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🎉</div>
        <h3 data-es="Disfruta" data-en="Enjoy">Disfruta</h3>
        <p data-es="Tu entrada se valida y recibes tu prueba de asistencia. Sin estrés, sin estafas. ¡A gozar!" data-en="Your ticket is validated and you receive your proof of attendance. No stress, no scams. Let's go!">Tu entrada se valida y recibes tu prueba de asistencia. Sin estrés, sin estafas. ¡A gozar!</p>
      </div>
    </div>
  </div>

  <!-- 8B. MAGIC BEHIND — TECH VERSION -->
  <div class="dk-slide dk-tech">
    <div class="dk-slide-label" data-es="La magia detrás" data-en="The magic behind">La magia detrás</div>
    <h2 data-es="Right to Attend <span>NFTs</span>" data-en="Right to Attend <span>NFTs</span>">Right to Attend <span>NFTs</span></h2>
    <div class="dk-flow-grid">
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🔗</div>
        <h3 data-es="NFTs vinculados a IDs" data-en="NFTs linked to IDs">NFTs vinculados a IDs</h3>
        <p data-es="Cada ticket es un NFT en la blockchain, inseparable de la identidad del titular." data-en="Each ticket is an NFT on the blockchain, inseparable from the holder's identity.">Cada ticket es un NFT en la blockchain, inseparable de la identidad del titular.</p>
      </div>
      <div class="dk-flow-arrow">→</div>
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🔥</div>
        <h3 data-es="Escanea ID, Quema NFT" data-en="Scan ID, Burn NFT">Escanea ID, Quema NFT</h3>
        <p data-es="Al validar identidad en puerta, el NFT se quema. Imposible reutilizar o duplicar." data-en="When identity is validated at the door, the NFT is burned. Impossible to reuse or duplicate.">Al validar identidad en puerta, el NFT se quema. Imposible reutilizar o duplicar.</p>
      </div>
      <div class="dk-flow-arrow">→</div>
      <div class="dk-flow-step">
        <div class="dk-flow-emoji">🎉</div>
        <h3 data-es="Disfruta + POAP" data-en="Enjoy + POAP">Disfruta + POAP</h3>
        <p data-es="Al quemar el NFT, se mintea un POAP como prueba de asistencia y badge de fidelización." data-en="When the NFT is burned, a POAP is minted as proof of attendance and loyalty badge.">Al quemar el NFT, se mintea un POAP como prueba de asistencia y badge de fidelización.</p>
      </div>
    </div>
  </div>

  <!-- 9A. TECH BENEFITS — SIMPLE VERSION -->
  <div class="dk-slide dk-simple">
    <div class="dk-slide-label" data-es="Tecnología invisible" data-en="Invisible technology">Tecnología invisible</div>
    <h2 data-es="Tecnología de punta sin <span>complejidad</span>" data-en="Cutting-edge tech without <span>complexity</span>">Tecnología de punta sin <span>complejidad</span></h2>
    <div class="dk-benefits-grid">
      <div class="dk-benefit-card dk-bc-blue">
        <div class="dk-bc-icon">🔓</div>
        <h3 data-es="Login sin contraseña" data-en="Passwordless login">Login sin contraseña</h3>
        <p data-es="Accede con tu identidad. Sin emails, sin passwords, sin fricción." data-en="Access with your identity. No emails, no passwords, no friction.">Accede con tu identidad. Sin emails, sin passwords, sin fricción.</p>
      </div>
      <div class="dk-benefit-card dk-bc-green">
        <div class="dk-bc-icon">💸</div>
        <h3 data-es="Sin fees ocultos" data-en="Zero hidden fees">Sin fees ocultos</h3>
        <p data-es="Comisiones transparentes. Lo que ves es lo que pagas, siempre." data-en="Transparent commissions. What you see is what you pay, always.">Comisiones transparentes. Lo que ves es lo que pagas, siempre.</p>
      </div>
      <div class="dk-benefit-card dk-bc-purple">
        <div class="dk-bc-icon">👆</div>
        <h3 data-es="Un tap y listo" data-en="One-tap operations">Un tap y listo</h3>
        <p data-es="Compra, transfiere y valida con un solo toque. Cero pasos extras." data-en="Buy, transfer and validate with a single touch. Zero extra steps.">Compra, transfiere y valida con un solo toque. Cero pasos extras.</p>
      </div>
      <div class="dk-benefit-card dk-bc-yellow">
        <div class="dk-bc-icon">📈</div>
        <h3 data-es="Revenue automático" data-en="Automatic revenue split">Revenue automático</h3>
        <p data-es="Los organizadores reciben su parte instantáneamente en cada transacción y reventa." data-en="Organizers receive their share instantly on every transaction and resale.">Los organizadores reciben su parte instantáneamente en cada transacción y reventa.</p>
      </div>
    </div>
  </div>

  <!-- 9B. TECH BENEFITS — TECH VERSION -->
  <div class="dk-slide dk-tech">
    <div class="dk-slide-label" data-es="Beneficios blockchain" data-en="Blockchain benefits">Beneficios blockchain</div>
    <h2 data-es="Disfruta blockchain sin lidiar con <span>blockchain</span>" data-en="Enjoy blockchain benefits without dealing with <span>blockchain</span>">Disfruta blockchain sin lidiar con <span>blockchain</span></h2>
    <div class="dk-benefits-grid">
      <div class="dk-benefit-card dk-bc-blue">
        <div class="dk-bc-icon">🔓</div>
        <h3>Account Abstraction</h3>
        <p data-es="Wallets invisibles. El usuario nunca ve crypto, seeds ni gas fees." data-en="Invisible wallets. Users never see crypto, seeds or gas fees.">Wallets invisibles. El usuario nunca ve crypto, seeds ni gas fees.</p>
      </div>
      <div class="dk-benefit-card dk-bc-green">
        <div class="dk-bc-icon">💸</div>
        <h3>Payless Transactions</h3>
        <p data-es="Gas fees subsidiados por el protocolo. El usuario paga $0 en fees de blockchain." data-en="Gas fees subsidized by protocol. Users pay $0 in blockchain fees.">Gas fees subsidiados por el protocolo. El usuario paga $0 en fees de blockchain.</p>
      </div>
      <div class="dk-benefit-card dk-bc-purple">
        <div class="dk-bc-icon">👆</div>
        <h3>Signless Operations</h3>
        <p data-es="Sin firmas de wallet. Las transacciones se ejecutan con session keys pre-autorizados." data-en="No wallet signatures. Transactions execute with pre-authorized session keys.">Sin firmas de wallet. Las transacciones se ejecutan con session keys pre-autorizados.</p>
      </div>
      <div class="dk-benefit-card dk-bc-yellow">
        <div class="dk-bc-icon">📈</div>
        <h3>Automated Revenue Split</h3>
        <p data-es="Smart contracts distribuyen revenue automáticamente entre organizador, artista y plataforma." data-en="Smart contracts automatically distribute revenue between organizer, artist and platform.">Smart contracts distribuyen revenue automáticamente entre organizador, artista y plataforma.</p>
      </div>
    </div>
  </div>

  <!-- 10. PROFILE & BADGES -->
  <div class="dk-profile-section">
    <!-- LEFT: Text + Features -->
    <div class="dk-profile-left">
      <div class="dk-slide-label" data-es="Perfil y fidelización" data-en="Profile &amp; loyalty">Perfil y fidelización</div>
      <h2 data-es="Tu perfil, tus <span>experiencias</span>" data-en="Your profile, your <span>experiences</span>">Tu perfil, tus <span>experiencias</span></h2>
      <p data-es="Cada evento al que asistes se convierte en un badge coleccionable. Sube de nivel, desbloquea beneficios y demuestra que eres un verdadero raver." data-en="Every event becomes a collectible badge. Level up, unlock perks and prove you're a true raver.">Cada evento al que asistes se convierte en un badge coleccionable. Sube de nivel, desbloquea beneficios y demuestra que eres un verdadero raver.</p>
      <div class="dk-profile-features">
        <div class="dk-profile-feat">
          <div class="dk-profile-feat-icon">🏆</div>
          <div class="dk-profile-feat-text">
            <h4 data-es="Colecciona badges" data-en="Collect badges">Colecciona badges</h4>
            <p data-es="Cada evento es un badge único en tu perfil" data-en="Each event is a unique badge on your profile">Cada evento es un badge único en tu perfil</p>
          </div>
        </div>
        <div class="dk-profile-feat">
          <div class="dk-profile-feat-icon">🔥</div>
          <div class="dk-profile-feat-text">
            <h4 data-es="Rachas y niveles" data-en="Streaks &amp; levels">Rachas y niveles</h4>
            <p data-es="Sube de nivel asistiendo a más eventos" data-en="Level up by attending more events">Sube de nivel asistiendo a más eventos</p>
          </div>
        </div>
        <div class="dk-profile-feat">
          <div class="dk-profile-feat-icon">⚡</div>
          <div class="dk-profile-feat-text">
            <h4 data-es="Beneficios exclusivos" data-en="Exclusive perks">Beneficios exclusivos</h4>
            <p data-es="Early access, descuentos y experiencias VIP" data-en="Early access, discounts &amp; VIP experiences">Early access, descuentos y experiencias VIP</p>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: Phone Showcase -->
    <div class="dk-showcase">
      <!-- Secondary phone LEFT (events screen) -->
      <div class="dk-phone-secondary dk-phone-left">
        <div class="dk-phone-screen-secondary">
          <div class="dk-phone-statusbar"><span>9:41</span><span></span><span>●●●</span></div>
          <div style="padding: 8px 4px;">
            <div class="dk-mock-bar accent" style="height: 14px; width: 50%; margin-bottom: 16px;"></div>
            <div class="dk-mock-card">
              <div class="dk-mock-card-row"><div class="dk-mock-avatar"></div><div class="dk-mock-lines"><div class="dk-mock-bar med"></div><div class="dk-mock-bar short"></div></div></div>
            </div>
            <div class="dk-mock-card">
              <div class="dk-mock-card-row"><div class="dk-mock-avatar"></div><div class="dk-mock-lines"><div class="dk-mock-bar med"></div><div class="dk-mock-bar short"></div></div></div>
            </div>
            <div class="dk-mock-card">
              <div class="dk-mock-card-row"><div class="dk-mock-avatar"></div><div class="dk-mock-lines"><div class="dk-mock-bar med"></div><div class="dk-mock-bar short"></div></div></div>
            </div>
            <div class="dk-mock-card">
              <div class="dk-mock-card-row"><div class="dk-mock-avatar"></div><div class="dk-mock-lines"><div class="dk-mock-bar med"></div><div class="dk-mock-bar short"></div></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- MAIN phone (center, front) -->
      <div class="dk-phone">
        <div class="dk-phone-screen">
          <div class="dk-phone-statusbar">
            <span>9:41</span>
            <span>LEZGO</span>
            <span>●●●</span>
          </div>
          <div class="dk-phone-header">
            <div class="dk-phone-avatar">☺</div>
            <div class="dk-phone-name">Mario G.</div>
            <div class="dk-phone-handle">@mariog • Lima, PE</div>
          </div>
          <div class="dk-phone-stats">
            <div class="dk-phone-stat">
              <div class="dk-phone-stat-num">12</div>
              <div class="dk-phone-stat-label">Eventos</div>
            </div>
            <div class="dk-phone-stat">
              <div class="dk-phone-stat-num">8</div>
              <div class="dk-phone-stat-label">Badges</div>
            </div>
            <div class="dk-phone-stat">
              <div class="dk-phone-stat-num">LV.4</div>
              <div class="dk-phone-stat-label">Nivel</div>
            </div>
          </div>
          <div class="dk-badges-grid">
            <div class="dk-badge"><span class="dk-badge-emoji">🎵</span>Connoisseur</div>
            <div class="dk-badge"><span class="dk-badge-emoji">🔊</span>Bass Head</div>
            <div class="dk-badge"><span class="dk-badge-emoji">🎪</span>8 Raves</div>
            <div class="dk-badge"><span class="dk-badge-emoji">🌙</span>Night Owl</div>
            <div class="dk-badge"><span class="dk-badge-emoji">⚡</span>Early Bird</div>
            <div class="dk-badge"><span class="dk-badge-emoji">🏆</span>VIP Status</div>
          </div>
        </div>
      </div>

      <!-- Secondary phone RIGHT (ticket screen) -->
      <div class="dk-phone-secondary dk-phone-right">
        <div class="dk-phone-screen-secondary">
          <div class="dk-phone-statusbar"><span>9:41</span><span></span><span>●●●</span></div>
          <div style="padding: 8px 4px;">
            <div class="dk-mock-bar accent" style="height: 14px; width: 40%; margin-bottom: 16px;"></div>
            <div style="background: rgba(229,255,0,0.06); border: 1px solid rgba(229,255,0,0.15); border-radius: 16px; padding: 20px 14px; text-align: center; margin-bottom: 12px;">
              <div style="font-size: 40px; margin-bottom: 8px;">🎫</div>
              <div class="dk-mock-bar accent" style="width: 70%; margin: 0 auto 8px;"></div>
              <div class="dk-mock-bar" style="width: 50%; margin: 0 auto;"></div>
            </div>
            <div class="dk-mock-card">
              <div class="dk-mock-bar med"></div>
              <div class="dk-mock-bar short"></div>
            </div>
            <div class="dk-mock-card">
              <div class="dk-mock-bar med"></div>
              <div class="dk-mock-bar short"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Floating notifications -->
      <div class="dk-notif dk-notif-top">
        <div class="dk-notif-icon">🏆</div>
        <div class="dk-notif-title">Nuevo badge!</div>
        <div class="dk-notif-sub">Desbloqueaste <span class="dk-notif-accent">Night Owl</span></div>
      </div>
      <div class="dk-notif dk-notif-mid">
        <div class="dk-notif-icon">🔥</div>
        <div class="dk-notif-title">Racha x3</div>
        <div class="dk-notif-sub">3 eventos · <span class="dk-notif-accent">+500 pts</span></div>
      </div>
    </div>
  </div>

  <!-- 11. ECOSYSTEM -->
  <div class="dk-slide">
    <div class="dk-slide-label" data-es="Ecosistema" data-en="Ecosystem">Ecosistema</div>
    <h2 data-es="El flujo completo de <span>Lezgo</span>" data-en="The complete <span>Lezgo</span> flow">El flujo completo de <span>Lezgo</span></h2>
    <div class="dk-eco-grid">
      <div class="dk-eco-card">
        <h3 data-es="🎤 Productor" data-en="🎤 Producer">🎤 Productor</h3>
        <div class="dk-eco-step" data-es="Crea evento" data-en="Creates event">Crea evento</div>
        <div class="dk-eco-step" data-es="Sube entradas" data-en="Uploads tickets">Sube entradas</div>
        <div class="dk-eco-step" data-es="Define precios y reglas" data-en="Sets prices &amp; rules">Define precios y reglas</div>
        <div class="dk-eco-step" data-es="Recibe revenue automático" data-en="Receives automatic revenue">Recibe revenue automático</div>
        <div class="dk-eco-arrow">→</div>
      </div>
      <div class="dk-eco-card">
        <h3 data-es="🎟️ Comprador" data-en="🎟️ Buyer">🎟️ Comprador</h3>
        <div class="dk-eco-step" data-es="Verifica identidad (1 vez)" data-en="Verifies identity (once)">Verifica identidad (1 vez)</div>
        <div class="dk-eco-step" data-es="Compra entrada segura" data-en="Buys secure ticket">Compra entrada segura</div>
        <div class="dk-eco-step" data-es="Recibe ticket vinculado" data-en="Receives linked ticket">Recibe ticket vinculado</div>
        <div class="dk-eco-step" data-es="Puede transferir o revender" data-en="Can transfer or resell">Puede transferir o revender</div>
        <div class="dk-eco-arrow">→</div>
      </div>
      <div class="dk-eco-card">
        <h3 data-es="🔄 Mercado Secundario" data-en="🔄 Secondary Market">🔄 Mercado Secundario</h3>
        <div class="dk-eco-step" data-es="Reventa a precio justo" data-en="Fair-price resale">Reventa a precio justo</div>
        <div class="dk-eco-step" data-es="Re-vinculación automática" data-en="Automatic re-linking">Re-vinculación automática</div>
        <div class="dk-eco-step" data-es="Comisión para productor" data-en="Commission for producer">Comisión para productor</div>
        <div class="dk-eco-step" data-es="Sin falsificación posible" data-en="No counterfeiting possible">Sin falsificación posible</div>
        <div class="dk-eco-arrow">→</div>
      </div>
      <div class="dk-eco-card">
        <h3 data-es="📊 Dashboard" data-en="📊 Dashboard">📊 Dashboard</h3>
        <div class="dk-eco-step" data-es="Analytics en tiempo real" data-en="Real-time analytics">Analytics en tiempo real</div>
        <div class="dk-eco-step" data-es="Data de audiencia verificada" data-en="Verified audience data">Data de audiencia verificada</div>
        <div class="dk-eco-step" data-es="Control de acceso en puerta" data-en="Door access control">Control de acceso en puerta</div>
        <div class="dk-eco-step" data-es="Reportes de revenue" data-en="Revenue reports">Reportes de revenue</div>
      </div>
    </div>
  </div>

  <!-- 12. REVENUE MODEL -->
  <div class="dk-slide">
    <div class="dk-slide-label dk-simple" data-es="Modelo de negocio" data-en="Business model">Modelo de negocio</div>
    <div class="dk-slide-label dk-tech" data-es="Wen Profit?" data-en="Wen Profit?">Wen Profit?</div>
    <h2 data-es="Cómo <span>genera ingresos</span>" data-en="How it <span>generates revenue</span>">Cómo <span>genera ingresos</span></h2>
    <div class="dk-revenue-grid">
      <div class="dk-revenue-card">
        <div class="dk-revenue-pct">&lt;15%</div>
        <h3 data-es="Comisión de plataforma" data-en="Platform fee">Comisión de plataforma</h3>
        <p data-es="Comisión por cada entrada vendida en la plataforma. El organizador define precio, Lezgo cobra el servicio." data-en="Commission on every ticket sold on the platform. Organizer sets price, Lezgo charges the service.">Comisión por cada entrada vendida en la plataforma. El organizador define precio, Lezgo cobra el servicio.</p>
      </div>
      <div class="dk-revenue-card">
        <div class="dk-revenue-pct">&lt;10%</div>
        <h3 data-es="Mercado secundario" data-en="Secondary market fee">Mercado secundario</h3>
        <p data-es="Comisión en cada reventa P2P. Parte va al organizador original, incentivando reventa oficial sobre informal." data-en="Commission on every P2P resale. Part goes to original organizer, incentivizing official over informal resale.">Comisión en cada reventa P2P. Parte va al organizador original, incentivando reventa oficial sobre informal.</p>
      </div>
      <div class="dk-revenue-card">
        <div class="dk-revenue-pct">📊</div>
        <h3 data-es="Monetización de data" data-en="Data monetization">Monetización de data</h3>
        <p data-es="Audiencias verificadas, demografía real, y analytics de eventos. Data premium para organizadores y sponsors." data-en="Verified audiences, real demographics, and event analytics. Premium data for organizers and sponsors.">Audiencias verificadas, demografía real, y analytics de eventos. Data premium para organizadores y sponsors.</p>
      </div>
    </div>
  </div>

  <!-- 13. MARKET SIZE -->
  <div class="dk-slide">
    <div class="dk-slide-label" data-es="Tamaño del mercado" data-en="Market size">Tamaño del mercado</div>
    <h2 data-es="Un mercado de <span>$97B</span> en crecimiento" data-en="A <span>$97B</span> growing market">Un mercado de <span>$97B</span> en crecimiento</h2>
    <div class="dk-market-viz">
      <div class="dk-market-circle small">
        <div class="year">2023</div>
        <div class="amount">$77.49B</div>
      </div>
      <div class="dk-market-circle big">
        <div class="year">2028</div>
        <div class="amount">$97.36B</div>
      </div>
      <div class="dk-market-cagr">CAGR 4.67%</div>
    </div>
  </div>

  <!-- 14. COMPETITORS -->
  <div class="dk-slide">
    <div class="dk-slide-label" data-es="Competencia" data-en="Competition">Competencia</div>
    <h2 data-es="¿Quién más está en el <span>juego</span>?" data-en="Who else is in the <span>game</span>?">¿Quién más está en el <span>juego</span>?</h2>
    <div class="dk-comp-grid">
      <div class="dk-comp-card">
        <h3>Tu Entrada</h3>
        <p data-es="Marketplace de reventa en Perú" data-en="Resale marketplace in Peru">Marketplace de reventa en Perú</p>
        <div class="dk-comp-lacks" data-es="✗ Sin verificación de identidad" data-en="✗ No identity verification">✗ Sin verificación de identidad</div>
      </div>
      <div class="dk-comp-card">
        <h3>Ticketmaster</h3>
        <p data-es="Gigante global de ticketing" data-en="Global ticketing giant">Gigante global de ticketing</p>
        <div class="dk-comp-lacks" data-es="✗ QR codes copiables" data-en="✗ Copyable QR codes">✗ QR codes copiables</div>
      </div>
      <div class="dk-comp-card">
        <h3>Joinnus</h3>
        <p data-es="Plataforma de eventos en Perú" data-en="Event platform in Peru">Plataforma de eventos en Perú</p>
        <div class="dk-comp-lacks" data-es="✗ Sin anti-reventa" data-en="✗ No anti-scalping">✗ Sin anti-reventa</div>
      </div>
      <div class="dk-comp-card">
        <h3>VAOPE</h3>
        <p data-es="Ticketing para productoras" data-en="Ticketing for producers">Ticketing para productoras</p>
        <div class="dk-comp-lacks" data-es="✗ Sin mercado secundario" data-en="✗ No secondary market">✗ Sin mercado secundario</div>
      </div>
      <div class="dk-comp-card">
        <h3>Atrápalo</h3>
        <p data-es="Plataforma de entretenimiento" data-en="Entertainment platform">Plataforma de entretenimiento</p>
        <div class="dk-comp-lacks" data-es="✗ Sin verificación ni reventa" data-en="✗ No verification or resale">✗ Sin verificación ni reventa</div>
      </div>
      <div class="dk-comp-lezgo">
        <h3>LEZGO ☺</h3>
        <p data-es="✓ Verificación de identidad · ✓ Anti falsificación · ✓ Mercado P2P seguro · ✓ Fidelización · ✓ Revenue automático" data-en="✓ Identity verification · ✓ Anti counterfeit · ✓ Secure P2P market · ✓ Loyalty program · ✓ Automatic revenue">✓ Verificación de identidad · ✓ Anti falsificación · ✓ Mercado P2P seguro · ✓ Fidelización · ✓ Revenue automático</p>
      </div>
    </div>
  </div>

  <!-- 15. CTA -->
  <div class="dk-cta">
    <h2 data-es="Celebremos la <span>Música</span>" data-en="Let's Celebrate <span>Music</span>">Celebremos la <span>Música</span></h2>
    <p data-es="Únete a la revolución del ticketing seguro en Latinoamérica" data-en="Join the safe ticketing revolution in Latin America">Únete a la revolución del ticketing seguro en Latinoamérica</p>
    <button class="dk-cta-btn" onclick="window.open('mailto:tata@frensonly.club','_blank')" data-es="☺ HABLEMOS ☺" data-en="☺ LET'S TALK ☺">☺ HABLEMOS ☺</button>
    <div class="dk-cta-contact">
      <a href="mailto:tata@frensonly.club">tata@frensonly.club</a>
    </div>
  </div>


<div class="site-footer">
    <div class="site-footer-logo">LEZGO</div>
    <div class="site-footer-copy">© 2026 Lezgo. Tickets verificados con tu identidad.</div>
  </div>
</div>


<!-- ═══════════════════════════════════════════
     FIREBASE SDK
     ═══════════════════════════════════════════ -->
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>

<!-- ═══════════════════════════════════════════
     FIREBASE INIT + BACKEND LOGIC
     ═══════════════════════════════════════════ -->
<script>
  // ── Firebase Config ──
  const firebaseConfig = {
    apiKey: "AIzaSyDPUyIOfSKa1b9Cn4ExMhmAhacsOzfgu8A",
    authDomain: "lezgo-ticketingapp.firebaseapp.com",
    projectId: "lezgo-ticketingapp",
    storageBucket: "lezgo-ticketingapp.firebasestorage.app",
    messagingSenderId: "218719712607",
    appId: "1:218719712607:web:2c9bd08b0f177f7d8932ea",
    measurementId: "G-5WY8YPW3MV"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // ── Auth State ──
  var currentUser = null;
  var userProfile = null;

  // ── Magic Link Handler ──
  (async function handleMagicLink() {
    if (auth.isSignInWithEmailLink(window.location.href)) {
      let email = window.localStorage.getItem('lezgoEmailForSignIn');
      if (!email) {
        email = window.prompt('Confirma tu email para entrar:');
      }
      if (email) {
        try {
          await auth.signInWithEmailLink(email, window.location.href);
          window.localStorage.removeItem('lezgoEmailForSignIn');
          window.history.replaceState(null, '', window.location.pathname);
        } catch (err) {
          console.error('Magic link sign-in error:', err);
        }
      }
    }
  })();

  auth.onAuthStateChanged(async (user) => {
    currentUser = user;
    if (user) {
      // Load or create user profile
      const doc = await db.collection('users').doc(user.uid).get();
      if (doc.exists) {
        userProfile = doc.data();
      } else {
        userProfile = {
          email: user.email,
          displayName: user.displayName || '',
          photoURL: user.photoURL || '',
          dni: '',
          role: 'fan',
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        };
        await db.collection('users').doc(user.uid).set(userProfile);
      }
      updateUIForAuth(true);
    } else {
      userProfile = null;
      updateUIForAuth(false);
    }
  });

  function updateUIForAuth(loggedIn) {
    const navAvatar = document.querySelector('.nav-avatar');
    const navUsername = document.querySelector('.nav-username');
    if (loggedIn && currentUser) {
      const name = userProfile?.displayName || currentUser.displayName || currentUser.email?.split('@')[0] || 'U';
      const initials = name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2);
      if (navAvatar) navAvatar.textContent = initials;
      if (navUsername) navUsername.textContent = name.split(' ')[0];
      // Show logged-in items in dropdown
      document.querySelectorAll('.nd-logged-in').forEach(el => el.style.display = '');
      document.querySelectorAll('.nd-logged-out').forEach(el => el.style.display = 'none');
      // Show promoter-only items
      const isPromoter = userProfile?.role === 'promoter';
      document.querySelectorAll('.nd-promoter-only').forEach(el => el.style.display = isPromoter ? '' : 'none');
      // Show "Soy Promotor" button only for fans
      const promoterBtn = document.getElementById('pf-promoter-btn');
      if (promoterBtn) promoterBtn.style.display = isPromoter ? 'none' : '';
    } else {
      if (navAvatar) navAvatar.textContent = '?';
      if (navUsername) navUsername.textContent = 'Entrar';
      document.querySelectorAll('.nd-logged-in').forEach(el => el.style.display = 'none');
      document.querySelectorAll('.nd-logged-out').forEach(el => el.style.display = '');
    }
  }

  // ── Promoter contact CTA ──
  function contactPromoter() {
    const msg = '¿Quieres publicar tu evento en Lezgo?\n\nEscríbenos a: hola@lezgo.fans\n\nTe contactaremos para verificar tu cuenta y darte acceso de promotor.';
    alert(msg);
    // Also try to open email client
    window.open('mailto:hola@lezgo.fans?subject=Quiero ser promotor en Lezgo&body=Hola! Me interesa publicar eventos en Lezgo.', '_blank');
  }

  // ── Seed Events (run once) ──
  // ── EVENT DATA MODEL ──
  // Two-layer architecture:
  //
  // LAYER 1 — tags[] (user-facing, searchable, filterable)
  //   Flat array of strings. Users filter by these. Flexible, extensible.
  //   Vocabulary:
  //     Type:     festival, concert, club-night, rave, warehouse, day-party, rooftop, pool-party, afterhours
  //     Genre:    techno, dark-techno, hard-techno, melodic-techno, house, deep-house, progressive, minimal, tech-house, edm, industrial, trance
  //     Vibe:     underground, mainstream, chill, intimate, massive, experimental
  //     Setting:  indoor, outdoor, open-air, mixed
  //     Age:      18+, 21+, all-ages
  //
  // LAYER 2 — meta{} (internal/analytics, never shown to user)
  //   Structured key-value for dashboards, recommendations, data mining.
  //   Keys: bpmRange, production, crowdSize, dressCode, foodDrinks, artistOrigin, multiStage, recurring, avgTicketPrice

  var SEED_EVENTS = [
    {
      id: 'fabriclima-001',
      name: 'FABRICLIMA 001',
      subtitle: 'Grand Opening',
      date: '2026-04-12',
      dateLabel: 'Sáb 12 Abril',
      timeStart: '22:00',
      timeEnd: '10:00',
      venue: 'Almacén 77',
      distrito: 'callao',
      location: 'Callao',
      image: '',
      description: 'La primera noche FABRICLIMA. Tres rooms, un concepto: música sin compromisos. Room 1 techno, Room 2 drum & bass, Room 3 residents locales. No fotos, no VIP, no ego.',
      genre: 'Techno / House / DnB',
      lineup: ['Ben Klock b2b Marcel Dettmann', 'Andy C', 'Craig Richards', 'Residents Lima'],
      tags: ['festival', 'techno', 'house', 'dnb', 'underground', 'indoor', 'massive', '18+'],
      tickets: [
        { id: 'blind', name: 'Blind Ticket', price: 55, priceLabel: 'S/ 55', capacity: 300, sold: 300 },
        { id: 'general', name: 'General', price: 85, priceLabel: 'S/ 85', capacity: 700, sold: 700 },
        { id: 'full', name: 'Full Experience', price: 150, priceLabel: 'S/ 150', capacity: 200, sold: 200 }
      ],
      meta: {
        bpmLow: 100,
        bpmHigh: 174,
        production: 'high-end',
        crowdSize: 1200,
        dressCode: true,
        alcohol: true,
        drinks: true,
        food: false,
        multiStage: true,
        recurring: true,
        artistOrigin: 'DE',
        avgTicketPrice: 97
      },
      heroVideo: 'fJqXu9x0tX4',
      organizer: 'fabriclima',
      status: 'sold-out',
      featured: true,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'bodysonic-lima',
      heroVideo: 'Pb_697GBaxE',
      name: 'Bodysonic',
      subtitle: 'Sub-Bass Experience',
      date: '2026-04-24',
      dateLabel: 'Vie 24 Abril',
      timeStart: '23:59',
      timeEnd: '08:00',
      venue: 'La Cueva',
      distrito: 'cercado',
      location: 'Cercado de Lima',
      image: '',
      description: 'Piso vibratorio instalado para sentir cada frecuencia. Room única, sin decoración, solo concreto y sonido. El sub-bass te atraviesa el cuerpo.',
      genre: 'Industrial Techno',
      lineup: ['Blawan (live)', 'Paula Temple', 'Surgeon'],
      tags: ['rave', 'industrial', 'techno', 'underground', 'indoor', 'intimate', '18+', 'afterhours'],
      tickets: [
        { id: 'presale', name: 'Preventa', price: 40, priceLabel: 'S/ 40', capacity: 100, sold: 100 },
        { id: 'general', name: 'Puerta', price: 65, priceLabel: 'S/ 65', capacity: 180, sold: 112 }
      ],
      meta: {
        bpmLow: 138,
        bpmHigh: 150,
        production: 'minimal',
        crowdSize: 280,
        dressCode: true,
        alcohol: true,
        drinks: true,
        food: false,
        multiStage: false,
        recurring: false,
        artistOrigin: 'UK',
        avgTicketPrice: 53
      },
      organizer: 'fabriclima',
      status: 'published',
      featured: false,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'hessle-audio-lima',
      name: 'HESSLE AUDIO',
      subtitle: 'Lima Session',
      date: '2026-05-03',
      dateLabel: 'Sáb 3 Mayo',
      timeStart: '23:00',
      timeEnd: '07:00',
      venue: 'MATE Museo',
      distrito: 'barranco',
      location: 'Barranco, Lima',
      image: '',
      description: 'El sello que redefinió el bass music UK toma Barranco por una noche. Tres sets back to back. Sonido crudo, ecléctico, impredecible. Si no conoces Hessle, después de esta noche no vas a escuchar música igual.',
      genre: 'UK Bass / Techno',
      lineup: ['Ben UFO', 'Pearson Sound', 'Pangaea'],
      tags: ['club-night', 'techno', 'house', 'bass', 'underground', 'indoor', 'intimate', '18+'],
      tickets: [
        { id: 'early-bird', name: 'Early Bird', price: 45, priceLabel: 'S/ 45', capacity: 120, sold: 120 },
        { id: 'general', name: 'General', price: 70, priceLabel: 'S/ 70', capacity: 230, sold: 85 }
      ],
      meta: {
        bpmLow: 125,
        bpmHigh: 138,
        production: 'standard',
        crowdSize: 350,
        dressCode: false,
        alcohol: true,
        drinks: true,
        food: false,
        multiStage: false,
        recurring: false,
        artistOrigin: 'UK',
        avgTicketPrice: 58
      },
      heroVideo: 'DGWL7YI_2rI',
      organizer: 'hessle-audio',
      status: 'published',
      featured: false,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'drumcode-night-lima',
      name: 'Drumcode Night',
      subtitle: 'Lima Edition',
      date: '2026-05-10',
      dateLabel: 'Sáb 10 Mayo',
      timeStart: '21:00',
      timeEnd: '06:00',
      venue: 'Arena Perú',
      distrito: 'santa-anita',
      location: 'Santa Anita, Lima',
      image: '',
      description: 'Adam Beyer trae Drumcode a Lima. La noche más grande del calendario techno. Producción nivel europeo, Funktion-One, CO2, láser. Techno a escala industrial.',
      genre: 'Techno',
      lineup: ['Adam Beyer', 'Amelie Lens', 'Enrico Sangiuliano', 'Layton Giordani'],
      tags: ['concert', 'techno', 'indoor', 'massive', '18+'],
      tickets: [
        { id: 'early-bird', name: 'Early Bird', price: 99, priceLabel: 'S/ 99', capacity: 500, sold: 500 },
        { id: 'general', name: 'General', price: 169, priceLabel: 'S/ 169', capacity: 1500, sold: 1500 },
        { id: 'vip', name: '👑 VIP', price: 389, priceLabel: 'S/ 389', capacity: 200, sold: 200 },
        { id: 'backstage', name: '🎤 Backstage', price: 649, priceLabel: 'S/ 649', capacity: 30, sold: 30 }
      ],
      meta: {
        bpmLow: 138,
        bpmHigh: 150,
        production: 'high-end',
        crowdSize: 3000,
        dressCode: true,
        alcohol: true,
        drinks: true,
        food: false,
        multiStage: false,
        recurring: false,
        artistOrigin: 'SE',
        avgTicketPrice: 327
      },
      heroVideo: 'GJkuTx1DQzg',
      organizer: 'drumcode',
      status: 'sold-out',
      featured: true,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'room3-sessions-lima',
      heroVideo: '0RIU0cy6L1I',
      name: 'Room 3 Sessions',
      subtitle: 'Vinyl Only',
      date: '2026-05-14',
      dateLabel: 'Jue 14 Mayo',
      timeStart: '22:00',
      timeEnd: '06:00',
      venue: 'Hotel B Rooftop',
      distrito: 'barranco',
      location: 'Barranco, Lima',
      image: '',
      description: '150 personas máximo. Sin requests, sin Shazam, sin teléfonos. Cuatro DJs rotan sets de 2 horas solo en vinilo. Deep house y minimal como debe ser: sin prisa, sin nombre grande, solo discos.',
      genre: 'Deep House / Minimal',
      lineup: ['Resident DJs rotation (4 DJs × 2 hrs)', 'Vinyl only'],
      tags: ['club-night', 'deep-house', 'minimal', 'indoor', 'chill', 'intimate', '18+', 'vinyl-only'],
      tickets: [
        { id: 'general', name: 'Entrada + Drink', price: 60, priceLabel: 'S/ 60', capacity: 150, sold: 63 }
      ],
      meta: {
        bpmLow: 110,
        bpmHigh: 125,
        production: 'minimal',
        crowdSize: 150,
        dressCode: false,
        alcohol: true,
        drinks: true,
        food: false,
        multiStage: false,
        recurring: true,
        artistOrigin: 'PE',
        avgTicketPrice: 60
      },
      organizer: 'fabriclima',
      status: 'published',
      featured: false,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'dekmantel-lima',
      name: 'Dekmantel 2026',
      subtitle: 'LATAM',
      date: '2026-05-25',
      dateLabel: 'Dom 25 Mayo',
      timeStart: '14:00',
      timeEnd: '00:00',
      venue: 'Parque de la Exposición',
      distrito: 'cercado',
      location: 'Cercado de Lima',
      image: '',
      description: 'Dekmantel exporta su filosofía a Lima. De día en el parque, de noche bajo las estrellas. Hunee poniendo disco a las 3pm, Antal cerrando con techno a medianoche. No hay género, hay buen gusto.',
      genre: 'Ecléctica',
      lineup: ['Hunee', 'Antal', 'Young Marco', 'Selectors locales'],
      tags: ['day-party', 'festival', 'house', 'techno', 'disco', 'outdoor', 'chill', 'all-ages'],
      tickets: [
        { id: 'early-bird', name: 'Early Bird', price: 85, priceLabel: 'S/ 85', capacity: 250, sold: 250 },
        { id: 'general', name: 'General', price: 135, priceLabel: 'S/ 135', capacity: 500, sold: 310 },
        { id: 'picnic-vip', name: '🧺 Picnic VIP', price: 220, priceLabel: 'S/ 220', capacity: 100, sold: 22 }
      ],
      meta: {
        bpmLow: 105,
        bpmHigh: 140,
        production: 'standard',
        crowdSize: 900,
        dressCode: false,
        alcohol: true,
        drinks: true,
        food: true,
        multiStage: true,
        recurring: false,
        artistOrigin: 'NL',
        avgTicketPrice: 147
      },
      heroVideo: 'c3ujKbS-nmU',
      organizer: 'dekmantel',
      status: 'published',
      featured: true,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'exit-through-warehouse',
      name: 'EXIT Through The Warehouse',
      subtitle: 'Secret Rave',
      date: '2026-06-06',
      dateLabel: 'Sáb 6 Junio',
      timeStart: '00:00',
      timeEnd: '10:00',
      venue: 'Ubicación secreta (SMS)',
      distrito: 'callao',
      location: 'Callao',
      image: '',
      description: 'No hay flyer. No hay dirección. Compras tu ticket y 3 horas antes recibes un SMS con coordenadas. Sin VIP, sin lista, sin fotos. Hard techno en un almacén vacío. La rave en su forma más pura.',
      genre: 'Hard Techno',
      lineup: ['I Hate Models', 'SPFDJ', 'Héctor Oaks'],
      tags: ['rave', 'warehouse', 'hard-techno', 'underground', 'indoor', 'afterhours', '21+', 'secret-location'],
      tickets: [
        { id: 'blind', name: 'Blind Ticket', price: 50, priceLabel: 'S/ 50', capacity: 200, sold: 200 },
        { id: 'puerta', name: 'Puerta (si encuentras)', price: 80, priceLabel: 'S/ 80', capacity: 200, sold: 0 }
      ],
      meta: {
        bpmLow: 150,
        bpmHigh: 170,
        production: 'minimal',
        crowdSize: 400,
        dressCode: true,
        alcohol: true,
        drinks: false,
        food: false,
        multiStage: false,
        recurring: true,
        artistOrigin: 'FR',
        avgTicketPrice: 65
      },
      heroVideo: 'Et5N_8Kr-EE',
      organizer: 'exit-collective',
      status: 'published',
      featured: false,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'concrete-lima',
      name: 'Concrete × Lima',
      subtitle: 'Riverside Afterhours',
      date: '2026-06-14',
      dateLabel: 'Dom 14 Junio',
      timeStart: '06:00',
      timeEnd: '14:00',
      venue: 'Ribera del Rímac',
      distrito: 'rimac',
      location: 'Rímac, Lima',
      image: '',
      description: 'Homenaje al extinto club parisino Concrete. Afterhours a orilla del río. Empieza cuando sale el sol, termina cuando quema. Para los que no quieren que la noche se acabe.',
      genre: 'Techno',
      lineup: ['Dax J', 'Rebekah', 'DVS1'],
      tags: ['afterhours', 'techno', 'outdoor', 'open-air', 'underground', '18+'],
      tickets: [
        { id: 'presale', name: 'Preventa', price: 55, priceLabel: 'S/ 55', capacity: 150, sold: 150 },
        { id: 'puerta', name: 'Puerta', price: 80, priceLabel: 'S/ 80', capacity: 200, sold: 78 }
      ],
      meta: {
        bpmLow: 138,
        bpmHigh: 150,
        production: 'standard',
        crowdSize: 350,
        dressCode: false,
        alcohol: true,
        drinks: true,
        food: true,
        multiStage: false,
        recurring: false,
        artistOrigin: 'UK',
        avgTicketPrice: 68
      },
      heroVideo: 'QLO_cCxkgwY',
      organizer: 'concrete-lima',
      status: 'published',
      featured: false,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'whp-lima',
      name: 'WHP Lima',
      subtitle: 'Warehouse Project',
      date: '2026-06-27',
      dateLabel: 'Sáb 27 Junio',
      timeStart: '20:00',
      timeEnd: '06:00',
      venue: 'Almacén Industrial',
      distrito: 'callao',
      location: 'Callao',
      image: '',
      description: 'El concepto Warehouse Project de Manchester llega a Lima. Tres rooms en un almacén industrial. Four Tet con su live set hipnótico, Floating Points ecléctico, Room 3 con underground limeño.',
      genre: 'Multi-genre',
      lineup: ['Four Tet (live)', 'Floating Points (DJ set)', 'Selectors locales'],
      tags: ['festival', 'house', 'techno', 'experimental', 'indoor', 'massive', '18+'],
      tickets: [
        { id: 'early-bird', name: 'Early Bird', price: 75, priceLabel: 'S/ 75', capacity: 300, sold: 300 },
        { id: 'general', name: 'General', price: 125, priceLabel: 'S/ 125', capacity: 900, sold: 641 },
        { id: 'full-access', name: 'Full Access', price: 200, priceLabel: 'S/ 200', capacity: 300, sold: 118 }
      ],
      meta: {
        bpmLow: 110,
        bpmHigh: 145,
        production: 'high-end',
        crowdSize: 1500,
        dressCode: false,
        alcohol: true,
        drinks: true,
        food: true,
        multiStage: true,
        recurring: false,
        artistOrigin: 'UK',
        avgTicketPrice: 133
      },
      heroVideo: 'Ca6pjR2TLns',
      organizer: 'whp-global',
      status: 'published',
      featured: true,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    },
    {
      id: 'sunday-papers-lima',
      name: 'Sunday Papers',
      subtitle: 'Extended Brunch',
      date: '2026-07-05',
      dateLabel: 'Dom 5 Julio',
      timeStart: '12:00',
      timeEnd: '22:00',
      venue: 'Jardín Privado',
      distrito: 'surco',
      location: 'Santiago de Surco',
      image: '',
      description: 'Brunch electrónico dominical. Villalobos toca 6 horas en un jardín privado de Surco. Comida de mercado, vino natural, niños bienvenidos hasta las 4pm. Después se pone serio.',
      genre: 'Minimal / Micro House',
      lineup: ['Ricardo Villalobos (6 hrs extended)', 'Zip', 'Sonja Moonear'],
      tags: ['day-party', 'minimal', 'house', 'outdoor', 'chill', 'all-ages', 'brunch', 'extended-set'],
      tickets: [
        { id: 'brunch', name: 'Brunch General', price: 95, priceLabel: 'S/ 95', capacity: 300, sold: 189 },
        { id: 'brunch-mesa', name: 'Brunch + Mesa', price: 180, priceLabel: 'S/ 180', capacity: 50, sold: 50 },
        { id: 'musica', name: 'Solo Música (desde 16:00)', price: 65, priceLabel: 'S/ 65', capacity: 150, sold: 34 }
      ],
      meta: {
        bpmLow: 110,
        bpmHigh: 125,
        production: 'standard',
        crowdSize: 500,
        dressCode: false,
        alcohol: true,
        drinks: true,
        food: true,
        multiStage: false,
        recurring: true,
        artistOrigin: 'CL',
        avgTicketPrice: 113
      },
      heroVideo: 'ypyUfeZlQ9k',
      organizer: 'sunday-papers',
      status: 'published',
      featured: false,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    }
  ];

  var SEED_VERSION = 5; // clean slate: 10 Fabric-inspired events only

  async function seedEvents() {
    try {
      // Check if we need to re-seed (version mismatch or empty)
      const metaDoc = await db.collection('_meta').doc('seed').get();
      const currentVersion = metaDoc.exists ? (metaDoc.data().version || 0) : 0;

      if (currentVersion < SEED_VERSION) {
        console.log('Seeding events (v' + SEED_VERSION + ')...');
        const batch = db.batch();
        for (const ev of SEED_EVENTS) {
          batch.set(db.collection('events').doc(ev.id), ev);
        }
        // Store seed version
        batch.set(db.collection('_meta').doc('seed'), { version: SEED_VERSION, updatedAt: firebase.firestore.FieldValue.serverTimestamp() });
        await batch.commit();
        console.log('Events seeded (v' + SEED_VERSION + ')!');
      }
    } catch (err) {
      console.error('seedEvents error:', err);
    }
  }
  seedEvents().then(() => {
    loadEvents();
  });

  // ── Load Events from Firestore ──
  var allEvents = [];
  var currentEventId = null;

  async function loadEvents() {
    try {
      const snapshot = await db.collection('events').where('status', 'in', ['published', 'sold-out']).get();
      allEvents = [];
      snapshot.forEach(doc => {
        allEvents.push({ ...doc.data(), _id: doc.id });
      });
      renderAllSections();
    } catch (err) { console.error('loadEvents error:', err); }
  }

  // ── Smiley SVG (reusable) ──
  var smileyIcon = '<span class="acid-smiley"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="10" r="1.5" fill="currentColor"/><circle cx="15.5" cy="10" r="1.5" fill="currentColor"/><path d="M7.5 15c0 0 2 4 4.5 4s4.5-4 4.5-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" fill="none"/></svg></span>';

  // ── Unsplash placeholder images per genre (fallback when ev.image is empty) ──
  var genreImages = {
    'techno': 'https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=500&q=80',
    'industrial techno': 'https://images.unsplash.com/photo-1545128485-c400e7702796?w=500&q=80',
    'uk bass / techno': 'https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=500&q=80',
    'techno / house / dnb': 'https://images.unsplash.com/photo-1598387993281-cecf8b71a8f8?w=500&q=80',
    'deep house / minimal': 'https://images.unsplash.com/photo-1563841930606-67e2bce48b78?w=500&q=80',
    'ecléctica': 'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=500&q=80',
    'hard techno': 'https://images.unsplash.com/photo-1504680177321-2e6a879aac86?w=500&q=80',
    'multi-genre': 'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=500&q=80',
    'minimal / micro house': 'https://images.unsplash.com/photo-1519892300165-cb5542fb47c7?w=500&q=80'
  };
  var defaultImg = 'https://images.unsplash.com/photo-1566737236500-c8ac43014a67?w=500&q=80';

  function getEventImage(ev) {
    if (ev.image) return ev.image;
    return genreImages[(ev.genre || '').toLowerCase()] || defaultImg;
  }

  function getLowestPrice(ev) {
    if (!ev.tickets || ev.tickets.length === 0) return '';
    if (ev.status === 'sold-out') return 'SOLD OUT';
    var lowest = Math.min.apply(null, ev.tickets.map(function(t){ return t.price; }));
    return 'Desde S/ ' + lowest;
  }

  function formatDateLabel(ev) {
    var d = new Date(ev.date + 'T12:00:00');
    var months = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
    return (d.getDate() < 10 ? '0' : '') + d.getDate() + ' ' + months[d.getMonth()] + ' ' + d.getFullYear();
  }

  // ── Build a single ev-card HTML ──
  function buildEvCard(ev) {
    var img = getEventImage(ev);
    var price = getLowestPrice(ev);
    var isSold = ev.status === 'sold-out';
    var badge = isSold ? '<div class="ev-card-badge badge-hot">Sold Out</div>' :
                ev.featured ? '<div class="ev-card-badge badge-nuevo">Destacado</div>' : '';
    var tags = Array.isArray(ev.tags) ? ev.tags : [];
    return '<div class="ev-card" onclick="openEvent(\'' + ev._id + '\')" style="cursor:pointer" ' +
      'data-distrito="' + (ev.distrito || '') + '" data-date="' + ev.date + '" ' +
      'data-name="' + ev.name.toLowerCase() + '" data-genre="' + (ev.genre || '').toLowerCase() + '" ' +
      'data-tags="' + tags.join(',') + '">' +
      '<div class="ev-card-img"><img src="' + img + '" alt="' + ev.name + '">' + badge + '</div>' +
      '<div class="ev-card-body">' +
        '<div class="ev-card-date">' + formatDateLabel(ev) + '</div>' +
        '<div class="ev-card-name">' + ev.name + '</div>' +
        '<div class="ev-card-venue">' + ev.venue + ', ' + ev.location + '</div>' +
        '<div class="ev-card-footer">' +
          '<span class="ev-card-price">' + price + '</span>' +
          '<span class="ev-card-verified">' + smileyIcon + ' Verificado</span>' +
        '</div>' +
      '</div></div>';
  }

  // ── HERO: picks the first featured event (or first event) ──
  function renderHero() {
    var el = document.getElementById('hero-content');
    var videoWrap = document.getElementById('hero-video-wrap');
    if (!el || allEvents.length === 0) return;
    var feat = allEvents.find(function(e){ return e.featured; }) || allEvents[0];
    var isSold = feat.status === 'sold-out';
    var ctaText = isSold ? 'SOLD OUT — Ver reventa →' : 'Ver entradas →';
    var d = new Date(feat.date + 'T12:00:00');
    var days = ['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'];
    var months = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
    var metaDate = days[d.getDay()] + ' ' + d.getDate() + ' de ' + months[d.getMonth()] + ', ' + d.getFullYear();
    var desc = feat.description || '';
    if (isSold) desc += ' SOLD OUT.';

    // ── Set hero background: YouTube live set, event image, or fallback ──
    if (videoWrap) {
      if (feat.heroVideo) {
        // heroVideo = YouTube video ID (e.g. "dQw4w9WgXcQ")
        videoWrap.innerHTML = '<iframe src="https://www.youtube.com/embed/' + feat.heroVideo +
          '?autoplay=1&mute=1&loop=1&playlist=' + feat.heroVideo +
          '&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&iv_load_policy=3&disablekb=1&fs=0' +
          '" allow="autoplay; encrypted-media" allowfullscreen></iframe>';
      } else {
        // Fallback: event image or genre image as background
        var bgImg = getEventImage(feat);
        videoWrap.innerHTML = '<div class="hero-bg-img" style="background-image:url(' + bgImg + ');background-size:cover;background-position:center 30%;"></div>';
      }
    }

    el.innerHTML =
      '<div class="hero-badge">Destacado</div>' +
      '<h1 id="hero-title">' +
        '<span class="hero-glitch-layer hero-glitch-pink" aria-hidden="true">' + feat.name + '</span>' +
        '<span class="hero-glitch-layer hero-glitch-cyan" aria-hidden="true">' + feat.name + '</span>' +
        feat.name +
      '</h1>' +
      '<div class="hero-sub">' + desc + '</div>' +
      '<div class="hero-meta">' + metaDate + ' · ' + feat.venue + ', ' + feat.location + '</div>' +
      '<div class="hero-actions">' +
        '<button class="hero-cta" onclick="openEvent(\'' + feat._id + '\')">' + ctaText + '</button>' +
        '<div class="hero-sponsor">Presentado por <span>LEZGO ' + smileyIcon + '</span></div>' +
      '</div>';
  }

  // ── PROMO CARDS: picks featured + sold-out events (top 2) ──
  function renderPromoCards() {
    var el = document.getElementById('promo-grid');
    if (!el || allEvents.length === 0) return;
    // Prioritize: featured first, then sold-out, then by date
    var sorted = allEvents.slice().sort(function(a, b) {
      if (a.featured && !b.featured) return -1;
      if (!a.featured && b.featured) return 1;
      if (a.status === 'sold-out' && b.status !== 'sold-out') return -1;
      if (a.status !== 'sold-out' && b.status === 'sold-out') return 1;
      return a.date < b.date ? -1 : 1;
    });
    var promos = sorted.slice(0, 2);
    el.innerHTML = promos.map(function(ev) {
      var img = getEventImage(ev);
      var isSold = ev.status === 'sold-out';
      var tag = isSold ? 'SOLD OUT' : (ev.meta && ev.meta.multiStage ? 'Multi-Room' : ev.genre);
      var price = getLowestPrice(ev);
      var d = new Date(ev.date + 'T12:00:00');
      var months = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
      var dateStr = d.getDate() + ' ' + months[d.getMonth()];
      var sub = dateStr + ' · ' + ev.venue + ', ' + ev.location + (isSold ? ' — AGOTADO' : ' — ' + price);
      return '<div class="promo-card" onclick="openEvent(\'' + ev._id + '\')" style="cursor:pointer">' +
        '<div class="promo-card-img" style="background-image:url(\'' + img + '\');"></div>' +
        '<div class="promo-card-overlay"></div>' +
        '<div class="promo-card-body">' +
          '<div class="promo-tag">' + tag + '</div>' +
          '<h3>' + ev.name + (ev.subtitle ? ' — ' + ev.subtitle : '') + '</h3>' +
          '<p>' + sub + '</p>' +
        '</div></div>';
    }).join('');
  }

  // ── EVENT GRIDS: split events into two sections ──
  function renderEventCards() {
    if (allEvents.length === 0) return;
    // Sort by date
    var sorted = allEvents.slice().sort(function(a, b) { return a.date < b.date ? -1 : 1; });
    // Split: first half → "Próximos", second half → "Más en Lima"
    var half = Math.ceil(sorted.length / 2);
    var first = sorted.slice(0, half);
    var second = sorted.slice(half);

    var grid1 = document.getElementById('ev-cards-grid');
    var grid2 = document.getElementById('ev-cards-grid-2');
    if (grid1) grid1.innerHTML = first.map(buildEvCard).join('');
    if (grid2) grid2.innerHTML = second.map(buildEvCard).join('');
  }

  // ── DATE LIST VIEW (RA-style) ──
  function renderDateList() {
    if (allEvents.length === 0) return;
    var sorted = allEvents.slice().sort(function(a, b) { return a.date < b.date ? -1 : 1; });
    var groups = {};
    var dayNames = ['DOM', 'LUN', 'MAR', 'MIÉ', 'JUE', 'VIE', 'SÁB'];
    var monthNames = ['ENE', 'FEB', 'MAR', 'ABR', 'MAY', 'JUN', 'JUL', 'AGO', 'SEP', 'OCT', 'NOV', 'DIC'];
    sorted.forEach(function(ev) {
      var dateKey = ev.date ? ev.date.substring(0, 10) : 'sin-fecha';
      if (!groups[dateKey]) groups[dateKey] = [];
      groups[dateKey].push(ev);
    });
    var html = '';
    Object.keys(groups).sort().forEach(function(dateKey) {
      var d = new Date(dateKey + 'T12:00:00');
      var dayNum = d.getDate();
      var weekday = dayNames[d.getDay()];
      var monthYear = monthNames[d.getMonth()] + ' ' + d.getFullYear();
      html += '<div class="dl-date-group">';
      html += '<div class="dl-date-header"><div class="dl-date-day">' + dayNum + '</div><div><div class="dl-date-weekday">' + weekday + '</div><div class="dl-date-monthyear">' + monthYear + '</div></div></div>';
      groups[dateKey].forEach(function(ev) {
        var img = getEventImage(ev);
        var venue = ev.venue || '';
        var time = ev.time || '';
        var price = getLowestPrice(ev);
        var isSold = ev.status === 'sold-out';
        html += '<div class="dl-event-row" onclick="openEvent(\'' + ev._id + '\')">';
        html += '<div class="dl-event-img" style="background-image:url(' + img + ')"></div>';
        html += '<div class="dl-event-info"><div class="dl-event-name">' + ev.name + '</div><div class="dl-event-sub">' + venue + (time ? ' · ' + time : '') + '</div></div>';
        html += '<div class="dl-event-right">';
        if (isSold) {
          html += '<div class="dl-event-sold">SOLD OUT</div>';
        } else if (price) {
          html += '<div class="dl-event-price">' + price + '</div>';
        }
        html += '</div></div>';
      });
      html += '</div>';
    });
    var container = document.getElementById('ev-datelist');
    if (container) container.innerHTML = html;
  }

  // ── TOGGLE: grid vs list view ──
  var currentEvView = 'grid';
  function toggleEvView(mode) {
    currentEvView = mode;
    var grid1 = document.getElementById('ev-cards-grid');
    var grid2 = document.getElementById('ev-cards-grid-2');
    var datelist = document.getElementById('ev-datelist');
    var masHead = document.getElementById('mas-lima-head');
    var btns = document.querySelectorAll('#ev-view-toggle .view-toggle-btn');
    if (mode === 'list') {
      if (grid1) grid1.classList.remove('active');
      if (grid2) grid2.classList.remove('active');
      if (masHead) masHead.style.display = 'none';
      if (datelist) datelist.classList.add('active');
      renderDateList();
      btns[0].classList.remove('active');
      btns[1].classList.add('active');
    } else {
      if (grid1) grid1.classList.add('active');
      if (grid2) grid2.classList.add('active');
      if (masHead) masHead.style.display = '';
      if (datelist) datelist.classList.remove('active');
      btns[0].classList.add('active');
      btns[1].classList.remove('active');
    }
  }

  // ── Master render: called once events are loaded ──
  function renderAllSections() {
    renderHero();
    renderPromoCards();
    renderEventCards();
    if (currentEvView === 'list') renderDateList();
  }

  // ── Event page routing: redirect to standalone HTML pages ──
  var eventPageMap = {
    'fabriclima-001': 'evento-proto.html',
    'bodysonic-lima': 'bodysonic.html',
    'hessle-audio-lima': 'hessle-audio.html',
    'drumcode-night-lima': 'drumcode-night.html',
    'room3-sessions-lima': 'room3-sessions.html',
    'dekmantel-lima': 'dekmantel.html',
    'exit-through-warehouse': 'exit-warehouse.html',
    'concrete-lima': 'concrete-lima.html',
    'whp-lima': 'whp-lima.html',
    'sunday-papers-lima': 'sunday-papers.html'
  };

  function openEvent(eventId) {
    // If we have a standalone page for this event, navigate to it
    if (eventPageMap[eventId]) {
      window.location.href = eventPageMap[eventId];
      return;
    }
    currentEventId = eventId;
    const ev = allEvents.find(e => e._id === eventId);
    if (!ev) { go('evento'); return; }

    const evTags = Array.isArray(ev.tags) ? ev.tags : [];
    const isSoldOut = ev.status === 'sold-out';
    const prettify = s => s.replace(/-/g,' ').replace(/\b\w/g, c => c.toUpperCase());

    // ── HERO ──
    const heroTitle = document.querySelector('#v-evento .ev-hero-title');
    if (heroTitle) heroTitle.innerHTML = ev.name + (ev.subtitle ? '<span> — ' + ev.subtitle + '</span>' : '');
    const heroSub = document.querySelector('#v-evento .ev-hero-sub');
    if (heroSub) heroSub.textContent = ev.description || '';

    // Info items
    const infoItems = document.querySelectorAll('#v-evento .ev-hero-info-item span');
    if (infoItems[0]) {
      const dateObj = new Date(ev.date + 'T12:00:00');
      infoItems[0].textContent = ev.dateLabel || dateObj.toLocaleDateString('es', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
    }
    if (infoItems[1]) infoItems[1].textContent = (ev.venue || '') + ', ' + (ev.location || '');
    if (infoItems[2]) infoItems[2].textContent = (ev.timeStart || '21:00') + ' — ' + (ev.timeEnd || '05:00');

    // Hero image
    const heroImg = document.getElementById('ev-hero-img');
    if (heroImg) {
      const imgUrl = ev.image || 'https://images.unsplash.com/photo-1598387993281-cecf8b71a8f8?w=1600&q=80';
      heroImg.style.backgroundImage = `url('${imgUrl}')`;
    }

    // Tags
    const tagsContainer = document.querySelector('#v-evento .ev-hero-tags');
    if (tagsContainer) {
      let h = '';
      if (isSoldOut) h += '<span class="ev-hero-tag tag-soldout">SOLD OUT</span>';
      const genres = evTags.filter(t => ['techno','dark-techno','hard-techno','melodic-techno','house','deep-house','minimal','dnb','ambient','electronica','breaks','acid'].includes(t));
      genres.forEach(g => h += `<span class="ev-hero-tag">${prettify(g)}</span>`);
      const vibes = evTags.filter(t => ['underground','massive','intimate','chill','indoor','outdoor','open-air','mixed','vinyl-only','secret-location','afterhours','brunch','extended-set'].includes(t));
      vibes.slice(0,2).forEach(v => h += `<span class="ev-hero-tag">${prettify(v)}</span>`);
      h += '<span class="ev-hero-tag">ID Verificado</span>';
      tagsContainer.innerHTML = h;
    }

    // CTA
    const ctaBtn = document.getElementById('ev-cta-main');
    if (ctaBtn) {
      const arrow = ' <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M7 7l10 10M17 7v10H7"/></svg>';
      if (isSoldOut) {
        ctaBtn.innerHTML = 'Ver reventa' + arrow;
        ctaBtn.onclick = () => go('marketplace');
      } else {
        ctaBtn.innerHTML = 'Comprar entradas' + arrow;
        ctaBtn.onclick = () => document.getElementById('ev-tickets').scrollIntoView({behavior:'smooth'});
      }
    }

    // ── STATS BAR ──
    const statsBar = document.getElementById('ev-stats-bar');
    if (statsBar && ev.tickets) {
      const totalCap = ev.tickets.reduce((s,t) => s + t.capacity, 0);
      const totalSold = ev.tickets.reduce((s,t) => s + t.sold, 0);
      const pct = totalCap > 0 ? Math.round((totalSold / totalCap) * 100) : 0;
      const tiers = ev.tickets.length;
      const minPrice = Math.min(...ev.tickets.map(t => t.price));
      const maxPrice = Math.max(...ev.tickets.map(t => t.price));
      const priceRange = minPrice === maxPrice ? 'S/ ' + minPrice : 'S/ ' + minPrice + ' – ' + maxPrice;
      statsBar.innerHTML = `
        <div class="ev-stat-item"><div class="ev-stat-num">${pct}%</div><div class="ev-stat-label">Vendido</div></div>
        <div class="ev-stat-item"><div class="ev-stat-num">${totalSold}/${totalCap}</div><div class="ev-stat-label">Entradas</div></div>
        <div class="ev-stat-item"><div class="ev-stat-num">${tiers}</div><div class="ev-stat-label">Categorías</div></div>
        <div class="ev-stat-item"><div class="ev-stat-num">${priceRange}</div><div class="ev-stat-label">Rango de precio</div></div>
        <div class="ev-stat-item"><div class="ev-stat-num">${ev.lineup ? ev.lineup.length : 0}</div><div class="ev-stat-label">Artistas</div></div>
      `;
    }

    // ── VISIBLE SECTIONS CONFIG ──
    const vs = ev.visibleSections || {};

    // ── LINEUP ──
    const lineupSection = document.getElementById('ev-lineup-section');
    const lineupGrid = document.getElementById('ev-lineup-grid');
    if (vs.lineup === false) {
      if (lineupSection) lineupSection.style.display = 'none';
    } else if (lineupGrid && lineupSection && Array.isArray(ev.lineup) && ev.lineup.length > 0) {
      lineupSection.style.display = '';
      const lineupTitle = document.getElementById('ev-lineup-title');
      if (lineupTitle) lineupTitle.textContent = ev.lineup.length + ' Artistas';
      let h = '';
      ev.lineup.forEach((artist, i) => {
        const isHL = i === 0;
        h += `<div class="ev-artist-card${isHL ? ' ev-headliner' : ''}">
          <div class="ev-artist-name">${artist}</div>
          <div class="ev-artist-role">${isHL ? 'Headliner' : (i < 3 ? 'Main' : 'Support')}</div>
        </div>`;
      });
      lineupGrid.innerHTML = h;
    } else if (lineupSection) {
      lineupSection.style.display = 'none';
    }

    // ── ABOUT ──
    const aboutSection = document.getElementById('ev-about-section');
    if (vs.about === false && aboutSection) { aboutSection.style.display = 'none'; }
    else if (aboutSection) { aboutSection.style.display = ''; }
    const aboutText = document.getElementById('ev-about-text');
    if (aboutText) aboutText.textContent = ev.description || '';
    const aboutDetails = document.getElementById('ev-about-details');
    if (aboutDetails) {
      const meta = ev.meta || {};
      const chips = [];
      // Genre
      const g = ev.genre || evTags.find(t => t.includes('techno') || t.includes('house') || t.includes('dnb')) || '';
      if (g) chips.push({ icon: '🎵', label: 'Género', value: g });
      // Age
      const age = evTags.find(t => t.includes('+') || t === 'all-ages') || '';
      if (age) chips.push({ icon: '🪪', label: 'Edad', value: prettify(age) });
      // Setting
      const setting = evTags.find(t => ['indoor','outdoor','open-air','mixed'].includes(t)) || '';
      if (setting) chips.push({ icon: '🏛️', label: 'Setting', value: prettify(setting) });
      // Dress code
      if (meta.dressCode !== undefined) chips.push({ icon: '👔', label: 'Dress Code', value: meta.dressCode ? 'Sí' : 'No' });
      // Alcohol
      if (meta.alcohol !== undefined) chips.push({ icon: '🍸', label: 'Alcohol', value: meta.alcohol ? 'Sí' : 'No' });
      // Food
      if (meta.food !== undefined) chips.push({ icon: '🍕', label: 'Food', value: meta.food ? 'Sí' : 'No' });
      // Multi-stage
      if (meta.multiStage) chips.push({ icon: '🔊', label: 'Stages', value: 'Multi-stage' });

      aboutDetails.innerHTML = chips.map(c => `
        <div class="ev-detail-chip">
          <div class="ev-detail-chip-icon">${c.icon}</div>
          <div class="ev-detail-chip-text">
            <div class="ev-detail-chip-label">${c.label}</div>
            <div class="ev-detail-chip-value">${c.value}</div>
          </div>
        </div>
      `).join('');
    }

    // ── TICKETS ──
    const tkGrid = document.getElementById('ev-tk-grid');
    const mpCta = document.getElementById('ev-marketplace-cta');
    if (tkGrid && ev.tickets) {
      const gradients = ['tk-purple','tk-orange','tk-acid','tk-purple','tk-orange','tk-acid'];
      const emojis = ['🎫','👑','💎','🎉','🎟️','⚡'];
      let h = '';
      ev.tickets.forEach((t, i) => {
        const tierSold = t.sold >= t.capacity;
        const grad = tierSold ? 'tk-dark' : gradients[i % gradients.length];
        const emoji = emojis[i % emojis.length];
        const priceLabel = t.priceLabel || (t.price === 0 ? 'GRATIS' : 'S/ ' + t.price);
        const fee = t.price > 0 ? Math.round(t.price * 0.08) : 0;
        const total = t.price + fee;
        const feeText = fee > 0 ? `+ S/${fee} cargos · Total S/${total}` : 'Sin cargos adicionales';
        const soldClass = tierSold ? ' tk-soldout' : '';
        const tooltip = tierSold ? 'Agotado' : 'Comprar entrada →';
        const click = tierSold ? '' : `onclick="pmOpen('${ev.name.replace(/'/g,"\\'")}');pmQtyChange('${t.id}',1)"`;
        h += `<div class="tk-card${soldClass}" ${click}>
          <div class="tk-card-inner ${grad}">
            <div>
              <div class="tk-card-type">${t.name}</div>
              <div class="tk-card-phase">${tierSold ? 'AGOTADO' : (t.sold + '/' + t.capacity + ' vendidos')}</div>
            </div>
            <div class="tk-card-logo">${emoji}</div>
            <div class="tk-card-bottom">
              <span class="tk-bottom-price">${priceLabel}</span>
              <span class="tk-bottom-fee">${feeText}</span>
            </div>
          </div>
          <div class="tk-card-tooltip">${tooltip}</div>
        </div>`;
      });
      tkGrid.innerHTML = h;

      // Ticket section header
      const heading = document.getElementById('ev-tickets-heading');
      const sub = document.getElementById('ev-tickets-sub');
      const label = document.getElementById('ev-tickets-label');
      if (isSoldOut) {
        if (label) label.textContent = 'Sold Out';
        if (heading) heading.textContent = 'Todas las entradas agotadas';
        if (sub) sub.textContent = 'Este evento está sold out. Puedes buscar entradas en el marketplace de reventa verificada.';
        if (mpCta) mpCta.style.display = '';
      } else {
        if (label) label.textContent = 'Entradas';
        if (heading) heading.textContent = 'Elige tu entrada';
        if (sub) sub.textContent = 'Todas las entradas están verificadas con tu identidad. Sin reventas truchas.';
        if (mpCta) mpCta.style.display = 'none';
      }
    }

    // ── VENUE ──
    const venueSection = document.getElementById('ev-venue-section');
    if (vs.venue === false && venueSection) { venueSection.style.display = 'none'; }
    else if (venueSection) { venueSection.style.display = ''; }
    const venueName = document.getElementById('ev-venue-name');
    if (venueName) venueName.textContent = ev.venue || '';
    const venueAddr = document.getElementById('ev-venue-address');
    if (venueAddr) venueAddr.textContent = (ev.location || '') + (ev.distrito ? ' · ' + prettify(ev.distrito) : '');
    const venueChips = document.getElementById('ev-venue-chips');
    if (venueChips) {
      let h = '';
      const setting = evTags.find(t => ['indoor','outdoor','open-air','mixed'].includes(t));
      if (setting) h += `<div class="ev-venue-chip">${prettify(setting)}</div>`;
      const meta = ev.meta || {};
      if (meta.crowdSize) h += `<div class="ev-venue-chip">Capacidad: ${meta.crowdSize.toLocaleString()}</div>`;
      if (meta.multiStage) h += `<div class="ev-venue-chip">Multi-stage</div>`;
      h += '<div class="ev-venue-chip">Verificación en puerta</div>';
      venueChips.innerHTML = h;
    }

    // ── TAGS CLOUD ──
    const tagsSection = document.getElementById('ev-tags-section');
    if (vs.tags === false && tagsSection) { tagsSection.style.display = 'none'; }
    else if (tagsSection) { tagsSection.style.display = ''; }
    const tagsCloud = document.getElementById('ev-tags-cloud');
    if (tagsCloud) {
      tagsCloud.innerHTML = evTags.map(t => `<div class="ev-tag-pill">${prettify(t)}</div>`).join('');
    }

    // ── PURCHASE MODAL CATALOG ──
    if (ev.tickets) {
      pmTicketCatalog = {};
      ev.tickets.forEach(t => {
        pmTicketCatalog[t.id] = { name: t.name, price: t.price, priceLabel: t.priceLabel || ('S/' + t.price), capacity: t.capacity, sold: t.sold };
      });
      pmTicketQty = {};
      ev.tickets.forEach(t => pmTicketQty[t.id] = 0);
      pmBuildTicketList();
    }

    // Store event & navigate
    window._currentEvent = ev;
    go('evento');
  }

  // ── Real Auth Functions ──
  async function authGoogleLogin() {
    try {
      const provider = new firebase.auth.GoogleAuthProvider();
      provider.setCustomParameters({ prompt: 'select_account' });
      const result = await auth.signInWithPopup(provider);
      if (result.user) {
        go('eventos');
      }
    } catch (err) {
      console.error('Google login error:', err);
      if (err.code !== 'auth/popup-closed-by-user') {
        document.getElementById('auth-link-sent').textContent = 'Error: ' + err.message;
        document.getElementById('auth-link-sent').style.display = 'block';
      }
    }
  }

  async function authSendLink() {
    const emailInput = document.getElementById('auth-email-input');
    const email = emailInput.value.trim();
    if (!email || !email.includes('@')) {
      emailInput.style.borderColor = '#f87171';
      setTimeout(() => emailInput.style.borderColor = '', 1500);
      return;
    }
    try {
      const actionCodeSettings = {
        url: window.location.origin + '/',
        handleCodeInApp: true
      };
      await auth.sendSignInLinkToEmail(email, actionCodeSettings);
      window.localStorage.setItem('lezgoEmailForSignIn', email);
      const msgEl = document.getElementById('auth-link-sent');
      if (msgEl) {
        msgEl.textContent = '✉️ Link enviado a ' + email + '. Revisa tu bandeja (y spam).';
        msgEl.style.display = 'block';
      }
    } catch (err) {
      console.error('Magic link error:', err);
      const msgEl = document.getElementById('auth-link-sent');
      if (msgEl) {
        msgEl.style.display = 'block';
        msgEl.textContent = 'Error: ' + (err.message || 'Intenta de nuevo');
      }
    }
  }

  async function authFinishRegister() {
    if (!currentUser) return;
    const nameInput = document.getElementById('reg-name');
    const dniInput = document.getElementById('reg-dni');

    const updates = {};
    if (nameInput && nameInput.value) updates.displayName = nameInput.value.trim();
    if (dniInput && dniInput.value) updates.dni = dniInput.value.trim();

    if (Object.keys(updates).length > 0) {
      await db.collection('users').doc(currentUser.uid).update(updates);
      userProfile = { ...userProfile, ...updates };
    }

    // Show success
    const actions = document.getElementById('auth-photo-actions');
    const loading = document.getElementById('auth-loading-reg');
    const success = document.getElementById('auth-reg-success');
    const photoSection = document.getElementById('auth-photo-section');
    if (loading) loading.style.display = 'block';
    if (actions) actions.style.display = 'none';
    setTimeout(() => {
      if (loading) loading.style.display = 'none';
      if (photoSection) photoSection.style.display = 'none';
      if (success) success.style.display = 'block';
    }, 1500);
  }

  function authLogout() {
    auth.signOut().then(() => {
      go('eventos');
    });
  }

  // ── Purchase Flow (Free Tickets) ──
  async function pmPay() {
    if (!currentUser) {
      go('auth');
      return;
    }

    const loading = document.getElementById('pm-loading');
    const btn = document.getElementById('pm-pay-btn');
    const backBtn = btn.nextElementSibling;
    loading.classList.add('visible');
    btn.style.display = 'none';
    backBtn.style.display = 'none';

    try {
      const ev = window._currentEvent || allEvents.find(e => e.featured) || allEvents[0];
      const selectedTickets = Object.entries(pmTicketQty).filter(([,q]) => q > 0);

      if (selectedTickets.length === 0) {
        loading.classList.remove('visible');
        btn.style.display = '';
        backBtn.style.display = '';
        alert('Selecciona al menos una entrada.');
        return;
      }

      const batch = db.batch();
      for (const [ticketId, qty] of selectedTickets) {
        for (let i = 0; i < qty; i++) {
          const ticketRef = db.collection('tickets').doc();
          batch.set(ticketRef, {
            ticketId: ticketRef.id,
            eventId: ev._id || ev.id,
            eventName: ev.name + (ev.subtitle ? ' — ' + ev.subtitle : ''),
            eventDate: ev.date,
            eventDateLabel: ev.dateLabel,
            eventTimeStart: ev.timeStart,
            eventTimeEnd: ev.timeEnd,
            eventVenue: ev.venue,
            eventLocation: ev.location,
            ticketType: ticketId,
            ticketName: pmTicketCatalog[ticketId]?.name || ticketId,
            price: pmTicketCatalog[ticketId]?.price || 0,
            userId: currentUser.uid,
            userEmail: currentUser.email,
            userDni: pmVerifiedDni || userProfile?.dni || '',
            userName: pmVerifiedName || userProfile?.displayName || currentUser.displayName || '',
            status: 'active',
            usedAt: null,
            purchasedAt: firebase.firestore.FieldValue.serverTimestamp(),
            qrCode: ticketRef.id // Use ticket ID as QR code
          });
        }
      }
      await batch.commit();

      loading.classList.remove('visible');
      btn.style.display = '';
      backBtn.style.display = '';

      // Show confirmation
      const confirmedParts = selectedTickets.map(([id,q]) => q + '× ' + (pmTicketCatalog[id]?.name || id).replace('👑 ',''));
      const confirmTicketName = document.getElementById('pm-confirm-ticket-name');
      if (confirmTicketName) confirmTicketName.textContent = confirmedParts.join(' + ') || 'Entrada';
      const confirmDni = document.getElementById('pm-confirm-dni');
      if (confirmDni) confirmDni.textContent = pmVerifiedDni || userProfile?.dni || '———';
      // Populate confirmation card with current event data
      const cev = window._currentEvent || {};
      const confirmEvent = document.getElementById('pm-confirm-event');
      if (confirmEvent) confirmEvent.textContent = cev.name || 'Evento';
      const confirmDate = document.getElementById('pm-confirm-date');
      if (confirmDate) {
        const dObj = new Date((cev.date || '2026-01-01') + 'T12:00:00');
        confirmDate.innerHTML = '<strong>' + dObj.toLocaleDateString('es',{weekday:'short',day:'numeric',month:'short'}) + '</strong>' + (cev.timeStart || '21:00') + ' – ' + (cev.timeEnd || '05:00');
      }
      const confirmVenue = document.getElementById('pm-confirm-venue');
      if (confirmVenue) confirmVenue.innerHTML = '<strong>' + (cev.venue || '') + '</strong>' + (cev.location || '');
      pmGoStep(4);

    } catch (err) {
      console.error('Purchase error:', err);
      loading.classList.remove('visible');
      btn.style.display = '';
      backBtn.style.display = '';
      alert('Error al procesar: ' + err.message);
    }
  }

  // Store verified name for ticket
  var pmVerifiedName = '';

  async function pmVerifyDni() {
    const dni = document.getElementById('pm-dni-input').value.trim();
    const name = document.getElementById('pm-name-input').value.trim();
    if (!/^\d{8}$/.test(dni) || !name) {
      document.getElementById('pm-dni-input').style.borderColor = '#ff4d4d';
      document.getElementById('pm-name-input').style.borderColor = name ? 'rgba(229,255,0,0.5)' : '#ff4d4d';
      setTimeout(() => {
        document.getElementById('pm-dni-input').style.borderColor = '';
        document.getElementById('pm-name-input').style.borderColor = '';
      }, 1800);
      return;
    }
    pmVerifiedDni = dni;
    pmVerifiedName = name;

    // Save DNI to user profile if logged in
    if (currentUser) {
      await db.collection('users').doc(currentUser.uid).update({ dni: dni, displayName: name });
      if (userProfile) { userProfile.dni = dni; userProfile.displayName = name; }
    }

    const btn = document.getElementById('pm-verify-btn');
    btn.disabled = true;
    btn.textContent = '🔍 Verificando...';
    setTimeout(() => {
      btn.disabled = false;
      btn.textContent = 'Verificar y continuar →';
      pmUserDniVerified = true;

      // For free events, skip payment step
      const ev = window._currentEvent || allEvents.find(e => e.featured) || allEvents[0];
      const totalPrice = Object.entries(pmTicketQty).reduce((sum, [id, q]) => sum + (pmTicketCatalog[id]?.price || 0) * q, 0);

      if (totalPrice === 0) {
        // Free event — go directly to processing
        pmPay();
      } else {
        pmGoStep(3);
      }
    }, 1000);
  }

  // ── Login within Purchase Modal ──
  async function pmLoginWith(method) {
    if (method === 'guest') {
      pmGoStep(1);
      return;
    }
    if (method === 'google') {
      try {
        const provider = new firebase.auth.GoogleAuthProvider();
        await auth.signInWithPopup(provider);
        pmUserLoggedIn = true;
        pmGoStep(1);
      } catch (err) {
        if (err.code !== 'auth/popup-closed-by-user') console.error(err);
      }
      return;
    }
    if (method === 'email') {
      const email = document.getElementById('pm-login-email').value.trim();
      const valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      if (!valid) {
        document.getElementById('pm-login-email').style.borderColor = '#f87171';
        document.getElementById('pm-login-email').placeholder = 'Ingresa un email válido';
        return;
      }
      try {
        const actionCodeSettings = {
          url: window.location.href,
          handleCodeInApp: true
        };
        await auth.sendSignInLinkToEmail(email, actionCodeSettings);
        window.localStorage.setItem('lezgoEmailForSignIn', email);
        // Show confirmation in the modal
        const emailEl = document.getElementById('pm-login-email');
        if (emailEl) {
          emailEl.value = '';
          emailEl.placeholder = '✉️ Link enviado! Revisa tu email';
          emailEl.style.borderColor = 'var(--acid)';
        }
      } catch (err) {
        console.error('Magic link error:', err);
      }
      return;
    }
  }

  // ── My Tickets (Mis Entradas) ──
  async function loadMyTickets() {
    if (!currentUser) { go('auth'); return; }
    try {
    const snapshot = await db.collection('tickets')
      .where('userId', '==', currentUser.uid)
      .orderBy('purchasedAt', 'desc')
      .get();

    const activePanel = document.getElementById('mt-proximas');
    const historyPanel = document.getElementById('mt-pasadas');
    if (!activePanel) return;

    let activeHtml = '';
    let historyHtml = '';

    snapshot.forEach(doc => {
      const t = doc.data();
      const isActive = t.status === 'active';
      const card = `
        <div class="mt-ticket-card" onclick="mtToggleTicket('${doc.id}')">
          <div class="mt-ticket-header">
            <div class="mt-ticket-img" style="background:linear-gradient(135deg,#1a1a2e,#16213e);display:flex;align-items:center;justify-content:center;font-size:1.5em">🎧</div>
            <div class="mt-ticket-info">
              <div class="mt-ticket-event">${t.eventName}</div>
              <div class="mt-ticket-detail">${t.eventDateLabel || t.eventDate} · ${t.eventTimeStart} – ${t.eventTimeEnd}</div>
              <div class="mt-ticket-detail">📍 ${t.eventVenue} · ${t.eventLocation}</div>
              <div class="mt-ticket-type">${t.ticketName} ${t.price > 0 ? '· S/' + t.price : '· GRATIS'}</div>
            </div>
            <div class="mt-ticket-status ${isActive ? 'active' : 'used'}">${isActive ? '✅ Activa' : '⏰ Usada'}</div>
          </div>
          <div class="mt-ticket-expand" id="${doc.id}-expand">
            <div class="mt-ticket-expand-inner">
              <div style="text-align:center;padding:16px 0">
                <div style="font-size:3em">🪪</div>
                <div style="font-size:11px;color:var(--text-dim);margin-top:8px">DNI: ${t.userDni || '—'}</div>
                <div style="font-size:11px;color:var(--text-dim)">ID: ${doc.id.slice(0,8)}...</div>
                <div style="font-size:11px;color:var(--acid);margin-top:4px">✅ Verificado con Lezgo</div>
              </div>
              <div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
                <button class="mt-share-btn" onclick="event.stopPropagation();openEvent('${t.eventId}')">🎫 Ver evento</button>
                ${isActive ? '<button class="mt-share-btn" onclick="event.stopPropagation();resaleOpen(\'' + t.eventName + '\',\'' + t.ticketName + '\',' + (t.price || 50) + ',\'' + doc.id + '\')">💰 Revender</button>' : ''}
              </div>
            </div>
          </div>
        </div>`;

      if (isActive) activeHtml += card;
      else historyHtml += card;
    });

    activePanel.innerHTML = activeHtml || '<div style="text-align:center;padding:40px 20px;color:var(--text-dim)">No tienes entradas activas.<br><button onclick="go(\'eventos\')" style="margin-top:16px;background:var(--acid);color:#000;border:none;padding:10px 24px;border-radius:8px;font-weight:600;cursor:pointer">Explorar eventos</button></div>';
    if (historyPanel) historyPanel.innerHTML = historyHtml || '<div style="text-align:center;padding:40px 20px;color:var(--text-dim)">No tienes entradas pasadas.</div>';
    } catch (err) { console.error('loadMyTickets error:', err); }
  }

  // ── Resale / Marketplace ──
  async function resaleConfirm() {
    const cb = document.getElementById('resale-terms-cb');
    if (!cb || !cb.checked) { alert('Debes aceptar los términos para continuar.'); return; }
    if (!currentUser) { go('auth'); return; }

    const priceEl = document.getElementById('resale-price');
    const eventNameEl = document.getElementById('resale-event-name');
    const tierEl = document.getElementById('resale-ticket-tier');
    if (!priceEl || !eventNameEl || !tierEl) { alert('Error: datos de reventa no cargados.'); return; }

    const price = parseFloat(priceEl.value) || 0;
    const ticketDocId = window._resaleTicketId;
    const eventName = eventNameEl.textContent.trim();
    const tier = tierEl.textContent.trim();
    if (!eventName || !tier || price <= 0) { alert('Datos incompletos. Intenta de nuevo.'); return; }

    try {
      // Create resale listing
      await db.collection('resale').add({
        ticketId: ticketDocId,
        sellerId: currentUser.uid,
        sellerEmail: currentUser.email,
        eventName: eventName,
        ticketTier: tier,
        askingPrice: price,
        fee: Math.round(price * 0.05),
        netToSeller: price - Math.round(price * 0.05),
        status: 'listed',
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });

      // Update ticket status
      if (ticketDocId) {
        await db.collection('tickets').doc(ticketDocId).update({ status: 'resale-listed' });
      }

      resaleClose();
      setTimeout(() => {
        alert('¡Entrada publicada en el marketplace! Te notificaremos cuando alguien la compre.');
        go('marketplace');
        loadMarketplace();
      }, 300);
    } catch (err) {
      console.error('Resale error:', err);
      alert('Error: ' + err.message);
    }
  }

  // Store resale ticket ID
  function resaleOpen(eventName, tier, originalPrice, ticketDocId) {
    const eventEl = document.getElementById('resale-event-name');
    const tierEl = document.getElementById('resale-ticket-tier');
    const priceEl = document.getElementById('resale-price');
    const overlayEl = document.getElementById('resale-overlay');
    if (!eventEl || !tierEl || !priceEl || !overlayEl) { console.error('resaleOpen: Missing DOM elements'); return; }

    window._resaleTicketId = ticketDocId || null;
    eventEl.textContent = eventName;
    tierEl.textContent = tier;
    priceEl.value = Math.round(originalPrice * 1.4);
    resaleUpdateCalc();
    overlayEl.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  async function loadMarketplace() {
    try {
    const snapshot = await db.collection('resale').where('status', '==', 'listed').get();
    const container = document.getElementById('mp-listings');
    if (!container) return;

    let html = '';
    snapshot.forEach(doc => {
      const r = doc.data();
      html += `<div class="mp-listing-card" style="background:var(--bg-raised);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px">
        <div style="font-weight:600;color:var(--text)">${r.eventName}</div>
        <div style="font-size:13px;color:var(--text-mid);margin-top:4px">${r.ticketTier}</div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
          <span style="font-size:20px;font-weight:700;color:var(--acid)">S/${r.askingPrice}</span>
          <button onclick="buyResale('${doc.id}')" style="background:var(--acid);color:#000;border:none;padding:8px 20px;border-radius:8px;font-weight:600;cursor:pointer;font-family:inherit">Comprar</button>
        </div>
      </div>`;
    });

    container.innerHTML = html || '<div style="text-align:center;padding:40px;color:var(--text-dim)">No hay entradas en reventa por ahora.</div>';
    } catch (err) { console.error('loadMarketplace error:', err); }
  }

  async function buyResale(resaleId) {
    if (!currentUser) { go('auth'); return; }
    try {
      const resaleDoc = await db.collection('resale').doc(resaleId).get();
      if (!resaleDoc.exists) { alert('Esta entrada ya no está disponible.'); return; }
      const r = resaleDoc.data();

      // For demo/free: transfer ticket
      if (r.ticketId) {
        await db.collection('tickets').doc(r.ticketId).update({
          userId: currentUser.uid,
          userEmail: currentUser.email,
          userName: userProfile?.displayName || currentUser.displayName || '',
          userDni: userProfile?.dni || '',
          status: 'active',
          transferredAt: firebase.firestore.FieldValue.serverTimestamp()
        });
      }

      await db.collection('resale').doc(resaleId).update({ status: 'sold', buyerId: currentUser.uid });

      alert('¡Entrada comprada! Ya está en "Mis Entradas".');
      loadMarketplace();
    } catch (err) {
      console.error('buyResale error:', err);
      alert('Error al comprar: ' + err.message);
    }
  }

  // ── Scanner ──
  async function scanVerifyTicket(ticketId) {
    if (!ticketId) {
      scanResult('invalid');
      return;
    }
    try {
      const doc = await db.collection('tickets').doc(ticketId).get();
      if (!doc.exists) {
        scanResult('invalid');
        return;
      }
      const ticket = doc.data();
      if (ticket.status === 'used') {
        scanResult('used');
        return;
      }
      if (ticket.status !== 'active') {
        scanResult('denied');
        return;
      }
      // Mark as used
      await db.collection('tickets').doc(ticketId).update({
        status: 'used',
        usedAt: firebase.firestore.FieldValue.serverTimestamp()
      });

      // Update UI
      const srName = document.getElementById('scan-result-name');
      const srType = document.getElementById('sr-ticket');
      const srDni = document.getElementById('sr-dni');
      if (srName) srName.textContent = ticket.userName || 'Asistente';
      if (srType) srType.textContent = ticket.ticketName;
      if (srDni) srDni.textContent = ticket.userDni || '—';
      scanResult('approved');
    } catch (err) {
      console.error('Scan error:', err);
      scanResult('invalid');
    }
  }

  // ── Organizer Dashboard ──
  async function loadOrganizerDashboard() {
    if (!currentUser) { go('auth'); return; }
    try {
    const snapshot = await db.collection('events').where('organizer', '==', currentUser.uid).get();
    const container = document.getElementById('og-events-list');
    if (!container) return;

    let totalTickets = 0;
    let totalRevenue = 0;
    let html = '';

    for (const doc of snapshot.docs) {
      const ev = doc.data();
      // Count tickets sold
      const ticketSnap = await db.collection('tickets').where('eventId', '==', doc.id).get();
      const sold = ticketSnap.size;
      totalTickets += sold;

      html += `<div class="og-event-card" style="background:var(--bg-raised);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px">
        <div style="display:flex;justify-content:space-between;align-items:start">
          <div>
            <div style="font-weight:600;color:var(--text)">${ev.name}</div>
            <div style="font-size:13px;color:var(--text-mid)">${ev.dateLabel || ev.date} · ${ev.venue}</div>
            <div style="font-size:13px;color:var(--acid);margin-top:4px">${sold} entradas vendidas</div>
          </div>
          <span style="font-size:12px;padding:4px 10px;border-radius:20px;background:${ev.status === 'published' ? 'rgba(0,255,133,0.15);color:#00ff85' : 'rgba(255,77,77,0.15);color:#ff4d4d'}">${ev.status}</span>
        </div>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button class="og-act-btn primary" onclick="openEvent('${doc.id}')">👁 Ver</button>
          <button class="og-act-btn primary" onclick="openEventForm('${doc.id}')" style="background:var(--acid);color:#000">✏️ Editar</button>
          <button class="og-act-btn ghost" onclick="exportEventTickets('${doc.id}')">📊 Export</button>
        </div>
      </div>`;
    }

    if (container) container.innerHTML = html || '<div style="text-align:center;padding:40px;color:var(--text-dim)">No tienes eventos creados.</div>';

    // Update stats
    const statEls = document.querySelectorAll('.og-stat-number');
    if (statEls[0]) statEls[0].textContent = snapshot.size;
    if (statEls[1]) statEls[1].textContent = totalTickets;
    } catch (err) { console.error('loadOrganizerDashboard error:', err); }
  }

  function createEvent() {
    if (!currentUser) { go('auth'); return; }
    openEventForm();
  }

  // ── Event Form (Create / Edit) ──
  var efEditingId = null; // null = new event, string = editing existing
  var efTiers = [];       // array of tier objects
  var efLineup = [];      // array of artist name strings

  function openEventForm(eventId) {
    efEditingId = eventId || null;
    efTiers = [];
    efLineup = [];

    // Reset all fields
    const fields = ['ef-name','ef-subtitle','ef-genre','ef-description','ef-date','ef-time-start','ef-time-end','ef-venue','ef-location','ef-image','ef-video'];
    fields.forEach(id => { const el = document.getElementById(id); if (el) el.value = ''; });
    const statusEl = document.getElementById('ef-status');
    if (statusEl) statusEl.value = 'draft';
    const timeStartEl = document.getElementById('ef-time-start');
    if (timeStartEl && !timeStartEl.value) timeStartEl.value = '22:00';
    const timeEndEl = document.getElementById('ef-time-end');
    if (timeEndEl && !timeEndEl.value) timeEndEl.value = '05:00';

    const titleEl = document.getElementById('ef-title');

    if (eventId) {
      // Load existing event for editing
      if (titleEl) titleEl.textContent = 'Editar Evento';
      db.collection('events').doc(eventId).get().then(doc => {
        if (!doc.exists) { alert('Evento no encontrado'); go('organizer'); return; }
        const ev = doc.data();
        const setVal = (id, val) => { const el = document.getElementById(id); if (el && val) el.value = val; };
        setVal('ef-name', ev.name);
        setVal('ef-subtitle', ev.subtitle);
        setVal('ef-genre', ev.genre);
        setVal('ef-description', ev.description);
        setVal('ef-date', ev.date);
        setVal('ef-time-start', ev.timeStart);
        setVal('ef-time-end', ev.timeEnd);
        setVal('ef-venue', ev.venue);
        setVal('ef-distrito', ev.distrito);
        setVal('ef-location', ev.location);
        setVal('ef-image', ev.image);
        setVal('ef-video', ev.heroVideo);
        setVal('ef-status', ev.status);

        // Load lineup
        efLineup = Array.isArray(ev.lineup) ? [...ev.lineup] : [];
        efRenderLineup();

        // Load tiers
        if (Array.isArray(ev.tickets)) {
          efTiers = ev.tickets.map(t => ({
            name: t.name || '',
            includes: Array.isArray(t.includes) ? [...t.includes] : (t.includes ? [t.includes] : []),
            capacity: t.capacity || 0,
            sold: t.sold || 0,
            phases: Array.isArray(t.phases) ? t.phases.map(p => ({...p, releaseDate: p.releaseDate || ''})) : [
              { name: 'Full Price', price: t.price || 0, quantity: t.capacity || 100, releaseDate: '' }
            ]
          }));
        }
        // Load visible sections toggles
        const vs = ev.visibleSections || {};
        const setToggle = (id, def) => { const el = document.getElementById(id); if (el) el.checked = vs[def] !== false; };
        setToggle('ef-show-lineup', 'lineup');
        setToggle('ef-show-about', 'about');
        setToggle('ef-show-venue', 'venue');
        setToggle('ef-show-video', 'video');
        setToggle('ef-show-tags', 'tags');

        // Load changelog
        const clSection = document.getElementById('ef-changelog-section');
        const clList = document.getElementById('ef-changelog-list');
        if (clSection && clList && Array.isArray(ev.changelog) && ev.changelog.length) {
          clSection.style.display = '';
          clList.innerHTML = ev.changelog.slice().reverse().map(entry => {
            const d = new Date(entry.timestamp);
            const dateStr = d.toLocaleDateString('es-PE', { day:'2-digit', month:'short', year:'numeric' });
            const timeStr = d.toLocaleTimeString('es-PE', { hour:'2-digit', minute:'2-digit' });
            return `<div style="padding:6px 0; border-bottom:1px solid rgba(255,255,255,0.05)">
              <span style="color:var(--text-main)">${entry.summary}</span> —
              <span>${entry.user}</span> —
              <span style="opacity:0.6">${dateStr} ${timeStr}</span>
            </div>`;
          }).join('');
        } else if (clSection) {
          clSection.style.display = 'none';
        }

        efRenderTiers();
      });
    } else {
      if (titleEl) titleEl.textContent = 'Nuevo Evento';
      // Start with 1 default tier
      efTiers = [{
        name: 'General',
        includes: [],
        capacity: 200,
        sold: 0,
        phases: [
          { name: 'Early Bird', price: 0, quantity: 50, releaseDate: '' },
          { name: 'Preventa 1', price: 0, quantity: 50, releaseDate: '' },
          { name: 'Full Price', price: 0, quantity: 100, releaseDate: '' }
        ]
      }];
      efRenderTiers();
      efRenderLineup();
      // Hide changelog for new events
      const clSection = document.getElementById('ef-changelog-section');
      if (clSection) clSection.style.display = 'none';
    }

    go('event-form');
  }

  // ── Lineup management ──
  function efAddArtist() {
    efLineup.push('');
    efRenderLineup();
    // Focus the new input
    const inputs = document.querySelectorAll('#ef-lineup-list input');
    if (inputs.length) inputs[inputs.length - 1].focus();
  }

  function efRemoveArtist(index) {
    efLineup.splice(index, 1);
    efRenderLineup();
  }

  function efUpdateArtist(index, value) {
    efLineup[index] = value;
  }

  function efRenderLineup() {
    const container = document.getElementById('ef-lineup-list');
    if (!container) return;
    let html = '';
    efLineup.forEach((artist, i) => {
      html += `<div class="ef-artist-row">
        <input class="ef-input" type="text" value="${(artist || '').replace(/"/g, '&quot;')}" placeholder="Nombre del artista" oninput="efUpdateArtist(${i}, this.value)">
        <button class="ef-remove-btn" onclick="efRemoveArtist(${i})">✕</button>
      </div>`;
    });
    container.innerHTML = html;
  }

  // ── Tier management ──
  function efAddTier() {
    efTiers.push({
      name: '',
      includes: [],
      capacity: 100,
      sold: 0,
      phases: [
        { name: 'Early Bird', price: 0, quantity: 30, releaseDate: '' },
        { name: 'Full Price', price: 0, quantity: 70, releaseDate: '' }
      ]
    });
    efRenderTiers();
  }

  function efRemoveTier(index) {
    if (efTiers.length <= 1) return; // keep at least 1
    efTiers.splice(index, 1);
    efRenderTiers();
  }

  function efAddPhase(tierIndex) {
    efTiers[tierIndex].phases.push({ name: '', price: 0, quantity: 50, releaseDate: '' });
    efRenderTiers();
  }

  function efRemovePhase(tierIndex, phaseIndex) {
    if (efTiers[tierIndex].phases.length <= 1) return;
    efTiers[tierIndex].phases.splice(phaseIndex, 1);
    efRenderTiers();
  }

  function efUpdateTier(tierIndex, field, value) {
    efTiers[tierIndex][field] = value;
    if (field === 'includes') {
      efTiers[tierIndex].includes = value.split(',').map(s => s.trim()).filter(Boolean);
    }
  }

  function efUpdatePhase(tierIndex, phaseIndex, field, value) {
    if (field === 'price' || field === 'quantity') value = parseFloat(value) || 0;
    efTiers[tierIndex].phases[phaseIndex][field] = value;
    // Recalc capacity = sum of phase quantities
    efTiers[tierIndex].capacity = efTiers[tierIndex].phases.reduce((s, p) => s + (p.quantity || 0), 0);
    efCalcMargin(tierIndex);
  }

  function efCalcMargin(tierIndex) {
    const tier = efTiers[tierIndex];
    if (!tier) return;
    const phases = tier.phases || [];
    const totalQty = phases.reduce((s, p) => s + (p.quantity || 0), 0);
    const grossRevenue = phases.reduce((s, p) => s + (p.price || 0) * (p.quantity || 0), 0);
    const avgPrice = totalQty > 0 ? (grossRevenue / totalQty) : 0;
    const platformFee = grossRevenue * 0.08;
    const netRevenue = grossRevenue - platformFee;

    const box = document.getElementById('ef-margin-' + tierIndex);
    if (!box) return;
    box.innerHTML = `
      <div class="ef-margin-title">Gross Margin Post-Fees</div>
      <div class="ef-margin-row"><span class="label">Capacidad total</span><span class="value">${totalQty} entradas</span></div>
      <div class="ef-margin-row"><span class="label">Precio promedio</span><span class="value">S/ ${avgPrice.toFixed(0)}</span></div>
      <div class="ef-margin-row"><span class="label">Revenue bruto</span><span class="value">S/ ${grossRevenue.toLocaleString()}</span></div>
      <div class="ef-margin-row"><span class="label">Fee plataforma (8%)</span><span class="value" style="color:#ff4d4d">- S/ ${platformFee.toLocaleString(undefined,{maximumFractionDigits:0})}</span></div>
      <div class="ef-margin-row total"><span class="label">Tu revenue neto</span><span class="value">S/ ${netRevenue.toLocaleString(undefined,{maximumFractionDigits:0})}</span></div>
    `;
  }

  function efRenderTiers() {
    const container = document.getElementById('ef-tiers-list');
    if (!container) return;
    let html = '';
    efTiers.forEach((tier, ti) => {
      html += `<div class="ef-tier">
        <div class="ef-tier-header">
          <span class="ef-tier-num">Tier ${ti + 1}</span>
          ${efTiers.length > 1 ? `<button class="ef-remove-btn" onclick="efRemoveTier(${ti})">🗑</button>` : ''}
        </div>
        <div class="ef-row">
          <div class="ef-field">
            <label class="ef-label">Nombre del tier *</label>
            <input class="ef-input" type="text" value="${(tier.name || '').replace(/"/g, '&quot;')}" oninput="efUpdateTier(${ti},'name',this.value)" placeholder="ej: General, VIP, Super VIP">
          </div>
          <div class="ef-field">
            <label class="ef-label">Incluye (separado por comas)</label>
            <input class="ef-input ef-includes-input" type="text" value="${(tier.includes || []).join(', ')}" oninput="efUpdateTier(${ti},'includes',this.value)" placeholder="ej: Acceso a 3 rooms, Barra standard">
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="ef-phase-labels">
            <span>Fase</span><span>Fecha release</span><span>Precio (S/)</span><span>Cantidad</span><span></span>
          </div>`;

      tier.phases.forEach((phase, pi) => {
        html += `<div class="ef-phase-row">
            <input class="ef-input" type="text" value="${(phase.name || '').replace(/"/g, '&quot;')}" oninput="efUpdatePhase(${ti},${pi},'name',this.value)" placeholder="ej: Early Bird">
            <input class="ef-input" type="date" value="${phase.releaseDate || ''}" oninput="efUpdatePhase(${ti},${pi},'releaseDate',this.value)">
            <input class="ef-input" type="number" value="${phase.price || 0}" min="0" oninput="efUpdatePhase(${ti},${pi},'price',this.value)" placeholder="0">
            <input class="ef-input" type="number" value="${phase.quantity || 0}" min="0" oninput="efUpdatePhase(${ti},${pi},'quantity',this.value)" placeholder="100">
            ${tier.phases.length > 1 ? `<button class="ef-remove-btn" onclick="efRemovePhase(${ti},${pi})">✕</button>` : '<div></div>'}
          </div>`;
      });

      html += `<button class="ef-add-btn" onclick="efAddPhase(${ti})" style="margin-top:4px; font-size:12px; padding:8px">+ Agregar fase</button>
        </div>
        <div class="ef-margin" id="ef-margin-${ti}"></div>
      </div>`;
    });
    container.innerHTML = html;

    // Calculate margins for all tiers
    efTiers.forEach((_, ti) => efCalcMargin(ti));
  }

  // ── Save Event ──
  async function efSaveEvent() {
    if (!currentUser) { go('auth'); return; }

    const name = (document.getElementById('ef-name')?.value || '').trim();
    const date = (document.getElementById('ef-date')?.value || '').trim();
    const venue = (document.getElementById('ef-venue')?.value || '').trim();

    if (!name) { alert('Nombre del evento es requerido'); return; }
    if (!date) { alert('Fecha es requerida'); return; }
    if (!venue) { alert('Venue es requerido'); return; }

    // Build tickets array from tiers
    const tickets = efTiers.map((tier, i) => {
      const totalCapacity = tier.phases.reduce((s, p) => s + (p.quantity || 0), 0);
      // Active phase price (first non-sold phase)
      const activePhase = tier.phases[0] || { price: 0 };
      return {
        id: tier.name.toLowerCase().replace(/[^a-z0-9]/g, '-') || ('tier-' + i),
        name: tier.name || ('Tier ' + (i + 1)),
        includes: tier.includes || [],
        price: activePhase.price,
        priceLabel: activePhase.price === 0 ? 'GRATIS' : 'S/ ' + activePhase.price,
        capacity: totalCapacity,
        sold: tier.sold || 0,
        phases: tier.phases.map(p => ({ name: p.name, price: p.price || 0, quantity: p.quantity || 0, releaseDate: p.releaseDate || '' }))
      };
    });

    const dateObj = new Date(date + 'T12:00:00');
    const dateLabel = dateObj.toLocaleDateString('es', { weekday: 'short', day: 'numeric', month: 'long' });

    const eventData = {
      name: name,
      subtitle: (document.getElementById('ef-subtitle')?.value || '').trim(),
      date: date,
      dateLabel: dateLabel,
      timeStart: document.getElementById('ef-time-start')?.value || '22:00',
      timeEnd: document.getElementById('ef-time-end')?.value || '05:00',
      venue: venue,
      distrito: document.getElementById('ef-distrito')?.value || '',
      location: (document.getElementById('ef-location')?.value || '').trim() || 'Lima',
      image: (document.getElementById('ef-image')?.value || '').trim(),
      heroVideo: (document.getElementById('ef-video')?.value || '').trim(),
      description: (document.getElementById('ef-description')?.value || '').trim(),
      genre: (document.getElementById('ef-genre')?.value || '').trim() || 'Electrónica',
      lineup: efLineup.filter(a => a.trim()),
      tickets: tickets,
      status: document.getElementById('ef-status')?.value || 'draft',
      featured: false,
      organizer: currentUser.uid,
      visibleSections: {
        lineup: document.getElementById('ef-show-lineup')?.checked !== false,
        about: document.getElementById('ef-show-about')?.checked !== false,
        venue: document.getElementById('ef-show-venue')?.checked !== false,
        video: document.getElementById('ef-show-video')?.checked !== false,
        tags: document.getElementById('ef-show-tags')?.checked !== false
      }
    };

    // Changelog entry
    const logEntry = {
      timestamp: new Date().toISOString(),
      user: currentUser.email || currentUser.uid,
      action: efEditingId ? 'updated' : 'created',
      summary: efEditingId ? 'Evento editado' : 'Evento creado'
    };

    const saveBtn = document.getElementById('ef-save-btn');
    if (saveBtn) { saveBtn.disabled = true; saveBtn.textContent = 'Guardando...'; }

    try {
      if (efEditingId) {
        eventData.changelog = firebase.firestore.FieldValue.arrayUnion(logEntry);
        await db.collection('events').doc(efEditingId).update(eventData);
      } else {
        eventData.createdAt = firebase.firestore.FieldValue.serverTimestamp();
        eventData.changelog = [logEntry];
        await db.collection('events').add(eventData);
      }
      if (saveBtn) { saveBtn.textContent = '✅ Guardado!'; }
      setTimeout(() => {
        if (saveBtn) { saveBtn.disabled = false; saveBtn.textContent = 'Guardar evento'; }
        go('organizer');
        loadOrganizerDashboard();
      }, 1000);
    } catch (err) {
      console.error('Save event error:', err);
      alert('Error al guardar: ' + err.message);
      if (saveBtn) { saveBtn.disabled = false; saveBtn.textContent = 'Guardar evento'; }
    }
  }

  async function exportEventTickets(eventId) {
    const snapshot = await db.collection('tickets').where('eventId', '==', eventId).get();
    let csv = 'Nombre,Email,DNI,Tipo,Estado,Fecha Compra\n';
    snapshot.forEach(doc => {
      const t = doc.data();
      csv += `"${t.userName}","${t.userEmail}","${t.userDni}","${t.ticketName}","${t.status}","${t.purchasedAt?.toDate?.()?.toLocaleDateString?.('es-PE') || ''}"\n`;
    });
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'tickets-' + eventId + '.csv';
    a.click(); URL.revokeObjectURL(url);
  }

  // ── QR Scanner with Camera ──
  var scannerStream = null;

  async function startScanner() {
    const video = document.getElementById('scanner-video');
    if (!video) return;
    try {
      scannerStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
      video.srcObject = scannerStream;
      video.play();
      // For demo: manual input
      document.getElementById('scanner-manual-input').style.display = 'block';
    } catch (err) {
      console.error('Camera error:', err);
      document.getElementById('scanner-manual-input').style.display = 'block';
    }
  }

  function stopScanner() {
    try {
      if (scannerStream && typeof scannerStream.getTracks === 'function') {
        scannerStream.getTracks().forEach(t => t.stop());
      }
    } catch (e) { console.error('stopScanner error:', e); }
    scannerStream = null;
  }

  function manualScan() {
    const input = document.getElementById('scan-ticket-id');
    if (input && input.value.trim()) {
      scanVerifyTicket(input.value.trim());
    }
  }

  // ── Profile ──
  async function loadProfile() {
    if (!currentUser) { go('auth'); return; }
    try {
    const nameEl = document.getElementById('profile-name');
    const emailEl = document.getElementById('profile-email');
    const dniEl = document.getElementById('profile-dni');
    const avatarEl = document.getElementById('profile-avatar');

    if (nameEl) nameEl.textContent = userProfile?.displayName || currentUser.displayName || 'Usuario';
    if (emailEl) emailEl.textContent = currentUser.email || '';
    if (dniEl) dniEl.textContent = userProfile?.dni ? 'DNI: ' + userProfile.dni : 'DNI no verificado';
    if (avatarEl && currentUser.photoURL) avatarEl.src = currentUser.photoURL;
    } catch (err) { console.error('loadProfile error:', err); }
  }

  // goWithAuth removed — auth checking is handled by go() in Script 2

  // loadEvents is called via seedEvents().then() above
</script>

<!-- ═══════════════════════════════════════════
     JAVASCRIPT
     ═══════════════════════════════════════════ -->
<script>
  // ── View Switching ──
  // ── Email capture (legacy — replaced by submitEmail/asistSubmitEmail/ppSubmitEmail below) ──
  // cfSubmitEmail removed — HTML elements cf-email-input/bar/success don't exist

  // ← PEGA TU URL DE GOOGLE APPS SCRIPT ACÁ ↓
  // ── FAQ Accordion ──
  function faqToggle(questionEl) {
    const item = questionEl.parentElement;
    item.classList.toggle('open');
  }

  const SHEET_URL = 'https://script.google.com/macros/s/AKfycbxS6AWDwV_ZPD9tIS65X1KOI4wxFBrBmWVxJ7A1MErNiz5uIBppRt4GsR7mBNsXVlMk0w/exec';

  function submitEmail() {
    const input = document.getElementById('email-input');
    const btn = document.querySelector('.email-capture-btn');
    const email = input.value.trim();
    if (!email || !email.includes('@')) { input.focus(); return; }
    btn.textContent = '...';
    btn.disabled = true;
    fetch(SHEET_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        email: email,
        fecha: new Date().toLocaleDateString('es-PE', { timeZone: 'America/Lima' }),
        hora: new Date().toLocaleTimeString('es-PE', { timeZone: 'America/Lima', hour12: false })
      })
    }).then(() => {
      document.getElementById('email-form').style.display = 'none';
      document.getElementById('email-ok').style.display = 'block';
    }).catch(() => {
      btn.textContent = 'Unirme';
      btn.disabled = false;
      alert('Error al enviar. Intenta de nuevo.');
    });
  }

  function asistSubmitEmail() {
    const input = document.getElementById('email-input-asist');
    const form = document.getElementById('email-form-asist');
    const email = input.value.trim();
    if (!email || !email.includes('@')) { input.focus(); return; }
    form.style.opacity = '0.5';
    form.style.pointerEvents = 'none';
    fetch(SHEET_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        email: email,
        fecha: new Date().toLocaleDateString('es-PE', { timeZone: 'America/Lima' }),
        hora: new Date().toLocaleTimeString('es-PE', { timeZone: 'America/Lima', hour12: false })
      })
    }).then(() => {
      form.style.display = 'none';
      document.getElementById('email-ok-asist').style.display = 'block';
    }).catch(() => {
      form.style.opacity = '1';
      form.style.pointerEvents = 'auto';
      alert('Error al enviar. Intenta de nuevo.');
    });
  }

  function ppSubmitEmail() {
    const input = document.getElementById('pp-email-input');
    const bar = document.getElementById('pp-email-bar');
    const email = input.value.trim();
    if (!email || !email.includes('@')) { input.focus(); return; }
    bar.style.opacity = '0.5';
    bar.style.pointerEvents = 'none';
    fetch(SHEET_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        email: email,
        fecha: new Date().toLocaleDateString('es-PE', { timeZone: 'America/Lima' }),
        hora: new Date().toLocaleTimeString('es-PE', { timeZone: 'America/Lima', hour12: false })
      })
    }).then(() => {
      bar.style.display = 'none';
      document.getElementById('pp-email-success').style.display = 'block';
    }).catch(() => {
      bar.style.opacity = '1';
      bar.style.pointerEvents = 'auto';
      alert('Error al enviar. Intenta de nuevo.');
    });
  }

  function go(view, opts) {
    opts = opts || {};
    // Protected views require auth
    const protectedViews = ['mis-entradas', 'perfil', 'organizer', 'scanner', 'event-form'];
    if (protectedViews.includes(view) && !currentUser) {
      go('auth');
      return;
    }
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.querySelectorAll('.nav-cat').forEach(l => l.classList.remove('active'));
    const map = { eventos: 0, fans: 1, promotores: 2, marketplace: 3, deck: 4 };
    const el = document.getElementById('v-' + view);
    if (el) {
      el.classList.add('active');
      el.scrollTop = 0;
    }
    if (map[view] !== undefined) {
      document.querySelectorAll('.nav-cat')[map[view]].classList.add('active');
    }
    window.scrollTo(0, 0);

    // Update URL hash (skip if triggered by popstate to avoid loop)
    if (!opts._fromPop) {
      const hash = view === 'eventos' ? '' : '#' + view;
      history.pushState({ view: view }, '', hash || window.location.pathname);
    }

    // Trigger data loads for Firebase-powered views
    if (view === 'mis-entradas' && typeof loadMyTickets === 'function') loadMyTickets();
    if (view === 'marketplace' && typeof loadMarketplace === 'function') loadMarketplace();
    if (view === 'organizer' && typeof loadOrganizerDashboard === 'function') loadOrganizerDashboard();
    if (view === 'perfil' && typeof loadProfile === 'function') loadProfile();
  }

  // ── Hash Router: handle back/forward + page load ──
  window.addEventListener('popstate', function(e) {
    const view = (e.state && e.state.view) ? e.state.view : (location.hash.replace('#','') || 'eventos');
    go(view, { _fromPop: true });
  });

  // On page load: read hash and navigate
  (function initHashRoute() {
    const hash = location.hash.replace('#', '');
    if (hash && hash !== 'eventos') {
      // Delay slightly so Firebase auth + events can initialize
      setTimeout(function() { go(hash); }, 300);
    }
  })();

  /* ═══════════════════════════════════════════
     AUTH FLOW
     ═══════════════════════════════════════════ */
  function authSwitchTab(tab) {
    document.getElementById('auth-tab-login').classList.toggle('active', tab === 'login');
    document.getElementById('auth-tab-register').classList.toggle('active', tab === 'register');
    document.getElementById('auth-login-panel').style.display = tab === 'login' ? 'block' : 'none';
    document.getElementById('auth-register-panel').style.display = tab === 'register' ? 'block' : 'none';
  }

  // authSendLink() → defined in Firebase block above
  // authGoogleLogin() → defined in Firebase block above

  let authRegCurrentStep = 1;
  function authRegStep(step) {
    document.querySelectorAll('.auth-step').forEach(s => s.classList.remove('active'));
    const target = document.getElementById('auth-reg-' + step);
    if (target) target.classList.add('active');
    authRegCurrentStep = step;
    // Update step bar
    const bars = document.querySelectorAll('.auth-steps-bar span');
    bars.forEach((b, i) => {
      b.classList.remove('active', 'done');
      if (i < step - 1) b.classList.add('done');
      else if (i === step - 1) b.classList.add('active');
    });
    // If step 3, simulate DNI verification
    if (step === 3) {
      const loading = document.getElementById('auth-loading-reg');
      const actions = document.getElementById('auth-photo-actions');
      loading.style.display = 'block'; actions.style.display = 'none';
      setTimeout(() => { loading.style.display = 'none'; actions.style.display = 'block'; }, 1500);
    }
  }

  function authTakePhoto() {
    const box = document.getElementById('auth-photo-box');
    const emoji = document.getElementById('auth-photo-emoji');
    box.classList.add('captured');
    emoji.textContent = '🤳';
  }

  // authFinishRegister() → defined in Firebase block above

  /* ═══════════════════════════════════════════
     MY TICKETS
     ═══════════════════════════════════════════ */
  function mtTab(tab, el) {
    document.querySelectorAll('.mt-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.mt-panel').forEach(p => p.classList.remove('active'));
    if (el) el.classList.add('active');
    else if (window.event && window.event.currentTarget) window.event.currentTarget.classList.add('active');
    const panel = document.getElementById('mt-' + tab);
    if (panel) panel.classList.add('active');
  }

  function mtToggleTicket(id) {
    const expand = document.getElementById(id + '-expand');
    if (!expand) return;
    const isOpen = expand.classList.contains('open');
    document.querySelectorAll('.mt-ticket-expand').forEach(e => e.classList.remove('open'));
    if (!isOpen) expand.classList.add('open');
  }

  /* ═══════════════════════════════════════════
     NOTIFICATION PANEL
     ═══════════════════════════════════════════ */
  function notifOpen() {
    document.getElementById('notif-overlay').classList.add('open');
    document.body.style.overflow = 'hidden';
  }
  function notifClose() {
    document.getElementById('notif-overlay').classList.remove('open');
    document.body.style.overflow = '';
  }
  function notifOverlayClick(e) {
    if (e.target === document.getElementById('notif-overlay')) notifClose();
  }
  function notifMarkRead(item) {
    item.classList.remove('unread');
    const dot = item.querySelector('.notif-unread-dot');
    if (dot) dot.remove();
    updateNotifBadge();
  }
  function notifMarkAll() {
    document.querySelectorAll('.notif-item.unread').forEach(item => notifMarkRead(item));
  }
  function updateNotifBadge() {
    const count = document.querySelectorAll('.notif-item.unread').length;
    document.querySelectorAll('.notif-badge').forEach(b => {
      b.textContent = count; b.style.display = count > 0 ? 'flex' : 'none';
    });
  }

  /* ═══════════════════════════════════════════
     RESALE MODAL
     ═══════════════════════════════════════════ */
  /* resaleOpen — moved to Firebase block above */
  function resaleClose() {
    document.getElementById('resale-overlay').classList.remove('open');
    document.body.style.overflow = '';
  }
  function resaleOverlayClick(e) {
    if (e.target === document.getElementById('resale-overlay')) resaleClose();
  }
  function resaleSetPrice(p) {
    const el = document.getElementById('resale-price');
    if (el) el.value = p;
    resaleUpdateCalc();
  }
  function resaleUpdateCalc() {
    const priceEl = document.getElementById('resale-price');
    if (!priceEl) return;
    const price = parseFloat(priceEl.value) || 0;
    const fee = Math.round(price * 0.05);
    const net = price - fee;
    const saleEl = document.getElementById('calc-sale');
    const feeEl = document.getElementById('calc-fee');
    const netEl = document.getElementById('calc-net');
    if (saleEl) saleEl.textContent = 'S/' + price;
    if (feeEl) feeEl.textContent = '-S/' + fee;
    if (netEl) netEl.textContent = 'S/' + net;
  }
  /* resaleConfirm — moved to Firebase block above */

  /* ═══════════════════════════════════════════
     SCANNER RESULT
     ═══════════════════════════════════════════ */
  function scanResult(type) {
    // type: 'approved' | 'denied' | 'used' | 'invalid'
    const overlay = document.getElementById('scan-result-overlay');
    const card = document.getElementById('scan-result-card');
    const icon = document.getElementById('scan-result-icon');
    const status = document.getElementById('scan-result-status');
    const detail = document.getElementById('scan-result-detail');
    const btn = document.getElementById('scan-next-btn');
    const time = new Date().toTimeString().slice(0, 8);
    const srTime = document.getElementById('sr-time');
    if (srTime) srTime.textContent = time;
    if (!card) return;
    card.className = 'scan-result-card ' + (type === 'approved' ? 'approved' : 'denied');
    if (type === 'approved') {
      icon.textContent = '✅'; status.textContent = 'ACCESO APROBADO';
      status.className = 'scan-result-status approved'; detail.textContent = 'DNI verificado · Entrada válida';
      btn.className = 'scan-next-btn approved'; btn.textContent = 'Siguiente →';
    } else if (type === 'used') {
      icon.textContent = '⚠️'; status.textContent = 'ENTRADA YA USADA';
      status.className = 'scan-result-status denied'; detail.textContent = 'Esta entrada ya fue escaneada';
      btn.className = 'scan-next-btn denied'; btn.textContent = 'Cerrar ×';
    } else if (type === 'denied') {
      icon.textContent = '❌'; status.textContent = 'ACCESO DENEGADO';
      status.className = 'scan-result-status denied'; detail.textContent = 'DNI no coincide con la entrada';
      btn.className = 'scan-next-btn denied'; btn.textContent = 'Cerrar ×';
    } else {
      icon.textContent = '🚫'; status.textContent = 'ENTRADA INVÁLIDA';
      status.className = 'scan-result-status denied'; detail.textContent = 'Entrada no encontrada en el sistema';
      btn.className = 'scan-next-btn denied'; btn.textContent = 'Cerrar ×';
    }
    overlay.classList.add('open');
  }
  function scanResultClose() {
    document.getElementById('scan-result-overlay').classList.remove('open');
  }

  /* ═══════════════════════════════════════════
     ORGANIZER HELPERS
     ═══════════════════════════════════════════ */
  function ogShowAttendees() {
    const section = document.getElementById('og-attendees-section');
    section.style.display = 'block';
    section.scrollIntoView({ behavior: 'smooth' });
  }

  // Wire nav-user to mis-entradas
  document.addEventListener('DOMContentLoaded', () => {
    // Add scanner demo buttons to scanner view
    const scDeviceBtn = document.querySelector('.sc-device-status');
    if (scDeviceBtn) {
      const demoBar = document.createElement('div');
      demoBar.style = 'display:flex;gap:8px;margin-top:12px;justify-content:center;';
      demoBar.innerHTML = `
        <button onclick="scanResult('approved')" style="padding:8px 14px;background:rgba(74,222,128,0.15);border:1px solid rgba(74,222,128,0.4);border-radius:8px;color:#4ade80;font-size:12px;font-weight:700;cursor:pointer;font-family:Sora,sans-serif;">✅ Simular Aprobado</button>
        <button onclick="scanResult('denied')" style="padding:8px 14px;background:rgba(248,113,113,0.15);border:1px solid rgba(248,113,113,0.4);border-radius:8px;color:#f87171;font-size:12px;font-weight:700;cursor:pointer;font-family:Sora,sans-serif;">❌ Simular Denegado</button>
        <button onclick="scanResult('used')" style="padding:8px 14px;background:rgba(255,165,0,0.15);border:1px solid rgba(255,165,0,0.4);border-radius:8px;color:#ffa500;font-size:12px;font-weight:700;cursor:pointer;font-family:Sora,sans-serif;">⚠️ Ya Usada</button>
      `;
      scDeviceBtn.parentNode.insertBefore(demoBar, scDeviceBtn.nextSibling);
    }
  });

  // ── Glitch effect on Home hero ──
  const homeHero = document.getElementById('home-hero');
  function homeGlitch() {
    if (!homeHero) return;
    homeHero.classList.add('glitch-active');
    setTimeout(() => homeHero.classList.remove('glitch-active'), 150);
  }
  setInterval(homeGlitch, 3000);
  setInterval(() => { if (Math.random() > 0.7) homeGlitch(); }, 800);

  // ── Glitch effect on Cómo Funciona ──
  const cfHero = document.getElementById('cf-hero');
  function cfGlitch() {
    if (!cfHero) return;
    cfHero.classList.add('cf-glitch-on');
    setTimeout(() => cfHero.classList.remove('cf-glitch-on'), 200);
  }
  setInterval(cfGlitch, 1500);
  setInterval(() => { if (Math.random() > 0.6) cfGlitch(); }, 500);

  // ── Mouse parallax on tickets ──
  const tFake = document.getElementById('t-fake');
  const tReal = document.getElementById('t-real');
  document.addEventListener('mousemove', (e) => {
    if (!tFake || !tReal) return;
    const x = (e.clientX / window.innerWidth - 0.5) * 2;
    const y = (e.clientY / window.innerHeight - 0.5) * 2;
    tFake.style.transform = `rotate(-3deg) rotateY(${x * 10}deg) rotateX(${-y * 10}deg)`;
    tReal.style.transform = `rotate(2deg) rotateY(${x * 15}deg) rotateX(${-y * 15}deg)`;
  });

  // ── Mouse tilt on Deck ticket mockups ──
  const dkFake = document.querySelector('.dk-ticket-fake');
  const dkReal = document.querySelector('.dk-ticket-real');
  if (dkFake && dkReal) {
    const dkTickets = document.querySelector('.dk-tickets');
    dkTickets.addEventListener('mousemove', (e) => {
      const rect = dkTickets.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width - 0.5) * 2;
      const y = ((e.clientY - rect.top) / rect.height - 0.5) * 2;
      dkFake.style.transform = `rotate(-3deg) rotateY(${x * 10}deg) rotateX(${-y * 10}deg)`;
      dkReal.style.transform = `rotate(2deg) rotateY(${x * 15}deg) rotateX(${-y * 15}deg)`;
    });
    dkTickets.addEventListener('mouseleave', () => {
      dkFake.style.transform = 'rotate(-3deg)';
      dkReal.style.transform = 'rotate(2deg)';
    });
  }

  // ── Deck Language Toggle (ES/EN) ──
  let deckLang = 'es';
  function dkLang(lang) {
    deckLang = lang;
    const deck = document.getElementById('v-deck');
    if (!deck) return;
    // Update toggle buttons
    const btns = document.querySelectorAll('#dk-lang-toggle button');
    if (btns.length >= 2) {
      btns.forEach(b => b.classList.remove('active'));
      btns[lang === 'es' ? 0 : 1].classList.add('active');
    }
    // Swap text content for elements with data-es/data-en
    deck.querySelectorAll('[data-' + lang + ']').forEach(el => {
      const val = el.getAttribute('data-' + lang);
      if (val !== null) {
        // Check if it contains HTML (like <span> or <em>)
        if (val.includes('<')) {
          el.innerHTML = val;
        } else {
          el.textContent = val;
        }
      }
    });
  }

  // ── Deck Mode Toggle (Simple/Tech) ──
  function dkMode(mode) {
    const deck = document.getElementById('v-deck');
    if (!deck) return;
    const btns = document.querySelectorAll('#dk-mode-toggle button');
    btns.forEach(b => b.classList.remove('active'));
    btns[mode === 'simple' ? 0 : 1].classList.add('active');
    if (mode === 'tech') {
      deck.classList.add('deck-tech-mode');
    } else {
      deck.classList.remove('deck-tech-mode');
    }
  }

  // ═══════════════════════════════════════════
  // LOCATION DROPDOWN
  // ═══════════════════════════════════════════
  function toggleDropdown(type) {
    const others = type === 'loc' ? 'date' : 'loc';
    document.getElementById(others + '-dropdown').classList.remove('open');
    document.getElementById(type + '-dropdown').classList.toggle('open');
  }

  let homeLocFilter = 'todos';
  const locMap = {
    'Lima, Perú': 'todos', 'Cerca de ti': 'cerca',
    'Barranco': 'barranco', 'Miraflores': 'miraflores',
    'San Isidro': 'san isidro', 'Surco': 'surco',
    'Cercado de Lima': 'cercado', 'Chorrillos': 'chorrillos'
  };

  // ── Geolocation: "Cerca de ti" ──
  var userLocation = null; // { lat, lng }

  function requestUserLocation(callback) {
    if (!navigator.geolocation) {
      alert('Tu navegador no soporta geolocalización.');
      return;
    }
    var locVal = document.getElementById('loc-value');
    locVal.textContent = 'Localizando...';
    navigator.geolocation.getCurrentPosition(
      function(pos) {
        userLocation = { lat: pos.coords.latitude, lng: pos.coords.longitude };
        locVal.textContent = 'Cerca de ti';
        // Save location to user profile (Firestore)
        if (typeof db !== 'undefined' && currentUser) {
          db.collection('users').doc(currentUser.uid).set({
            lastLocation: { lat: userLocation.lat, lng: userLocation.lng, ts: new Date().toISOString() }
          }, { merge: true }).catch(function(){});
        }
        console.log('📍 User location:', userLocation.lat, userLocation.lng);
        if (callback) callback();
      },
      function(err) {
        console.warn('Geolocation error:', err.message);
        locVal.textContent = 'Lima, Perú';
        alert('No pudimos obtener tu ubicación. Verifica los permisos de tu navegador.');
      },
      { enableHighAccuracy: false, timeout: 10000, maximumAge: 300000 }
    );
  }

  function selectLoc(el, value) {
    document.querySelectorAll('#loc-dropdown .dropdown-item').forEach(i => i.classList.remove('selected'));
    el.classList.add('selected');
    setTimeout(() => document.getElementById('loc-dropdown').classList.remove('open'), 150);

    if (value === 'Cerca de ti') {
      requestUserLocation(function() {
        homeLocFilter = 'cerca';
        filterHomeCards();
      });
      return;
    }

    document.getElementById('loc-value').textContent = value;
    homeLocFilter = locMap[value] || 'todos';
    filterHomeCards();
  }

  function filterHomeCards() {
    // Re-filter the visible cards based on location
    document.querySelectorAll('#v-eventos .ev-card').forEach(function(card) {
      if (homeLocFilter === 'todos') { card.style.display = ''; return; }
      if (homeLocFilter === 'cerca') { card.style.display = ''; return; } // Show all when geolocated (distance sorting TODO)
      var distrito = (card.dataset.distrito || '').toLowerCase();
      card.style.display = distrito.includes(homeLocFilter) ? '' : 'none';
    });
  }

  // Close dropdowns when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('#loc-field')) {
      document.getElementById('loc-dropdown').classList.remove('open');
    }
    if (!e.target.closest('#date-field')) {
      document.getElementById('date-dropdown').classList.remove('open');
    }
  });

  // ═══════════════════════════════════════════
  // CALENDAR
  // ═══════════════════════════════════════════
  const MONTHS_ES = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
  const DAYS_ES = ['Lu','Ma','Mi','Ju','Vi','Sa','Do'];

  let calYear = 2026;
  let calMonth = 4; // May (0-indexed)
  let rangeStart = null;
  let rangeEnd = null;

  function renderCalendar() {
    const grid = document.getElementById('cal-grid');
    const label = document.getElementById('cal-month-label');
    label.textContent = MONTHS_ES[calMonth] + ' ' + calYear;

    let html = '';
    DAYS_ES.forEach(d => { html += `<div class="cal-day-label">${d}</div>`; });

    const firstDay = new Date(calYear, calMonth, 1);
    let startDay = firstDay.getDay(); // 0=Sun
    startDay = startDay === 0 ? 6 : startDay - 1; // shift to Mon=0

    const daysInMonth = new Date(calYear, calMonth + 1, 0).getDate();
    const today = new Date();

    // Empty cells before first day
    for (let i = 0; i < startDay; i++) {
      html += '<div class="cal-day empty"></div>';
    }

    for (let d = 1; d <= daysInMonth; d++) {
      const date = new Date(calYear, calMonth, d);
      const dateStr = date.toISOString().split('T')[0];
      let cls = 'cal-day';

      if (today.getFullYear() === calYear && today.getMonth() === calMonth && today.getDate() === d) {
        cls += ' today';
      }

      if (rangeStart && rangeEnd) {
        if (dateStr === rangeStart && dateStr === rangeEnd) cls += ' range-start range-end';
        else if (dateStr === rangeStart) cls += ' range-start';
        else if (dateStr === rangeEnd) cls += ' range-end';
        else if (dateStr > rangeStart && dateStr < rangeEnd) cls += ' in-range';
      } else if (rangeStart && !rangeEnd) {
        if (dateStr === rangeStart) cls += ' range-start range-end';
      }

      html += `<div class="${cls}" data-date="${dateStr}" onclick="calSelect('${dateStr}', event)">${d}</div>`;
    }

    grid.innerHTML = html;
    updateRangeInfo();
  }

  function calSelect(dateStr, e) {
    e.stopPropagation();
    if (!rangeStart || (rangeStart && rangeEnd)) {
      // Start new selection
      rangeStart = dateStr;
      rangeEnd = null;
    } else {
      // Set end
      if (dateStr < rangeStart) {
        rangeEnd = rangeStart;
        rangeStart = dateStr;
      } else if (dateStr === rangeStart) {
        // Single day — keep it
        rangeEnd = dateStr;
      } else {
        rangeEnd = dateStr;
      }
    }
    renderCalendar();
  }

  function updateRangeInfo() {
    const info = document.getElementById('cal-range-text');
    const dateVal = document.getElementById('date-value');

    if (rangeStart && rangeEnd && rangeStart !== rangeEnd) {
      const s = formatDateShort(rangeStart);
      const e = formatDateShort(rangeEnd);
      info.textContent = s + ' → ' + e;
      dateVal.textContent = s + ' — ' + e;
    } else if (rangeStart) {
      const s = formatDateShort(rangeStart);
      info.textContent = s + ' (clic otro día para rango)';
      dateVal.textContent = s;
    } else {
      info.textContent = 'Selecciona una fecha o rango';
      dateVal.textContent = 'Todas las fechas';
    }
  }

  function formatDateShort(str) {
    const d = new Date(str + 'T12:00:00');
    return d.getDate() + ' ' + MONTHS_ES[d.getMonth()].substring(0, 3);
  }

  function formatDateFull(str) {
    const d = new Date(str + 'T12:00:00');
    return d.getDate() + ' de ' + MONTHS_ES[d.getMonth()] + ', ' + d.getFullYear();
  }

  function calNav(dir, e) {
    e.stopPropagation();
    calMonth += dir;
    if (calMonth > 11) { calMonth = 0; calYear++; }
    if (calMonth < 0) { calMonth = 11; calYear--; }
    renderCalendar();
  }

  function calClear(e) {
    e.stopPropagation();
    rangeStart = null;
    rangeEnd = null;
    renderCalendar();
    document.getElementById('search-results').classList.remove('visible');
  }

  // Init calendar
  renderCalendar();

  // ═══════════════════════════════════════════
  // SEARCH — Autocomplete + filter
  // ═══════════════════════════════════════════
  var searchAcIndex = -1;

  function searchAutocomplete(query) {
    const dropdown = document.getElementById('search-ac-dropdown');
    if (!dropdown) return;
    query = query.trim().toLowerCase();
    searchAcIndex = -1;

    if (query.length < 2) {
      dropdown.classList.remove('open');
      dropdown.innerHTML = '';
      return;
    }

    // Search from allEvents (Firestore) AND SEED_EVENTS as fallback
    let results = [];
    // Combine allEvents + SEED_EVENTS for full coverage
    const searchPool = (typeof allEvents !== 'undefined' && allEvents.length > 0)
      ? allEvents
      : (typeof SEED_EVENTS !== 'undefined' ? SEED_EVENTS.map(e => ({...e, _id: e.id})) : []);

    if (searchPool.length > 0) {
      results = searchPool.filter(ev => {
        const lineupStr = Array.isArray(ev.lineup) ? ev.lineup.join(' ') : '';
        const tagsStr = Array.isArray(ev.tags) ? ev.tags.join(' ') : '';
        const haystack = ((ev.name || '') + ' ' + (ev.subtitle || '') + ' ' + (ev.venue || '') + ' ' + (ev.genre || '') + ' ' + (ev.location || '') + ' ' + (ev.distrito || '') + ' ' + (ev.description || '') + ' ' + lineupStr + ' ' + tagsStr).toLowerCase();
        return haystack.includes(query);
      }).slice(0, 6);
    }
    // Extra fallback: also search DOM cards
    if (results.length === 0) {
      document.querySelectorAll('#v-eventos .ev-card').forEach(card => {
        const title = card.querySelector('.ev-card-title')?.textContent || '';
        const sub = card.querySelector('.ev-card-sub')?.textContent || '';
        const meta = card.querySelector('.ev-card-meta')?.textContent || '';
        const cardName = card.dataset.name || '';
        const haystack = (title + ' ' + sub + ' ' + meta + ' ' + cardName).toLowerCase();
        if (haystack.includes(query) && results.length < 6) {
          const onclick = card.getAttribute('onclick') || '';
          const idMatch = onclick.match(/'([^']+)'/);
          results.push({ name: title || cardName, subtitle: sub, venue: meta, _id: idMatch ? idMatch[1] : '', dateLabel: '' });
        }
      });
    }

    if (results.length === 0) {
      dropdown.classList.remove('open');
      dropdown.innerHTML = '';
      return;
    }

    let html = '';
    const categoryEmojis = { 'festival': '🎪', 'club-night': '🪩', 'warehouse': '🏚️', 'day-party': '☀️', 'rooftop': '🌇', 'pool-party': '🏖️', 'concert': '🎧', 'afterhours': '🌙' };
    results.forEach((ev, i) => {
      const highlighted = (ev.name || '').replace(new RegExp('(' + query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi'), '<mark>$1</mark>');
      const venue = ev.venue || '';
      const dateLabel = ev.dateLabel || ev.date || '';
      const genre = ev.genre || '';
      const evTags = Array.isArray(ev.tags) ? ev.tags : [];
      const cat = evTags.find(t => categoryEmojis[t]) || '';
      const emoji = categoryEmojis[cat] || '🎧';
      const tagHtml = cat ? `<span style="background:rgba(229,255,0,0.12);color:var(--acid);padding:1px 6px;border-radius:4px;font-size:10px;text-transform:uppercase;letter-spacing:0.5px;margin-left:6px">${cat}</span>` : '';
      html += `<div class="search-ac-item" data-index="${i}" onclick="searchAcSelect('${ev._id || ''}')" onmouseenter="searchAcIndex=${i};searchAcHighlight()">
        <span class="ac-emoji">${emoji}</span>
        <div class="ac-info">
          <div class="ac-name">${highlighted}${tagHtml}</div>
          <div class="ac-meta">${genre}${venue ? ' · ' + venue : ''}${dateLabel ? ' · ' + dateLabel : ''}</div>
        </div>
      </div>`;
    });

    dropdown.innerHTML = html;
    dropdown.classList.add('open');
  }

  function searchAcSelect(eventId) {
    const dropdown = document.getElementById('search-ac-dropdown');
    if (dropdown) { dropdown.classList.remove('open'); dropdown.innerHTML = ''; }
    if (eventId) {
      openEvent(eventId);
    } else {
      doSearch();
    }
  }

  function searchKeydown(e) {
    const dropdown = document.getElementById('search-ac-dropdown');
    const items = dropdown ? dropdown.querySelectorAll('.search-ac-item') : [];

    if (e.key === 'ArrowDown') {
      e.preventDefault();
      searchAcIndex = Math.min(searchAcIndex + 1, items.length - 1);
      searchAcHighlight();
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      searchAcIndex = Math.max(searchAcIndex - 1, -1);
      searchAcHighlight();
    } else if (e.key === 'Enter') {
      if (searchAcIndex >= 0 && items[searchAcIndex]) {
        items[searchAcIndex].click();
      } else {
        if (dropdown) { dropdown.classList.remove('open'); dropdown.innerHTML = ''; }
        doSearch();
      }
    } else if (e.key === 'Escape') {
      if (dropdown) { dropdown.classList.remove('open'); dropdown.innerHTML = ''; }
    }
  }

  function searchAcHighlight() {
    const items = document.querySelectorAll('#search-ac-dropdown .search-ac-item');
    items.forEach((item, i) => {
      item.classList.toggle('focused', i === searchAcIndex);
    });
  }

  // Close autocomplete on outside click
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.search-field-main')) {
      const dd = document.getElementById('search-ac-dropdown');
      if (dd) { dd.classList.remove('open'); dd.innerHTML = ''; }
    }
  });

  function doSearch() {
    // Close dropdowns
    document.getElementById('loc-dropdown').classList.remove('open');
    document.getElementById('date-dropdown').classList.remove('open');

    const searchInput = document.getElementById('search-text-input');
    const query = searchInput ? searchInput.value.trim().toLowerCase() : '';

    const allCards = document.querySelectorAll('#v-eventos .ev-card');
    let matchCount = 0;

    allCards.forEach(card => {
      let show = true;

      // Text filter — match against card name, venue, or any text content
      if (query) {
        const cardText = (card.dataset.name || '') + ' ' + (card.textContent || '');
        if (!cardText.toLowerCase().includes(query)) show = false;
      }

      // Location filter
      if (show && homeLocFilter !== 'todos' && homeLocFilter !== 'cerca') {
        if (card.dataset.distrito !== homeLocFilter) show = false;
      }

      // Date filter
      if (show && rangeStart) {
        const endDate = rangeEnd || rangeStart;
        const cardDate = card.dataset.date;
        if (cardDate && (cardDate < rangeStart || cardDate > endDate)) show = false;
      }

      card.style.display = show ? '' : 'none';
      if (show) matchCount++;
    });

    // Show results banner with count
    const banner = document.getElementById('search-results');
    const titleEl = document.getElementById('srb-title');
    const gridEl = document.getElementById('srb-grid');

    const loc = document.getElementById('loc-value').textContent;
    const dateLabel = document.getElementById('date-value').textContent;
    let filterText = `en <span>${loc}</span>`;
    if (dateLabel !== 'Todas las fechas') filterText += ` · ${dateLabel}`;

    titleEl.innerHTML = `${matchCount} evento${matchCount !== 1 ? 's' : ''} encontrado${matchCount !== 1 ? 's' : ''} ${filterText}`;
    gridEl.innerHTML = '';
    banner.classList.add('visible');

    // Scroll to first visible card
    const firstVisible = document.querySelector('#v-eventos .ev-card[style=""], #v-eventos .ev-card:not([style])');
    if (firstVisible) firstVisible.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }

  function clearSearch() {
    document.getElementById('search-results').classList.remove('visible');
    // Clear text input
    const searchInput = document.getElementById('search-text-input');
    if (searchInput) searchInput.value = '';
    // Show all cards again
    document.querySelectorAll('#v-eventos .ev-card').forEach(card => {
      card.style.display = '';
    });
    // Reset filters
    homeLocFilter = 'todos';
    rangeStart = null; rangeEnd = null;
    document.getElementById('loc-value').textContent = 'Lima, Perú';
    document.querySelectorAll('#loc-dropdown .dropdown-item').forEach(i => i.classList.remove('selected'));
    document.querySelector('#loc-dropdown .dropdown-item').classList.add('selected');
    document.getElementById('date-value').textContent = 'Todas las fechas';
    renderCalendar();
  }

  // ═══════════════════════════════════════════
  // MARKETPLACE: Dropdowns, Calendar & Filters
  // ═══════════════════════════════════════════
  let mpLocFilter = 'todos';
  let mpCalYear = 2026, mpCalMonth = 4;
  let mpRangeStart = null, mpRangeEnd = null;

  function mpToggle(type) {
    const other = type === 'loc' ? 'date' : 'loc';
    document.getElementById('mp-' + other + '-dropdown').classList.remove('open');
    document.getElementById('mp-' + type + '-dropdown').classList.toggle('open');
  }

  function mpSelectLoc(el, label, key) {
    document.getElementById('mp-loc-value').textContent = label;
    document.querySelectorAll('#mp-loc-dropdown .dropdown-item').forEach(i => i.classList.remove('selected'));
    el.classList.add('selected');
    mpLocFilter = key;
    setTimeout(() => document.getElementById('mp-loc-dropdown').classList.remove('open'), 150);
    mpApplyAllFilters();
  }

  // Close MP dropdowns on outside click
  document.addEventListener('click', (e) => {
    if (!e.target.closest('#mp-loc-field')) {
      const d = document.getElementById('mp-loc-dropdown');
      if (d) d.classList.remove('open');
    }
    if (!e.target.closest('#mp-date-field')) {
      const d = document.getElementById('mp-date-dropdown');
      if (d) d.classList.remove('open');
    }
  });

  // MP Calendar
  function mpRenderCalendar() {
    const grid = document.getElementById('mp-cal-grid');
    const label = document.getElementById('mp-cal-month-label');
    if (!grid || !label) return;
    label.textContent = MONTHS_ES[mpCalMonth] + ' ' + mpCalYear;

    let html = '';
    DAYS_ES.forEach(d => { html += '<div class="cal-day-label">' + d + '</div>'; });

    const firstDay = new Date(mpCalYear, mpCalMonth, 1);
    let startDay = firstDay.getDay();
    startDay = startDay === 0 ? 6 : startDay - 1;
    const daysInMonth = new Date(mpCalYear, mpCalMonth + 1, 0).getDate();
    const today = new Date();

    for (let i = 0; i < startDay; i++) html += '<div class="cal-day empty"></div>';

    for (let d = 1; d <= daysInMonth; d++) {
      const date = new Date(mpCalYear, mpCalMonth, d);
      const dateStr = date.toISOString().split('T')[0];
      let cls = 'cal-day';
      if (today.getFullYear() === mpCalYear && today.getMonth() === mpCalMonth && today.getDate() === d) cls += ' today';
      if (mpRangeStart && mpRangeEnd) {
        const ts = date.getTime(), s = new Date(mpRangeStart).getTime(), e = new Date(mpRangeEnd).getTime();
        if (ts === s) cls += ' range-start';
        if (ts === e) cls += ' range-end';
        if (ts > s && ts < e) cls += ' in-range';
        if (ts === s && ts === e) cls += ' range-start range-end';
      } else if (mpRangeStart && !mpRangeEnd) {
        if (dateStr === mpRangeStart) cls += ' range-start range-end';
      }
      html += '<div class="' + cls + '" data-date="' + dateStr + '" onclick="mpCalSelect(\'' + dateStr + '\', event)">' + d + '</div>';
    }
    grid.innerHTML = html;
    mpUpdateRangeInfo();
  }

  function mpCalSelect(dateStr, e) {
    e.stopPropagation();
    if (!mpRangeStart || (mpRangeStart && mpRangeEnd)) {
      mpRangeStart = dateStr; mpRangeEnd = null;
    } else {
      if (dateStr < mpRangeStart) { mpRangeEnd = mpRangeStart; mpRangeStart = dateStr; }
      else if (dateStr === mpRangeStart) { mpRangeEnd = dateStr; }
      else { mpRangeEnd = dateStr; }
    }
    mpRenderCalendar();
    mpApplyAllFilters();
  }

  function mpUpdateRangeInfo() {
    const info = document.getElementById('mp-cal-range-text');
    const dateVal = document.getElementById('mp-date-value');
    if (!info || !dateVal) return;
    if (mpRangeStart && mpRangeEnd && mpRangeStart !== mpRangeEnd) {
      info.textContent = formatDateShort(mpRangeStart) + ' → ' + formatDateShort(mpRangeEnd);
      dateVal.textContent = formatDateShort(mpRangeStart) + ' — ' + formatDateShort(mpRangeEnd);
    } else if (mpRangeStart) {
      info.textContent = formatDateShort(mpRangeStart) + ' (clic otro día para rango)';
      dateVal.textContent = formatDateShort(mpRangeStart);
    } else {
      info.textContent = 'Selecciona una fecha o rango';
      dateVal.textContent = 'Todas las fechas';
    }
  }

  function mpCalNav(dir, e) {
    e.stopPropagation();
    mpCalMonth += dir;
    if (mpCalMonth > 11) { mpCalMonth = 0; mpCalYear++; }
    if (mpCalMonth < 0) { mpCalMonth = 11; mpCalYear--; }
    mpRenderCalendar();
  }

  function mpCalClear(e) {
    e.stopPropagation();
    mpRangeStart = null; mpRangeEnd = null;
    mpRenderCalendar();
    mpApplyAllFilters();
  }

  mpRenderCalendar();

  // Combined filter/sort logic
  const mpContainer = document.getElementById('mp-listings');
  const mpOrigOrder = mpContainer ? Array.from(mpContainer.querySelectorAll('.mp-listing')) : [];
  let mpSortFecha = false, mpSortPrecio = false;

  function mpApplyAllFilters() {
    if (!mpContainer) return;
    const activeBtn = document.querySelector('#mp-filters .mp-filter.active');
    const filter = activeBtn ? activeBtn.dataset.filter : 'todos';
    let listings = Array.from(mpContainer.querySelectorAll('.mp-listing'));

    // Show all first
    listings.forEach(l => l.style.display = '');

    // Location filter
    if (mpLocFilter !== 'todos' && mpLocFilter !== 'cerca') {
      listings.forEach(l => {
        if (l.dataset.distrito !== mpLocFilter) l.style.display = 'none';
      });
    }

    // Date filter
    if (mpRangeStart) {
      const startDate = mpRangeStart;
      const endDate = mpRangeEnd || mpRangeStart;
      listings.forEach(l => {
        if (l.style.display === 'none') return;
        if (l.dataset.date < startDate || l.dataset.date > endDate) l.style.display = 'none';
      });
    }

    // Oferta filter
    if (filter === 'oferta') {
      listings.forEach(l => {
        if (l.style.display === 'none') return;
        if (l.dataset.oferta !== '1') l.style.display = 'none';
      });
    }

    // Sort — can combine fecha + precio (primary: fecha, secondary: precio)
    let visible = listings.filter(l => l.style.display !== 'none');
    let hidden = listings.filter(l => l.style.display === 'none');

    if (mpSortFecha && mpSortPrecio) {
      // Sort by date first, then by price within same date
      visible.sort((a, b) => {
        const dateCmp = a.dataset.date.localeCompare(b.dataset.date);
        if (dateCmp !== 0) return dateCmp;
        return parseInt(a.dataset.price) - parseInt(b.dataset.price);
      });
    } else if (mpSortFecha) {
      visible.sort((a, b) => a.dataset.date.localeCompare(b.dataset.date));
    } else if (mpSortPrecio) {
      visible.sort((a, b) => parseInt(a.dataset.price) - parseInt(b.dataset.price));
    }

    // Re-append in order
    visible.forEach(l => mpContainer.appendChild(l));
    hidden.forEach(l => mpContainer.appendChild(l));
  }

  // Filter buttons (Todos / Oferta) — mutually exclusive
  document.querySelectorAll('#mp-filters .mp-filter').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#mp-filters .mp-filter').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      mpApplyAllFilters();
    });
  });

  // Sort buttons (fecha / precio) — toggleable, can combine
  document.querySelectorAll('#mp-filters .mp-sort').forEach(btn => {
    btn.addEventListener('click', () => {
      btn.classList.toggle('active');
      if (btn.dataset.sort === 'fecha') mpSortFecha = btn.classList.contains('active');
      if (btn.dataset.sort === 'precio') mpSortPrecio = btn.classList.contains('active');
      mpApplyAllFilters();
    });
  });

  /* ═══════════════════════════════════════════
     PURCHASE MODAL
     ═══════════════════════════════════════════ */
  var pmCurrentStep = 1;
  var pmSelectedPay = 'card';

  // Ticket quantities & pricing (overwritten by Firebase openEvent when dynamic)
  var pmTicketCatalog = {
    ga:  { name: 'General Admission', price: 0, priceLabel: 'GRATIS (Demo)' },
    vip: { name: '👑 VIP',            price: 0, priceLabel: 'GRATIS (Demo)' }
  };
  var pmTicketQty = { ga: 0, vip: 0 };

  function pmBuildTicketList() {
    const container = document.getElementById('pm-ticket-list-container');
    if (!container) return;
    let html = '';
    for (const [id, t] of Object.entries(pmTicketCatalog)) {
      pmTicketQty[id] = pmTicketQty[id] || 0;
      const priceDisplay = t.priceLabel || (t.price === 0 ? 'GRATIS' : 'S/' + t.price);
      html += `<div class="pm-ticket-row" id="pm-opt-${id}">
        <div style="flex:1">
          <div class="pm-ticket-name">${t.name}</div>
          <div class="pm-ticket-sub">${t.capacity ? t.capacity + ' disponibles' : ''}</div>
        </div>
        <div style="display:flex;align-items:center;gap:16px">
          <div class="pm-ticket-price" style="font-size:16px;${t.price === 0 ? 'color:var(--acid)' : ''}">${priceDisplay}</div>
          <div class="pm-qty-row">
            <button class="pm-qty-btn" id="pm-minus-${id}" onclick="pmQtyChange('${id}',-1)" disabled>−</button>
            <span class="pm-qty-num" id="pm-qty-${id}">0</span>
            <button class="pm-qty-btn" id="pm-plus-${id}" onclick="pmQtyChange('${id}',1)">+</button>
          </div>
        </div>
      </div>`;
    }
    container.innerHTML = html;
  }

  function pmQtyChange(id, delta) {
    pmTicketQty[id] = Math.max(0, Math.min(6, (pmTicketQty[id] || 0) + delta));
    document.getElementById('pm-qty-' + id).textContent = pmTicketQty[id];
    document.getElementById('pm-minus-' + id).disabled = pmTicketQty[id] === 0;
    pmUpdateQtyUI();
  }

  function pmUpdateQtyUI() {
    let subtotal = 0, totalQty = 0;
    for (const [id, qty] of Object.entries(pmTicketQty)) {
      const ticket = pmTicketCatalog[id];
      if (!ticket) continue;
      subtotal += qty * ticket.price;
      totalQty += qty;
    }
    // Subtotal label
    document.getElementById('pm-step1-subtotal').textContent = subtotal === 0 && totalQty > 0 ? 'GRATIS' : 'S/' + subtotal;
    // Continue button
    const btn = document.getElementById('pm-step1-continue');
    btn.disabled = totalQty === 0;
    btn.style.opacity = totalQty === 0 ? '0.4' : '1';
    // ID notice
    const notice = document.getElementById('pm-id-notice');
    const noticeText = document.getElementById('pm-id-notice-text');
    if (totalQty === 0) {
      notice.classList.remove('visible');
    } else if (totalQty === 1) {
      notice.classList.add('visible');
      noticeText.textContent = 'Tu entrada quedará vinculada a tu DNI en el siguiente paso.';
    } else {
      notice.classList.add('visible');
      noticeText.textContent = `Comprarás ${totalQty} entradas. Solo verificas tu DNI ahora. Podrás asignar las entradas de tus acompañantes desde Mis Entradas después de la compra.`;
    }
    // Highlight rows that have qty > 0
    for (const id of Object.keys(pmTicketQty)) {
      const row = document.getElementById('pm-opt-' + id);
      if (row) row.style.borderColor = pmTicketQty[id] > 0 ? 'var(--acid)' : '';
    }
  }

  function pmBuildPaySummary() {
    let subtotal = 0, totalQty = 0;
    let html = '';
    for (const [id, qty] of Object.entries(pmTicketQty)) {
      if (qty === 0) continue;
      const t = pmTicketCatalog[id];
      if (!t) continue;
      const lineTotal = qty * t.price;
      subtotal += lineTotal;
      totalQty += qty;
      html += `<div class="pm-pay-row"><span>${qty}× ${t.name}</span><span>S/${lineTotal}</span></div>`;
    }
    const fee = totalQty * 10;
    const total = subtotal + fee;
    document.getElementById('pm-pay-items').innerHTML = html;
    document.getElementById('pm-pay-fee').textContent = 'S/' + fee;
    document.getElementById('pm-pay-total').textContent = 'S/' + total;

    // Calculate real percentages over the pre-fee subtotal
    if (subtotal > 0) {
      const pct = (n) => (n / subtotal * 100).toFixed(1) + '%';
      // Split: Lezgo 4/10, Verificación 3/10, Procesamiento 3/10
      document.getElementById('pm-fee-plataforma').textContent    = pct(fee * 0.4);
      document.getElementById('pm-fee-verificacion').textContent  = pct(fee * 0.3);
      document.getElementById('pm-fee-procesamiento').textContent = pct(fee * 0.3);
    }
    // Reset desglose to closed
    document.getElementById('pm-fee-breakdown').classList.remove('visible');
    document.getElementById('pm-fee-chevron').classList.remove('open');
  }

  function pmToggleDesglose() {
    const bd = document.getElementById('pm-fee-breakdown');
    const ch = document.getElementById('pm-fee-chevron');
    bd.classList.toggle('visible');
    ch.classList.toggle('open');
  }
  var pmVerifiedDni = '';

  var pmUserLoggedIn = false;   // flip to true after login mock
  var pmUserDniVerified = false; // flip to true after DNI verified

  function pmOpen(eventLabel) {
    if (eventLabel) document.getElementById('pm-event-label').textContent = eventLabel;
    // Reset quantities each time modal opens (unless pre-seeded by card click)
    pmTicketQty = {};
    for (const id of Object.keys(pmTicketCatalog)) {
      pmTicketQty[id] = 0;
      const qEl = document.getElementById('pm-qty-' + id);
      const mEl = document.getElementById('pm-minus-' + id);
      if (qEl) qEl.textContent = '0';
      if (mEl) mEl.disabled = true;
    }
    pmUpdateQtyUI();
    // Route based on auth state
    if (pmUserLoggedIn && pmUserDniVerified) {
      pmGoStep(3);
    } else if (pmUserLoggedIn) {
      pmGoStep(2);
    } else {
      pmGoStep(0);
    }
    document.getElementById('pm-overlay').classList.add('pm-open');
    document.body.style.overflow = 'hidden';
  }

  function pmClose() {
    document.getElementById('pm-overlay').classList.remove('pm-open');
    document.body.style.overflow = '';
  }

  function pmOverlayClick(e) {
    if (e.target === document.getElementById('pm-overlay')) pmClose();
  }

  function pmGoStep(step) {
    document.querySelectorAll('.pm-panel').forEach(p => p.classList.remove('active'));
    document.getElementById('pm-panel-' + step).classList.add('active');
    pmCurrentStep = step;

    // Show/hide steps bar (hidden on step 0)
    const bar = document.getElementById('pm-steps-bar');
    if (bar) bar.style.display = step === 0 ? 'none' : 'flex';

    // Update dots (steps 1-4 only)
    for (let i = 1; i <= 4; i++) {
      const dot = document.getElementById('pm-dot-' + i);
      if (!dot) continue;
      dot.classList.remove('active', 'done');
      if (i < step) dot.classList.add('done');
      else if (i === step) dot.classList.add('active');
    }
    for (let i = 1; i <= 3; i++) {
      const line = document.getElementById('pm-line-' + i);
      if (!line) continue;
      if (i < step) line.classList.add('done');
      else line.classList.remove('done');
    }

    const titles = { 0: 'Comprar entrada', 1: 'Elige tu entrada', 2: 'Verifica tu identidad', 3: 'Pago', 4: '¡Listo!' };
    document.getElementById('pm-step-title').textContent = titles[step] || '';

    if (step === 3) {
      pmBuildPaySummary();
    }
  }

  /* pmLoginWith — moved to Firebase block above */

  function pmFormatDni(input) {
    input.value = input.value.replace(/[^0-9]/g, '').slice(0, 8);
  }

  function pmFormatCard(input) {
    let v = input.value.replace(/\D/g, '').slice(0, 16);
    input.value = v.replace(/(.{4})/g, '$1 ').trim();
  }

  function pmFormatExp(input) {
    let v = input.value.replace(/\D/g, '').slice(0, 4);
    if (v.length >= 2) v = v.slice(0, 2) + '/' + v.slice(2);
    input.value = v;
  }

  function pmSelectPay(method) {
    pmSelectedPay = method;
    document.querySelectorAll('.pm-card-opt').forEach(o => o.classList.remove('selected'));
    const selected = document.getElementById('pm-pay-' + method);
    if (selected) selected.classList.add('selected');
    const cardFields = document.getElementById('pm-pay-card-fields');
    const yapeFields = document.getElementById('pm-pay-yape-fields');
    if (cardFields) cardFields.style.display = method === 'card' ? 'block' : 'none';
    if (yapeFields) yapeFields.style.display = (method === 'yape' || method === 'izipay') ? 'block' : 'none';
  }

  /* pmVerifyDni — moved to Firebase block above */

  /* pmPay — moved to Firebase block above */

  /* ═══════════════════════════════════════════
     COUNTDOWN TIMER
     ═══════════════════════════════════════════ */
  function updateCountdown() {
    const ev = window._currentEvent;
    const targetDate = ev ? ev.date + 'T' + (ev.timeStart || '21:00') + ':00-05:00' : '2026-05-16T21:00:00-05:00';
    const target = new Date(targetDate); // Lima time
    const now = new Date();
    let diff = target - now;
    if (diff <= 0) {
      const el = document.getElementById('ev-countdown');
      if (el) el.innerHTML = '<span class="ev-countdown-label">🔴 EN VIVO</span>';
      return;
    }
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const secs = Math.floor((diff % (1000 * 60)) / 1000);
    const cd = document.getElementById('ev-countdown');
    if (cd) {
      cd.innerHTML = `<span class="ev-countdown-label">⏱ Faltan</span>
        <span class="ev-countdown-unit">${String(days).padStart(2,'0')}</span> días
        <span class="ev-countdown-unit">${String(hours).padStart(2,'0')}</span> h
        <span class="ev-countdown-unit">${String(mins).padStart(2,'0')}</span> min
        <span class="ev-countdown-unit">${String(secs).padStart(2,'0')}</span> seg`;
    }
  }
  updateCountdown();
  setInterval(updateCountdown, 1000);

  /* ═══════════════════════════════════════════
     NAV PROFILE DROPDOWN
     ═══════════════════════════════════════════ */
  let ndDarkOn = true;
  let ndLang = 'ES';

  function ndToggle(e) {
    e.stopPropagation();
    const dd = document.getElementById('nav-dropdown');
    if (!dd) return;
    const isOpen = dd.classList.contains('open');
    if (isOpen) {
      dd.classList.remove('open');
    } else {
      // Position based on trigger button
      const btn = e.currentTarget;
      const rect = btn.getBoundingClientRect();
      dd.style.top = (rect.bottom + 8) + 'px';
      dd.style.right = (window.innerWidth - rect.right) + 'px';
      dd.classList.add('open');
    }
  }

  function ndGo(view) {
    const dd = document.getElementById('nav-dropdown');
    if (dd) dd.classList.remove('open');
    go(view);
  }

  function ndToggleLang(e) {
    e.stopPropagation();
    ndLang = ndLang === 'ES' ? 'EN' : 'ES';
    const lang = ndLang.toLowerCase();

    // Update pill UI
    const esEl = document.getElementById('nd-lang-es');
    const enEl = document.getElementById('nd-lang-en');
    if (esEl) {
      esEl.style.background = lang === 'es' ? 'var(--acid)' : 'rgba(255,255,255,0.08)';
      esEl.style.color = lang === 'es' ? '#000' : 'var(--text-dim)';
    }
    if (enEl) {
      enEl.style.background = lang === 'en' ? 'var(--acid)' : 'rgba(255,255,255,0.08)';
      enEl.style.color = lang === 'en' ? '#000' : 'var(--text-dim)';
    }

    // Apply text swap to every element with data-es / data-en
    document.querySelectorAll('[data-es][data-en]').forEach(el => {
      const val = el.getAttribute('data-' + lang);
      if (val === null) return;
      if (val.includes('<')) el.innerHTML = val;
      else el.textContent = val;
    });

    // Sync deck toggle buttons visually
    if (typeof dkLang === 'function') dkLang(lang);
  }

  // Close dropdowns on outside click
  document.addEventListener('click', function() {
    const dd = document.getElementById('nav-dropdown');
    if (dd) dd.classList.remove('open');
    if (typeof calClose === 'function') calClose();
  });

  /* ═══════════════════════════════════════════
     CALENDAR
     ═══════════════════════════════════════════ */
  function getCalEvent() {
    const ev = window._currentEvent || {};
    const d = (ev.date || '2026-04-12').replace(/-/g, '');
    const tStart = (ev.timeStart || '21:00').replace(':', '');
    const tEnd = (ev.timeEnd || '05:00').replace(':', '');
    // If end time < start time, it's next day
    const endDate = parseInt(tEnd) < parseInt(tStart) ? String(parseInt(d) + 1) : d;
    return {
      title: ev.name || 'Evento Lezgo',
      start: d + 'T' + tStart + '00',
      end:   endDate + 'T' + tEnd + '00',
      location: (ev.venue || '') + ', ' + (ev.location || 'Lima'),
      description: 'Ticket Lezgo — identidad verificada. lezgoapp.vercel.app'
    };
  }

  function calToggle(e) {
    e.stopPropagation();
    const dd = document.getElementById('cal-dropdown');
    if (!dd) return;
    const isOpen = dd.style.opacity === '1';
    if (isOpen) { calClose(); return; }
    const btn = document.getElementById('cal-btn');
    const rect = btn.getBoundingClientRect();
    dd.style.top  = (rect.bottom + 8) + 'px';
    dd.style.left = rect.left + 'px';
    dd.style.opacity = '1';
    dd.style.pointerEvents = 'all';
    dd.style.transform = 'translateY(0)';
  }

  function calClose() {
    const dd = document.getElementById('cal-dropdown');
    if (!dd) return;
    dd.style.opacity = '0';
    dd.style.pointerEvents = 'none';
    dd.style.transform = 'translateY(-6px)';
  }

  function calAdd(type) {
    calClose();
    const ev = getCalEvent();
    if (type === 'google') {
      const url = 'https://calendar.google.com/calendar/render?action=TEMPLATE' +
        '&text=' + encodeURIComponent(ev.title) +
        '&dates=' + ev.start + '/' + ev.end +
        '&location=' + encodeURIComponent(ev.location) +
        '&details=' + encodeURIComponent(ev.description);
      window.open(url, '_blank');
    } else if (type === 'outlook') {
      const url = 'https://outlook.live.com/calendar/0/deeplink/compose?subject=' + encodeURIComponent(ev.title) +
        '&startdt=2026-05-16T21:00:00&enddt=2026-05-17T05:00:00' +
        '&location=' + encodeURIComponent(ev.location) +
        '&body=' + encodeURIComponent(ev.description);
      window.open(url, '_blank');
    } else if (type === 'apple') {
      const ics = [
        'BEGIN:VCALENDAR', 'VERSION:2.0', 'PRODID:-//Lezgo//EN',
        'BEGIN:VEVENT',
        'DTSTART:' + ev.start,
        'DTEND:' + ev.end,
        'SUMMARY:' + ev.title,
        'LOCATION:' + ev.location,
        'DESCRIPTION:' + ev.description,
        'END:VEVENT', 'END:VCALENDAR'
      ].join('\r\n');
      const blob = new Blob([ics], { type: 'text/calendar;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'lezgo-' + (ev.title || 'evento').toLowerCase().replace(/[^a-z0-9]+/g,'-') + '.ics';
      a.click(); URL.revokeObjectURL(url);
    }
  }

</script>

<!-- ═══════════════════════════════════════════
     PURCHASE MODAL
     ═══════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════
     VIEW 8: AUTH — Login / Register
     ═══════════════════════════════════════════ -->
<div id="v-auth" class="view">
  <div class="auth-view">
    <div class="auth-logo" onclick="go('eventos')">LEZGO ☺</div>
    <div class="auth-card">
      <div class="auth-tabs">
        <div class="auth-tab active" id="auth-tab-login" onclick="authSwitchTab('login')">Iniciar sesión</div>
        <div class="auth-tab" id="auth-tab-register" onclick="authSwitchTab('register')">Crear cuenta</div>
      </div>
      <div class="auth-body">
        <!-- LOGIN PANEL -->
        <div id="auth-login-panel">
          <div class="auth-title">Bienvenido de vuelta 👋</div>
          <div class="auth-sub">Entra con tu email. Acceso rápido, sin complicaciones.</div>
          <label class="auth-label">Email</label>
          <input class="auth-input" type="email" id="auth-email-input" placeholder="tu@email.com">
          <button class="auth-btn" onclick="authSendLink()">Entrar con email →</button>
          <div class="auth-divider">o continúa con</div>
          <button class="auth-btn-ghost" onclick="authGoogleLogin()">
            <span>🔵</span> Google
          </button>
          <div id="auth-link-sent" style="display:none; margin-top:16px; background:rgba(229,255,0,0.08); border:1px solid rgba(229,255,0,0.2); border-radius:12px; padding:16px; font-size:14px; text-align:center; color:var(--acid);">
            ✉️ Link enviado a tu email. Revisa tu bandeja.
          </div>
        </div>
        <!-- REGISTER PANEL -->
        <div id="auth-register-panel" style="display:none">
          <div class="auth-steps-bar" id="auth-reg-steps">
            <span class="active"></span>
            <span></span>
            <span></span>
          </div>
          <!-- REG STEP 1: Email -->
          <div class="auth-step active" id="auth-reg-1">
            <div class="auth-title">Crea tu cuenta 🚀</div>
            <div class="auth-sub">Necesitas email y DNI. En 2 minutos estás dentro.</div>
            <label class="auth-label">Nombre completo</label>
            <input class="auth-input" type="text" id="reg-name" placeholder="Mario Leder">
            <label class="auth-label">Email</label>
            <input class="auth-input" type="email" id="reg-email" placeholder="tu@email.com">
            <label class="auth-label">Teléfono (opcional)</label>
            <input class="auth-input" type="tel" id="reg-phone" placeholder="+51 999 000 000">
            <button class="auth-btn" onclick="authRegStep(2)">Continuar →</button>
          </div>
          <!-- REG STEP 2: DNI -->
          <div class="auth-step" id="auth-reg-2">
            <div class="auth-title">Verifica tu identidad 🪪</div>
            <div class="auth-sub">Tu DNI vincula tus entradas a ti. Protegemos tu compra y eliminamos la reventa trucha.</div>
            <label class="auth-label">Número de DNI</label>
            <input class="auth-input" type="text" id="reg-dni" placeholder="73XXXXXX" maxlength="8">
            <label class="auth-label">Fecha de nacimiento</label>
            <input class="auth-input" type="text" id="reg-dob" placeholder="DD/MM/AAAA" maxlength="10">
            <div class="pm-security-note" style="margin-top:0; margin-bottom:0;">
              🔒 Tu DNI solo se usa para verificar tu identidad. No almacenamos datos sensibles.
            </div>
            <button class="auth-btn" style="margin-top:16px" onclick="authRegStep(3)">Verificar DNI →</button>
            <button class="auth-btn-ghost" onclick="authRegStep(1)" style="margin-top:0">← Volver</button>
          </div>
          <!-- REG STEP 3: Photo + Success -->
          <div class="auth-step" id="auth-reg-3">
            <div id="auth-photo-section">
              <div class="auth-title">Una foto tuya 🤳</div>
              <div class="auth-sub">El staff en puerta compara tu foto con tu DNI. Sin app, sin QR.</div>
              <div class="auth-photo-box" id="auth-photo-box" onclick="authTakePhoto()">
                <span id="auth-photo-emoji">📷</span>
                <div class="auth-photo-overlay">Tomar foto</div>
              </div>
              <div id="auth-photo-actions">
                <button class="auth-btn" onclick="authFinishRegister()">Tomar foto y registrarme →</button>
                <button class="auth-btn-ghost" onclick="authRegStep(2)" style="margin-top:0">← Volver</button>
              </div>
              <div id="auth-loading-reg" style="display:none; text-align:center; padding:20px 0;">
                <div class="pm-spinner" style="margin:0 auto 12px;"></div>
                <div style="font-size:14px; color:var(--text-mid);">Verificando identidad...</div>
              </div>
            </div>
            <div id="auth-reg-success" style="display:none">
              <div class="auth-success-icon">🎉</div>
              <div class="auth-success-title">¡Cuenta creada!</div>
              <div class="auth-success-sub">Tu identidad está verificada. Ya puedes comprar entradas con tu DNI vinculado.</div>
              <div class="auth-verified-badge">🪪 Identidad verificada con RENIEC</div>
              <button class="auth-btn" onclick="go('eventos')">Explorar eventos →</button>
            </div>
          </div>
        </div>
        <div class="auth-legal">
          Al continuar aceptas los <a href="#">Términos de Uso</a> y <a href="#">Política de Privacidad</a> de Lezgo.
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════
     VIEW 9: MIS ENTRADAS — Digital Wallet
     ═══════════════════════════════════════════ -->
<div id="v-mis-entradas" class="view">
  <div class="mt-view">
    <div class="mt-header">
      <div class="mt-header-left">
        <h1>Mis Entradas</h1>
        <p>3 entradas activas · DNI verificado ✓</p>
      </div>
      <div class="mt-header-right" style="display:flex;align-items:center;gap:10px;">
        <button class="notif-bell" onclick="notifOpen()">🔔<span class="notif-badge">3</span></button>
        <div onclick="go('perfil')" style="width:36px;height:36px;border-radius:50%;background:rgba(229,255,0,0.12);border:1.5px solid rgba(229,255,0,0.25);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:800;color:var(--acid);cursor:pointer;letter-spacing:0.04em;">ML</div>
      </div>
    </div>
    <div class="mt-filter-tabs">
      <div class="mt-tab active" onclick="mtTab('proximas',this)">Próximas <span class="mt-tab-count">2</span></div>
      <div class="mt-tab" onclick="mtTab('pasadas',this)">Pasadas <span class="mt-tab-count">5</span></div>
      <div class="mt-tab" onclick="mtTab('reventas',this)">En Reventa <span class="mt-tab-count">1</span></div>
    </div>
    <!-- PRÓXIMAS -->
    <div class="mt-panel active" id="mt-proximas">
      <div class="mt-ticket" id="mt-t1">
        <div class="mt-ticket-head" onclick="mtToggleTicket('mt-t1')">
          <div class="mt-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1598387993281-cecf8b71a8f8?w=200&q=80')"></div>
          <div class="mt-ticket-info">
            <div class="mt-ticket-event">FABRICLIMA 001</div>
            <div class="mt-ticket-meta">Sáb 12 Abril 2026 · Almacén 77, Callao · 23:00</div>
            <div class="mt-ticket-tags">
              <span class="mt-ticket-tag upcoming">PRÓXIMO</span>
              <span class="mt-ticket-tag tier">General</span>
              <span class="mt-ticket-tag tier">🪪 DNI Vinculado</span>
            </div>
          </div>
          <div class="mt-ticket-right">
            <div class="mt-ticket-price">S/180</div>
            <div class="mt-ticket-actions">
              <button class="mt-ticket-btn primary" onclick="event.stopPropagation();mtToggleTicket('mt-t1')">Ver entrada</button>
              <button class="mt-ticket-btn ghost" onclick="event.stopPropagation();resaleOpen('FABRICLIMA 001','General · 12 Abril 2026',55,'demo-ticket-1')">Revender</button>
            </div>
          </div>
        </div>
        <div class="mt-ticket-expand" id="mt-t1-expand">
          <div class="mt-digital-ticket">
            <div class="mt-dt-event">FABRICLIMA 001</div>
            <div class="mt-dt-name">General Admission</div>
            <div class="mt-dt-grid">
              <div class="mt-dt-field"><label>Fecha</label><span>12 Abril</span></div>
              <div class="mt-dt-field"><label>Hora</label><span>23:00</span></div>
              <div class="mt-dt-field"><label>Venue</label><span>Almacén 77</span></div>
            </div>
            <div class="mt-tear-line"><div class="mt-tear-dot"></div><div class="mt-tear-dot"></div></div>
            <div class="mt-qr-area">
              <span class="mt-qr-emoji">🪪</span>
              <div class="mt-qr-label">Presenta tu DNI en puerta · No necesitas app</div>
            </div>
            <div class="mt-dt-footer">
              <div class="mt-dt-verified">✅ Verificado con Lezgo</div>
              <div class="mt-dt-id">DNI: 73•••456</div>
            </div>
          </div>
          <div class="mt-ticket-share">
            <button class="mt-share-btn" disabled style="opacity:0.4;cursor:not-allowed">📤 Compartir</button>
            <button class="mt-share-btn" disabled style="opacity:0.4;cursor:not-allowed">📄 PDF</button>
            <button class="mt-share-btn" onclick="openEvent('fabriclima-001')">🎫 Ver evento</button>
          </div>
        </div>
      </div>
      <div class="mt-ticket" id="mt-t2">
        <div class="mt-ticket-head" onclick="mtToggleTicket('mt-t2')">
          <div class="mt-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1571266028243-e4733b0f0bb0?w=200&q=80')"></div>
          <div class="mt-ticket-info">
            <div class="mt-ticket-event">Rorschach.Inc 2026</div>
            <div class="mt-ticket-meta">Jue 01 Mayo 2026 · Av. 9 de Diciembre 203 · 22:00</div>
            <div class="mt-ticket-tags">
              <span class="mt-ticket-tag upcoming">PRÓXIMO</span>
              <span class="mt-ticket-tag tier">Season Pass</span>
              <span class="mt-ticket-tag tier">🪪 DNI Vinculado</span>
            </div>
          </div>
          <div class="mt-ticket-right">
            <div class="mt-ticket-price">S/120</div>
            <div class="mt-ticket-actions">
              <button class="mt-ticket-btn primary" onclick="event.stopPropagation();mtToggleTicket('mt-t2')">Ver entrada</button>
              <button class="mt-ticket-btn ghost" onclick="event.stopPropagation();resaleOpen('Rorschach.Inc 2026','Season Pass · 01 Mayo 2026',120,'demo-ticket-2')">Revender</button>
            </div>
          </div>
        </div>
        <div class="mt-ticket-expand" id="mt-t2-expand">
          <div class="mt-digital-ticket">
            <div class="mt-dt-event">Rorschach.Inc 2026</div>
            <div class="mt-dt-name">Season Pass 🎫</div>
            <div class="mt-dt-grid">
              <div class="mt-dt-field"><label>Fecha</label><span>01 Mayo</span></div>
              <div class="mt-dt-field"><label>Hora</label><span>22:00</span></div>
              <div class="mt-dt-field"><label>Venue</label><span>9 Dic. 203</span></div>
            </div>
            <div class="mt-tear-line"><div class="mt-tear-dot"></div><div class="mt-tear-dot"></div></div>
            <div class="mt-qr-area">
              <span class="mt-qr-emoji">🪪</span>
              <div class="mt-qr-label">Presenta tu DNI en puerta · No necesitas app</div>
            </div>
            <div class="mt-dt-footer">
              <div class="mt-dt-verified">✅ Verificado con Lezgo</div>
              <div class="mt-dt-id">DNI: 73•••456</div>
            </div>
          </div>
          <div class="mt-ticket-share">
            <button class="mt-share-btn" disabled style="opacity:0.4;cursor:not-allowed">📤 Compartir</button>
            <button class="mt-share-btn" disabled style="opacity:0.4;cursor:not-allowed">📄 PDF</button>
            <button class="mt-share-btn" onclick="openEvent('fabriclima-001')">🎫 Ver evento</button>
          </div>
        </div>
      </div>
    </div>
    <!-- PASADAS -->
    <div class="mt-panel" id="mt-pasadas">
      <div class="mt-ticket">
        <div class="mt-ticket-head">
          <div class="mt-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=200&q=80')"></div>
          <div class="mt-ticket-info">
            <div class="mt-ticket-event">Hernán Cattáneo</div>
            <div class="mt-ticket-meta">20 Marzo 2026 · Arena Perú</div>
            <div class="mt-ticket-tags">
              <span class="mt-ticket-tag attended">ASISTIDO ✓</span>
              <span class="mt-ticket-tag tier">VIP</span>
            </div>
          </div>
          <div class="mt-ticket-right">
            <div class="mt-ticket-price" style="color:var(--text-mid)">S/280</div>
          </div>
        </div>
      </div>
      <div class="mt-ticket">
        <div class="mt-ticket-head">
          <div class="mt-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1429962714451-bb934ecdc4ec?w=200&q=80')"></div>
          <div class="mt-ticket-info">
            <div class="mt-ticket-event">FABRICLIMA 001</div>
            <div class="mt-ticket-meta">08 Marzo 2026 · Costa Verde</div>
            <div class="mt-ticket-tags">
              <span class="mt-ticket-tag attended">ASISTIDO ✓</span>
              <span class="mt-ticket-tag tier">Full Weekend</span>
            </div>
          </div>
          <div class="mt-ticket-right">
            <div class="mt-ticket-price" style="color:var(--text-mid)">S/350</div>
          </div>
        </div>
      </div>
      <div class="mt-ticket">
        <div class="mt-ticket-head">
          <div class="mt-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1574391884720-bbc3740c59d1?w=200&q=80')"></div>
          <div class="mt-ticket-info">
            <div class="mt-ticket-event">Solomun en Lima</div>
            <div class="mt-ticket-meta">14 Febrero 2026 · Lurin Live</div>
            <div class="mt-ticket-tags">
              <span class="mt-ticket-tag attended">ASISTIDO ✓</span>
              <span class="mt-ticket-tag tier">General</span>
            </div>
          </div>
          <div class="mt-ticket-right">
            <div class="mt-ticket-price" style="color:var(--text-mid)">S/200</div>
          </div>
        </div>
      </div>
    </div>
    <!-- EN REVENTA -->
    <div class="mt-panel" id="mt-reventas">
      <div class="mt-ticket">
        <div class="mt-ticket-head">
          <div class="mt-ticket-img" style="background-image:url('https://images.unsplash.com/photo-1493676304819-0d7a8d026dcf?w=200&q=80')"></div>
          <div class="mt-ticket-info">
            <div class="mt-ticket-event">Solomun en Lima</div>
            <div class="mt-ticket-meta">22 Mayo 2026 · Lurin Live</div>
            <div class="mt-ticket-tags">
              <span class="mt-ticket-tag resale">EN REVENTA</span>
              <span class="mt-ticket-tag tier">General</span>
            </div>
          </div>
          <div class="mt-ticket-right">
            <div class="mt-ticket-price">S/280</div>
            <div class="mt-ticket-actions">
              <button class="mt-ticket-btn ghost" onclick="alert('Retirar próximamente')">Retirar</button>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-empty" style="padding:40px 24px">
        <div class="mt-empty-icon">💸</div>
        <div class="mt-empty-text">¿Tienes una entrada que no usarás?</div>
        <div class="mt-empty-sub">Ve a "Próximas" y presiona "Revender" para listarla en el marketplace seguro.</div>
      </div>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════
     VIEW 10: ORGANIZER DASHBOARD
     ═══════════════════════════════════════════ -->
<div id="v-organizer" class="view">
  <div class="og-view">
    <div class="og-header">
      <div class="og-header-top">
        <div>
          <div class="og-badge">🏢 Panel Organizador</div>
          <h1>Mi Dashboard</h1>
          <p>Bienvenido, Rorschach Productions · 2 eventos activos</p>
        </div>
        <button class="og-btn-new" onclick="createEvent()">+ Nuevo Evento</button>
      </div>
    </div>
    <div class="og-metrics">
      <div class="og-metric">
        <div class="og-metric-label">Entradas vendidas</div>
        <div class="og-metric-value acid">1,247</div>
        <div class="og-metric-change up">↑ 18% vs semana anterior</div>
      </div>
      <div class="og-metric">
        <div class="og-metric-label">Revenue total</div>
        <div class="og-metric-value">S/187,050</div>
        <div class="og-metric-change up">↑ S/24,200 esta semana</div>
      </div>
      <div class="og-metric">
        <div class="og-metric-label">Check-ins hoy</div>
        <div class="og-metric-value">0</div>
        <div class="og-metric-change">Próximo evento: 01 Mayo</div>
      </div>
      <div class="og-metric">
        <div class="og-metric-label">Tasa de reventa</div>
        <div class="og-metric-value">4.2%</div>
        <div class="og-metric-change down">↓ -1.1% vs mes pasado</div>
      </div>
    </div>
    <div class="og-section">
      <div class="og-section-title">Revenue — últimas 8 semanas</div>
      <div class="og-chart">
        <div class="og-bar" style="height:35%"></div>
        <div class="og-bar" style="height:52%"></div>
        <div class="og-bar" style="height:41%"></div>
        <div class="og-bar" style="height:68%"></div>
        <div class="og-bar" style="height:55%"></div>
        <div class="og-bar" style="height:72%"></div>
        <div class="og-bar" style="height:88%"></div>
        <div class="og-bar highlight" style="height:100%"></div>
      </div>
      <div class="og-chart-labels">
        <div class="og-chart-label">Ene 4</div>
        <div class="og-chart-label">Ene 11</div>
        <div class="og-chart-label">Ene 18</div>
        <div class="og-chart-label">Ene 25</div>
        <div class="og-chart-label">Feb 1</div>
        <div class="og-chart-label">Feb 8</div>
        <div class="og-chart-label">Feb 15</div>
        <div class="og-chart-label">Feb 22</div>
      </div>
    </div>
    <div class="og-section">
      <div class="og-section-title">Mis eventos <a onclick="alert('Ver todos próximamente')">Ver todos →</a></div>
      <div class="og-events" id="og-events-list">
        <div class="og-event-card">
          <div class="og-event-img" style="background-image:url('https://images.unsplash.com/photo-1571266028243-e4733b0f0bb0?w=400&q=80')">
            <div class="og-event-status">🟢 ACTIVO</div>
          </div>
          <div class="og-event-body">
            <div class="og-event-name">Rorschach.Inc 2026</div>
            <div class="og-event-meta">01 Mayo 2026 · Av. 9 de Diciembre 203 · Lima</div>
            <div class="og-event-bar"><div class="og-event-bar-fill" style="width:78%"></div></div>
            <div class="og-event-sell"><span>Vendidas</span><strong>975 / 1,250</strong></div>
          </div>
          <div class="og-event-actions">
            <button class="og-act-btn primary" onclick="go('scanner')">📡 Scanner</button>
            <button class="og-act-btn ghost" onclick="ogShowAttendees()">👥 Asistentes</button>
            <button class="og-act-btn ghost" onclick="alert('Exportar próximamente')">📊 Export</button>
          </div>
        </div>
        <div class="og-event-card">
          <div class="og-event-img" style="background-image:url('https://images.unsplash.com/photo-1598387993281-cecf8b71a8f8?w=400&q=80')">
            <div class="og-event-status" style="color:rgba(255,255,255,0.5);border-color:rgba(255,255,255,0.2)">📝 BORRADOR</div>
          </div>
          <div class="og-event-body">
            <div class="og-event-name">Rorschach.Inc — Afterparty</div>
            <div class="og-event-meta">02 Mayo 2026 · Venue TBD</div>
            <div class="og-event-bar"><div class="og-event-bar-fill" style="width:12%"></div></div>
            <div class="og-event-sell"><span>Vendidas</span><strong>37 / 300</strong></div>
          </div>
          <div class="og-event-actions">
            <button class="og-act-btn primary" onclick="alert('Editar próximamente')">✏️ Editar</button>
            <button class="og-act-btn ghost" onclick="alert('Publicar próximamente')">🚀 Publicar</button>
          </div>
        </div>
      </div>
    </div>
    <div class="og-section" id="og-attendees-section" style="display:none">
      <div class="og-section-title">Asistentes — Rorschach.Inc 2026 <a onclick="document.getElementById('og-attendees-section').style.display='none'">Cerrar ×</a></div>
      <div class="og-table-wrap">
        <div class="og-table-head">
          <div class="og-table-head-title">1,247 asistentes</div>
          <input class="og-search-mini" type="text" placeholder="Buscar por nombre o DNI...">
        </div>
        <table class="og-table">
          <thead>
            <tr><th>Asistente</th><th>Ticket</th><th>Compra</th><th>Estado</th></tr>
          </thead>
          <tbody>
            <tr>
              <td><div class="og-attendee-name">Mario Leder</div><div class="og-attendee-dni">DNI: 73•••456</div></td>
              <td>General</td><td>S/120</td>
              <td><span class="og-status-pill pending">⏳ Pendiente</span></td>
            </tr>
            <tr>
              <td><div class="og-attendee-name">Ana Torres</div><div class="og-attendee-dni">DNI: 47•••219</div></td>
              <td>VIP</td><td>S/280</td>
              <td><span class="og-status-pill checked">✅ Ingresó 22:14</span></td>
            </tr>
            <tr>
              <td><div class="og-attendee-name">Carlos Vega</div><div class="og-attendee-dni">DNI: 61•••803</div></td>
              <td>Season Pass</td><td>S/0</td>
              <td><span class="og-status-pill checked">✅ Ingresó 21:52</span></td>
            </tr>
            <tr>
              <td><div class="og-attendee-name">Lucia Mendez</div><div class="og-attendee-dni">DNI: 80•••134</div></td>
              <td>General (Reventa)</td><td>S/180</td>
              <td><span class="og-status-pill resale">🔄 Reventa MP</span></td>
            </tr>
            <tr>
              <td><div class="og-attendee-name">Diego Ríos</div><div class="og-attendee-dni">DNI: 55•••671</div></td>
              <td>VIP</td><td>S/280</td>
              <td><span class="og-status-pill pending">⏳ Pendiente</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════
     VIEW 11: EVENT FORM (Create/Edit)
     ═══════════════════════════════════════════ -->
<div id="v-event-form" class="view">
  <div class="ef-view">
    <div class="ef-header">
      <h1 id="ef-title">Nuevo Evento</h1>
      <button class="ef-back" onclick="go('organizer')">← Dashboard</button>
    </div>

    <!-- A. Info básica -->
    <div class="ef-section">
      <div class="ef-section-title">Info básica</div>
      <div class="ef-row">
        <div class="ef-field">
          <label class="ef-label">Nombre del evento *</label>
          <input class="ef-input" type="text" id="ef-name" placeholder="ej: FABRICLIMA 001">
        </div>
        <div class="ef-field">
          <label class="ef-label">Subtítulo / Tagline</label>
          <input class="ef-input" type="text" id="ef-subtitle" placeholder="ej: Grand Opening">
        </div>
      </div>
      <div class="ef-row">
        <div class="ef-field">
          <label class="ef-label">Género *</label>
          <input class="ef-input" type="text" id="ef-genre" placeholder="ej: Techno / House">
        </div>
        <div class="ef-field">
          <label class="ef-label">Estado</label>
          <select class="ef-select" id="ef-status">
            <option value="draft">Borrador</option>
            <option value="published">Publicado</option>
            <option value="sold-out">Agotado</option>
          </select>
        </div>
      </div>
      <div class="ef-field full">
        <label class="ef-label">Descripción *</label>
        <textarea class="ef-textarea" id="ef-description" placeholder="Describe tu evento..."></textarea>
      </div>
    </div>

    <!-- B. Fecha y lugar -->
    <div class="ef-section">
      <div class="ef-section-title">Fecha y lugar</div>
      <div class="ef-row-3">
        <div class="ef-field">
          <label class="ef-label">Fecha *</label>
          <input class="ef-input" type="date" id="ef-date">
        </div>
        <div class="ef-field">
          <label class="ef-label">Hora inicio *</label>
          <input class="ef-input" type="time" id="ef-time-start" value="22:00">
        </div>
        <div class="ef-field">
          <label class="ef-label">Hora fin *</label>
          <input class="ef-input" type="time" id="ef-time-end" value="05:00">
        </div>
      </div>
      <div class="ef-row">
        <div class="ef-field">
          <label class="ef-label">Venue / Local *</label>
          <input class="ef-input" type="text" id="ef-venue" placeholder="ej: Almacén 77">
        </div>
        <div class="ef-field">
          <label class="ef-label">Distrito *</label>
          <select class="ef-select" id="ef-distrito">
            <option value="">Seleccionar...</option>
            <option value="callao">Callao</option>
            <option value="cercado">Cercado de Lima</option>
            <option value="barranco">Barranco</option>
            <option value="miraflores">Miraflores</option>
            <option value="santa-anita">Santa Anita</option>
            <option value="rimac">Rímac</option>
            <option value="surco">Surco</option>
            <option value="san-isidro">San Isidro</option>
            <option value="la-molina">La Molina</option>
          </select>
        </div>
      </div>
      <div class="ef-field">
        <label class="ef-label">Ubicación (display)</label>
        <input class="ef-input" type="text" id="ef-location" placeholder="ej: Callao, Lima">
      </div>
    </div>

    <!-- C. Media -->
    <div class="ef-section">
      <div class="ef-section-title">Media</div>
      <div class="ef-row">
        <div class="ef-field">
          <label class="ef-label">URL imagen hero</label>
          <input class="ef-input" type="text" id="ef-image" placeholder="https://images.unsplash.com/...">
        </div>
        <div class="ef-field">
          <label class="ef-label">YouTube Video ID</label>
          <input class="ef-input" type="text" id="ef-video" placeholder="ej: fJqXu9x0tX4">
        </div>
      </div>
    </div>

    <!-- D. Lineup -->
    <div class="ef-section">
      <div class="ef-section-title">Lineup</div>
      <div id="ef-lineup-list">
        <!-- Dynamically populated -->
      </div>
      <button class="ef-add-btn" onclick="efAddArtist()">+ Agregar artista</button>
    </div>

    <!-- E. Tickets -->
    <div class="ef-section">
      <div class="ef-section-title">Tickets</div>
      <div id="ef-tiers-list">
        <!-- Dynamically populated -->
      </div>
      <button class="ef-add-btn" onclick="efAddTier()">+ Agregar tier</button>
    </div>

    <!-- F. Secciones visibles -->
    <div class="ef-section">
      <div class="ef-section-title">Secciones visibles en la página</div>
      <p style="font-size:12px; color:var(--text-dim); margin:0 0 12px">Elige qué bloques de info se muestran en la página pública del evento.</p>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
        <label class="ef-toggle-label"><input type="checkbox" id="ef-show-lineup" checked> Lineup</label>
        <label class="ef-toggle-label"><input type="checkbox" id="ef-show-about" checked> Descripción / About</label>
        <label class="ef-toggle-label"><input type="checkbox" id="ef-show-venue" checked> Venue / Mapa</label>
        <label class="ef-toggle-label"><input type="checkbox" id="ef-show-video" checked> Video hero</label>
        <label class="ef-toggle-label"><input type="checkbox" id="ef-show-tags" checked> Tags</label>
        <label class="ef-toggle-label"><input type="checkbox" id="ef-show-tickets" checked disabled> Tickets (siempre visible)</label>
      </div>
    </div>

    <!-- Changelog (visible when editing) -->
    <div class="ef-section" id="ef-changelog-section" style="display:none">
      <h3 class="ef-section-title">Log de cambios</h3>
      <div id="ef-changelog-list" style="font-size:12px; color:var(--text-dim); line-height:1.8"></div>
    </div>

    <!-- Actions -->
    <div class="ef-actions">
      <button class="ef-btn-cancel" onclick="go('organizer')">Cancelar</button>
      <button class="ef-btn-save" id="ef-save-btn" onclick="efSaveEvent()">Guardar evento</button>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════
     NOTIFICATION PANEL
     ═══════════════════════════════════════════ -->
<div class="notif-overlay" id="notif-overlay" onclick="notifOverlayClick(event)">
  <div class="notif-panel" id="notif-panel">
    <div class="notif-header">
      <h2>Notificaciones</h2>
      <div style="display:flex;gap:12px;align-items:center">
        <button class="notif-mark-all" onclick="notifMarkAll()">Marcar todas leídas</button>
        <button class="notif-close" onclick="notifClose()">✕</button>
      </div>
    </div>
    <div class="notif-section-label">Nuevas</div>
    <div class="notif-item unread" onclick="notifMarkRead(this);go('mis-entradas')">
      <div class="notif-item-icon">🎫</div>
      <div class="notif-item-body">
        <div class="notif-item-title">Entrada confirmada</div>
        <div class="notif-item-text">Tu entrada para FABRICLIMA 001 está lista. Solo lleva tu DNI.</div>
        <div class="notif-item-time">Hace 2 minutos</div>
      </div>
      <div class="notif-unread-dot"></div>
    </div>
    <div class="notif-item unread" onclick="notifMarkRead(this)">
      <div class="notif-item-icon">⚡</div>
      <div class="notif-item-body">
        <div class="notif-item-title">Preventa abierta</div>
        <div class="notif-item-text">La preventa de Solomun en Lima acaba de abrir. Quedan 80 entradas.</div>
        <div class="notif-item-time">Hace 1 hora</div>
      </div>
      <div class="notif-unread-dot"></div>
    </div>
    <div class="notif-item unread" onclick="notifMarkRead(this)">
      <div class="notif-item-icon">🏆</div>
      <div class="notif-item-body">
        <div class="notif-item-title">Badge desbloqueado</div>
        <div class="notif-item-text">¡Obtuviste "Preventa Hunter"! Has comprado 3 preventas seguidas.</div>
        <div class="notif-item-time">Ayer</div>
      </div>
      <div class="notif-unread-dot"></div>
    </div>
    <div class="notif-section-label">Anteriores</div>
    <div class="notif-item" onclick="notifMarkRead(this)">
      <div class="notif-item-icon">💸</div>
      <div class="notif-item-body">
        <div class="notif-item-title">Tu reventa fue comprada</div>
        <div class="notif-item-text">Alguien compró tu entrada de Solomun a S/280. Pago en camino.</div>
        <div class="notif-item-time">Hace 3 días</div>
      </div>
    </div>
    <div class="notif-item" onclick="notifMarkRead(this)">
      <div class="notif-item-icon">🪪</div>
      <div class="notif-item-body">
        <div class="notif-item-title">Identidad verificada</div>
        <div class="notif-item-text">Tu DNI fue verificado. Ya puedes comprar entradas.</div>
        <div class="notif-item-time">Hace 1 semana</div>
      </div>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════
     RESALE MODAL
     ═══════════════════════════════════════════ -->
<div class="resale-overlay" id="resale-overlay" onclick="resaleOverlayClick(event)">
  <div class="resale-sheet">
    <div class="resale-handle"></div>
    <div class="resale-title">Poner en reventa 🔄</div>
    <div class="resale-sub">Tu entrada se listará en el marketplace. Solo fans verificados pueden comprarla.</div>
    <div class="resale-ticket-preview">
      <div class="rtp-icon">🎫</div>
      <div class="rtp-info">
        <h3 id="resale-event-name">FABRICLIMA 001</h3>
        <p id="resale-ticket-tier">General · 16 Mayo 2026</p>
      </div>
    </div>
    <div class="resale-price-section">
      <div class="resale-price-label">Precio de venta</div>
      <div class="resale-price-input-wrap">
        <div class="resale-currency">S/</div>
        <input class="resale-price-input" type="number" id="resale-price" value="200" min="1" oninput="resaleUpdateCalc()">
      </div>
      <div class="resale-price-hints">
        <button class="resale-hint-btn" onclick="resaleSetPrice(120)">Precio original</button>
        <button class="resale-hint-btn" onclick="resaleSetPrice(150)">+25%</button>
        <button class="resale-hint-btn" onclick="resaleSetPrice(200)">+67%</button>
      </div>
    </div>
    <div class="resale-info-row"><span>Precio de venta</span><strong id="calc-sale">S/200</strong></div>
    <div class="resale-info-row"><span>Comisión Lezgo (5%)</span><strong id="calc-fee">-S/10</strong></div>
    <hr class="resale-divider">
    <div class="resale-total"><span>Tú recibes</span><span id="calc-net">S/190</span></div>
    <div style="height:16px"></div>
    <div class="resale-terms">
      <input type="checkbox" id="resale-terms-cb">
      <label for="resale-terms-cb">Entiendo que la entrada se transferirá al comprador verificado y mi DNI quedará desvinculado de esta entrada.</label>
    </div>
    <button class="resale-btn" onclick="resaleConfirm()">Publicar en marketplace →</button>
    <button class="resale-cancel" onclick="resaleClose()">Cancelar</button>
  </div>
</div>

<!-- ═══════════════════════════════════════════
     SCANNER RESULT OVERLAY
     ═══════════════════════════════════════════ -->
<div class="scan-result-overlay" id="scan-result-overlay">
  <div class="scan-result-bg" onclick="scanResultClose()"></div>
  <div class="scan-result-card" id="scan-result-card">
    <span class="scan-result-icon" id="scan-result-icon">✅</span>
    <div class="scan-result-status approved" id="scan-result-status">ACCESO APROBADO</div>
    <div class="scan-result-name" id="scan-result-name">Mario Leder</div>
    <div class="scan-result-detail" id="scan-result-detail">DNI verificado · Entrada válida</div>
    <div class="scan-result-info">
      <div class="scan-result-row"><span>DNI</span><span id="sr-dni">73•••456</span></div>
      <div class="scan-result-row"><span>Ticket</span><span id="sr-ticket">General Admission</span></div>
      <div class="scan-result-row"><span>Evento</span><span id="sr-event">Rorschach.Inc 2026</span></div>
      <div class="scan-result-row"><span>Check-in</span><span id="sr-time">22:14:07</span></div>
    </div>
    <button class="scan-next-btn approved" id="scan-next-btn" onclick="scanResultClose()">Siguiente →</button>
  </div>
</div>

<div class="pm-overlay" id="pm-overlay" onclick="pmOverlayClick(event)">
  <div class="pm-sheet" id="pm-sheet">
    <div class="pm-handle"></div>
    <div class="pm-header">
      <div>
        <div class="pm-header-event" id="pm-event-label"><!-- Set by pmOpen() --></div>
        <div class="pm-header-title" id="pm-step-title">Elige tu entrada</div>
      </div>
      <button class="pm-close" onclick="pmClose()">✕</button>
    </div>
    <div class="pm-body">

      <!-- Steps indicator (hidden on step 0) -->
      <div class="pm-steps" id="pm-steps-bar">
        <div class="pm-step-dot active" id="pm-dot-1">1</div>
        <div class="pm-step-line" id="pm-line-1"></div>
        <div class="pm-step-dot" id="pm-dot-2">2</div>
        <div class="pm-step-line" id="pm-line-2"></div>
        <div class="pm-step-dot" id="pm-dot-3">3</div>
        <div class="pm-step-line" id="pm-line-3"></div>
        <div class="pm-step-dot" id="pm-dot-4">✓</div>
      </div>

      <!-- PANEL 0: Login / Crear cuenta -->
      <div class="pm-panel" id="pm-panel-0">
        <div style="text-align:center;padding:4px 0 24px;">
          <div style="font-size:44px;margin-bottom:14px;line-height:1;">🎫</div>
          <div style="font-size:22px;font-weight:900;letter-spacing:-0.5px;margin-bottom:8px;">Obtén tu entrada</div>
          <div style="font-size:14px;color:var(--text-mid);line-height:1.5;">Inicia sesión para vincular tu ticket a tu identidad y proteger tu compra.</div>
        </div>

        <!-- Google -->
        <button onclick="pmLoginWith('google')" style="width:100%;display:flex;align-items:center;justify-content:center;gap:12px;background:#fff;color:#111;border:none;border-radius:14px;padding:14px 20px;font-size:15px;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:12px;transition:opacity 0.2s;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">
          <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
          Continuar con Google
        </button>

        <!-- Divider -->
        <div style="display:flex;align-items:center;gap:12px;margin:4px 0 12px;">
          <div style="flex:1;height:1px;background:rgba(255,255,255,0.08);"></div>
          <span style="font-size:12px;color:var(--text-dim);font-weight:600;">o</span>
          <div style="flex:1;height:1px;background:rgba(255,255,255,0.08);"></div>
        </div>

        <!-- Email login -->
        <input class="pm-input" type="email" id="pm-login-email" placeholder="tu@email.com" style="margin-bottom:10px;" onkeydown="if(event.key==='Enter')pmLoginWith('email')">
        <button class="pm-cta" onclick="pmLoginWith('email')" style="margin-bottom:10px;">Entrar con email →</button>

        <!-- Guest -->
        <button class="pm-cta-secondary" onclick="pmLoginWith('guest')">Continuar sin cuenta</button>

        <div style="margin-top:16px;text-align:center;font-size:12px;color:var(--text-dim);line-height:1.6;">
          Al continuar aceptas nuestros <span style="color:var(--acid);cursor:pointer;">Términos de servicio</span> y <span style="color:var(--acid);cursor:pointer;">Política de privacidad</span>.
        </div>
      </div>

      <!-- PANEL 1: Select ticket -->
      <div class="pm-panel active" id="pm-panel-1">

        <div id="pm-ticket-list-container">
        <!-- GA row -->
        <div class="pm-ticket-row" id="pm-opt-ga">
          <div style="flex:1">
            <div class="pm-ticket-name">General Admission</div>
            <div class="pm-ticket-sub">Early Access · 1 día</div>
          </div>
          <div style="display:flex;align-items:center;gap:16px">
            <div class="pm-ticket-price" style="font-size:16px;">S/120</div>
            <div class="pm-qty-row">
              <button class="pm-qty-btn" id="pm-minus-ga" onclick="pmQtyChange('ga',-1)" disabled>−</button>
              <span class="pm-qty-num" id="pm-qty-ga">0</span>
              <button class="pm-qty-btn" id="pm-plus-ga" onclick="pmQtyChange('ga',1)">+</button>
            </div>
          </div>
        </div>

        <!-- VIP row -->
        <div class="pm-ticket-row" id="pm-opt-vip">
          <div style="flex:1">
            <div class="pm-ticket-name">👑 VIP</div>
            <div class="pm-ticket-sub">Early Access · 1 día · Bar open + zona exclusiva</div>
          </div>
          <div style="display:flex;align-items:center;gap:16px">
            <div class="pm-ticket-price" style="font-size:16px;">S/280</div>
            <div class="pm-qty-row">
              <button class="pm-qty-btn" id="pm-minus-vip" onclick="pmQtyChange('vip',-1)" disabled>−</button>
              <span class="pm-qty-num" id="pm-qty-vip">0</span>
              <button class="pm-qty-btn" id="pm-plus-vip" onclick="pmQtyChange('vip',1)">+</button>
            </div>
          </div>
        </div>

        <!-- Festival Pass (soldout) -->
        <div class="pm-ticket-row soldout">
          <div style="flex:1">
            <div class="pm-ticket-name">Festival Pass (2 días)</div>
            <div class="pm-ticket-sub">Preventa — Agotado</div>
          </div>
          <div class="pm-ticket-price" style="color:rgba(255,255,255,0.3);font-size:14px">AGOTADO</div>
        </div>

        </div><!-- /pm-ticket-list-container -->

        <!-- Subtotal row -->
        <div class="pm-ticket-subtotal">
          <span>Subtotal</span>
          <strong id="pm-step1-subtotal">S/0</strong>
        </div>

        <!-- ID assignment notice -->
        <div class="pm-id-notice" id="pm-id-notice">
          <span class="pm-id-notice-icon">🪪</span>
          <span id="pm-id-notice-text">Tu entrada quedará vinculada a tu DNI en el siguiente paso.</span>
        </div>

        <button class="pm-cta" id="pm-step1-continue" onclick="pmGoStep(2)" disabled style="opacity:0.4;">Continuar →</button>
      </div>

      <!-- PANEL 2: DNI verification -->
      <div class="pm-panel" id="pm-panel-2">
        <div class="pm-verify-icon">🪪</div>
        <div class="pm-verify-title">Verifica tu identidad</div>
        <div class="pm-verify-sub">Tu entrada quedará vinculada a tu DNI. Así protegemos tu compra y eliminamos las reventas truchas.</div>
        <input class="pm-input" type="text" id="pm-dni-input" placeholder="DNI (ej: 73XXXXXX)" maxlength="10" oninput="pmFormatDni(this)">
        <input class="pm-input" type="text" id="pm-name-input" placeholder="Nombres y apellidos (como en tu DNI)">
        <div class="pm-security-note">
          🔒 Tu DNI se usa solo para verificar tu identidad. No almacenamos datos sensibles.
        </div>
        <button class="pm-cta" id="pm-verify-btn" onclick="pmVerifyDni()">Verificar y continuar →</button>
        <button class="pm-cta-secondary" onclick="pmGoStep(1)">← Volver</button>
      </div>

      <!-- PANEL 3: Payment -->
      <div class="pm-panel" id="pm-panel-3">
        <div class="pm-pay-summary">
          <div id="pm-pay-items"><!-- filled by pmBuildPaySummary() --></div>
          <!-- Fee row with breakdown toggle -->
          <div class="pm-fee-row" style="margin-bottom:2px;">
            <span class="pm-fee-toggle" onclick="pmToggleDesglose()">
              Cargo por servicio
              <span class="pm-fee-chevron" id="pm-fee-chevron">▼</span>
            </span>
            <span id="pm-pay-fee" style="font-weight:600;color:var(--text-mid);">S/10</span>
          </div>
          <!-- Expandable breakdown -->
          <div class="pm-fee-breakdown" id="pm-fee-breakdown">
            <div class="pm-fee-line">
              <span class="pm-fee-label">
                <span class="pm-fee-dot" style="background:#E5FF00;"></span>
                Plataforma Lezgo
              </span>
              <span id="pm-fee-plataforma">3.3%</span>
            </div>
            <div class="pm-fee-line">
              <span class="pm-fee-label">
                <span class="pm-fee-dot" style="background:#60a5fa;"></span>
                Verificación de identidad
              </span>
              <span id="pm-fee-verificacion">2.1%</span>
            </div>
            <div class="pm-fee-line">
              <span class="pm-fee-label">
                <span class="pm-fee-dot" style="background:#a78bfa;"></span>
                Procesamiento de pago
              </span>
              <span id="pm-fee-procesamiento">2.9%</span>
            </div>
          </div>
          <div class="pm-pay-row total" style="margin-top:8px;"><span>Total</span><span id="pm-pay-total">S/130</span></div>
        </div>
        <div class="pm-card-row">
          <div class="pm-card-opt selected" id="pm-pay-card" onclick="pmSelectPay('card')">
            <span class="pm-card-icon">💳</span>
            Tarjeta
          </div>
          <div class="pm-card-opt" id="pm-pay-yape" onclick="pmSelectPay('yape')">
            <span class="pm-card-icon">📱</span>
            Yape / Plin
          </div>
          <div class="pm-card-opt" id="pm-pay-izipay" onclick="pmSelectPay('izipay')">
            <span class="pm-card-icon">🏦</span>
            Izipay
          </div>
        </div>
        <div id="pm-pay-card-fields">
          <input class="pm-input" type="text" placeholder="Número de tarjeta" maxlength="19" oninput="pmFormatCard(this)">
          <div style="display:flex;gap:10px">
            <input class="pm-input" type="text" placeholder="MM/AA" maxlength="5" style="flex:1" oninput="pmFormatExp(this)">
            <input class="pm-input" type="text" placeholder="CVV" maxlength="3" style="flex:1;letter-spacing:0.2em">
          </div>
        </div>
        <div id="pm-pay-yape-fields" style="display:none">
          <div style="text-align:center;font-size:14px;color:var(--text-mid);padding:20px 0">
            📲 Se abrirá el flujo de Yape/Plin al continuar
          </div>
        </div>
        <!-- Loading -->
        <div class="pm-loading" id="pm-loading">
          <div class="pm-spinner"></div>
          <div class="pm-loading-text">Procesando pago seguro...</div>
        </div>
        <button class="pm-cta" id="pm-pay-btn" onclick="pmPay()">Pagar ahora 🔒</button>
        <button class="pm-cta-secondary" onclick="pmGoStep(2)">← Volver</button>
      </div>

      <!-- PANEL 4: Confirmation -->
      <div class="pm-panel" id="pm-panel-4">
        <div class="pm-confirm-icon">🎉</div>
        <div class="pm-confirm-title">¡Entrada confirmada!</div>
        <div class="pm-confirm-sub">Tu entrada está vinculada a tu DNI. En puerta solo presentas tu documento — sin QR, sin app, sin complicaciones.</div>
        <div class="pm-ticket-card-preview">
          <div class="pm-ticket-card-event" id="pm-confirm-event"><!-- Set dynamically --></div>
          <div class="pm-ticket-card-name" id="pm-confirm-ticket-name"><!-- Set dynamically --></div>
          <div class="pm-ticket-card-details">
            <div class="pm-ticket-card-detail" id="pm-confirm-date"><strong><!-- date --></strong><!-- time --></div>
            <div class="pm-ticket-card-detail" id="pm-confirm-venue"><strong><!-- venue --></strong><!-- location --></div>
            <div class="pm-ticket-card-detail"><strong id="pm-confirm-dni">———</strong>DNI Vinculado</div>
          </div>
          <div class="pm-ticket-qr" style="text-align:center">🪪</div>
          <div class="pm-ticket-verified">✅ Verificado con Lezgo</div>
        </div>
        <button class="pm-cta" onclick="pmClose()" style="margin-top:24px">Ver mis entradas →</button>
      </div>

    </div>
  </div>
</div>

</body>
</html>